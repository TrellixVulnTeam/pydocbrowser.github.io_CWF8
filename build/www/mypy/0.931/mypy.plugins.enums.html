<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  

  <head>
    
    <title>mypy.plugins.enums</title>
    <meta name="generator" content="pydoctor 22.2.0"> 
        
    </meta>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=0.75" />
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="apidocs.css" />
    <link rel="stylesheet" type="text/css" href="extra.css" />
</head>

  <body>

    <div id="banner" class="container">    
    <div>
        <a href="https://pydocbrowser.github.io/">Home</a>
        &gt; mypy-0.931 
        <!-- This is an important placeholder and will be 
            replaced by project name and version on building docs -->
        
        <!-- (<a href=""&gt;show all versions</a&gt;) -->
    </div>
</div>

    <nav class="navbar navbar-default">
  
  <div class="container">

    <div class="navbar-header">
      
      <div class="navlinks">
          <span class="navbar-brand">
            mypy <a href="index.html">API Documentation</a>
          </span>

          <a href="moduleIndex.html">
            Modules
          </a>

          <a href="classIndex.html">
            Classes
          </a>

          <a href="nameIndex.html">
            Names
          </a>
      </div>

    </div>
  </div>
</nav>

    

    <div class="container">

      <div class="page-header">
        <h1 class="module"><code><code><a href="index.html" class="internal-link">mypy</a></code><wbr></wbr>.<code><a href="mypy.plugins.html" class="internal-link" title="mypy.plugins">plugins</a></code><wbr></wbr>.<code><a href="mypy.plugins.enums.html" class="internal-link" title="mypy.plugins.enums">enums</a></code></code></h1>
        <div id="showPrivate">
          <button class="btn btn-link" onclick="togglePrivate()">Toggle Private API</button>
        </div>
      </div>

      <div class="categoryHeader">
        module documentation
      </div>

      <div class="extrasDocstring">
        <a href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-0.931//mypy/plugins/enums.py" class="sourceLink">(source)</a>
        <p></p>
      </div>

      <div class="moduleDocstring">
        <div><p>This file contains a variety of plugins for refining how mypy infers types of
expressions involving Enums.</p>
<p>Currently, this file focuses on providing better inference for expressions like
'SomeEnum.FOO.name' and 'SomeEnum.FOO.value'. Note that the type of both expressions
will vary depending on exactly which instance of SomeEnum we're looking at.</p>
<p>Note that this file does <em>not</em> contain all special-cased logic related to enums:
we actually bake some of it directly in to the semantic analysis layer (see
semanal_enum.py).</p>
</div>
      </div>

      <div id="splitTables">
        <table class="children sortable" id="id12212">
  
  
  <tr class="function">
    
    <td>Function</td>
    <td><code><a href="#enum_name_callback" class="internal-link" title="mypy.plugins.enums.enum_name_callback">enum​_name​_callback</a></code></td>
    <td>This plugin refines the 'name' attribute in enums to act as if they were declared to be final.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#enum_value_callback" class="internal-link" title="mypy.plugins.enums.enum_value_callback">enum​_value​_callback</a></code></td>
    <td>This plugin refines the 'value' attribute in enums to refer to the original underlying value. For example, suppose we have the following:</td>
  </tr><tr class="constant">
    
    <td>Constant</td>
    <td><code><a href="#ENUM_NAME_ACCESS" class="internal-link" title="mypy.plugins.enums.ENUM_NAME_ACCESS">ENUM​_NAME​_ACCESS</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="constant">
    
    <td>Constant</td>
    <td><code><a href="#ENUM_VALUE_ACCESS" class="internal-link" title="mypy.plugins.enums.ENUM_VALUE_ACCESS">ENUM​_VALUE​_ACCESS</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_extract_underlying_field_name" class="internal-link" title="mypy.plugins.enums._extract_underlying_field_name">​_extract​_underlying​_field​_name</a></code></td>
    <td>If the given type corresponds to some Enum instance, returns the original name of that enum. For example, if we receive in the type corresponding to 'SomeEnum.FOO', we return the string "SomeEnum.Foo".</td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_first" class="internal-link" title="mypy.plugins.enums._first">​_first</a></code></td>
    <td>Return the first value from any iterable.</td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_implements_new" class="internal-link" title="mypy.plugins.enums._implements_new">​_implements​_new</a></code></td>
    <td>Check whether __new__ comes from enum.Enum or was implemented in a subclass. In the latter case, we must infer Any as long as mypy can't infer the type of _value_ from assignments in __new__.</td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_infer_value_type_with_auto_fallback" class="internal-link" title="mypy.plugins.enums._infer_value_type_with_auto_fallback">​_infer​_value​_type​_with​_auto​_fallback</a></code></td>
    <td>Figure out the type of an enum value accounting for <code>auto()</code>.</td>
  </tr><tr class="constant private">
    
    <td>Constant</td>
    <td><code><a href="#_T" class="internal-link" title="mypy.plugins.enums._T">​_T</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr>
</table>
        

          
      </div>

      <div id="childList">

        <div class="basefunction">
  
  
  <a name="mypy.plugins.enums.enum_name_callback">
    
  </a>
  <a name="enum_name_callback">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">enum_name_callback</span>(ctx):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-0.931//mypy/plugins/enums.py#L31">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>This plugin refines the 'name' attribute in enums to act as if
they were declared to be final.</p>
<p>For example, the expression 'MyEnum.FOO.name' normally is inferred
to be of type 'str'.</p>
<p>This plugin will instead make the inferred type be a 'str' where the
last known value is 'Literal["FOO"]'. This means it would be legal to
use 'MyEnum.FOO.name' in contexts that expect a Literal type, just like
any other Final variable or attribute.</p>
<p>This plugin assumes that the provided context is an attribute access
matching one of the strings found in 'ENUM_NAME_ACCESS'.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">ctx:</span><code><a href="mypy.plugin.html#AttributeContext" class="internal-link">mypy.plugin.AttributeContext</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code><a href="mypy.types.Type.html" class="internal-link" title="mypy.types.Type">Type</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.plugins.enums.enum_value_callback">
    
  </a>
  <a name="enum_value_callback">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">enum_value_callback</span>(ctx):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-0.931//mypy/plugins/enums.py#L120">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>This plugin refines the 'value' attribute in enums to refer to
the original underlying value. For example, suppose we have the
following:</p>
<blockquote>
<dl class="rst-docutils">
<dt>class SomeEnum:</dt>
<dd>FOO = A()
BAR = B()</dd>
</dl>
</blockquote>
<p>By default, mypy will infer that 'SomeEnum.FOO.value' and
'SomeEnum.BAR.value' both are of type 'Any'. This plugin refines
this inference so that mypy understands the expressions are
actually of types 'A' and 'B' respectively. This better reflects
the actual runtime behavior.</p>
<p>This plugin works simply by looking up the original value assigned
to the enum. For example, when this plugin sees 'SomeEnum.BAR.value',
it will look up whatever type 'BAR' had in the SomeEnum TypeInfo and
use that as the inferred type of the overall expression.</p>
<p>This plugin assumes that the provided context is an attribute access
matching one of the strings found in 'ENUM_VALUE_ACCESS'.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">ctx:</span><code><a href="mypy.plugin.html#AttributeContext" class="internal-link">mypy.plugin.AttributeContext</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code><a href="mypy.types.Type.html" class="internal-link" title="mypy.types.Type">Type</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="baseconstant">
  
  
  <a name="mypy.plugins.enums.ENUM_NAME_ACCESS">
    
  </a>
  <a name="ENUM_NAME_ACCESS">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">ENUM_NAME_ACCESS</span> =
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-0.931//mypy/plugins/enums.py#L23">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code>{'{}.name'.format(prefix) for prefix in ENUM_BASES}|{'{}._name_'.format(prefix) <span class="rst-variable-linewrap">↵</span>
for prefix in ENUM_BASES}</code></pre></td></tr></table>
  </div>
</div><div class="baseconstant">
  
  
  <a name="mypy.plugins.enums.ENUM_VALUE_ACCESS">
    
  </a>
  <a name="ENUM_VALUE_ACCESS">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">ENUM_VALUE_ACCESS</span> =
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-0.931//mypy/plugins/enums.py#L26">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code>{'{}.value'.format(prefix) for prefix in ENUM_BASES}|{'{}._value_'.format(prefix<span class="rst-variable-linewrap">↵</span>
) for prefix in ENUM_BASES}</code></pre></td></tr></table>
  </div>
</div><div class="basefunction private">
  
  
  <a name="mypy.plugins.enums._extract_underlying_field_name">
    
  </a>
  <a name="_extract_underlying_field_name">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_extract_underlying_field_name</span>(typ):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-0.931//mypy/plugins/enums.py#L229">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>If the given type corresponds to some Enum instance, returns the
original name of that enum. For example, if we receive in the type
corresponding to 'SomeEnum.FOO', we return the string "SomeEnum.Foo".</p>
<p>This helper takes advantage of the fact that Enum instances are valid
to use inside Literal[...] types. An expression like 'SomeEnum.FOO' is
actually represented by an Instance type with a Literal enum fallback.</p>
<p>We can examine this Literal fallback to retrieve the string.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">typ:</span><code><a href="mypy.types.Type.html" class="internal-link" title="mypy.types.Type">Type</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code><a href="https://docs.python.org/3/library/typing.html#typing.Optional" class="intersphinx-link">Optional</a>[<wbr></wbr><a href="https://docs.python.org/3/library/stdtypes.html#str" class="intersphinx-link">str</a>]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="mypy.plugins.enums._first">
    
  </a>
  <a name="_first">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_first</span>(it):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-0.931//mypy/plugins/enums.py#L58">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Return the first value from any iterable.</p>
<p>Returns <tt class="rst-docutils literal">None</tt> if the iterable is empty.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">it:</span><code><a href="https://docs.python.org/3/library/typing.html#typing.Iterable" class="intersphinx-link">Iterable</a>[<wbr></wbr><a href="#_T" class="internal-link" title="mypy.plugins.enums._T">_T</a>]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code><a href="https://docs.python.org/3/library/typing.html#typing.Optional" class="intersphinx-link">Optional</a>[<wbr></wbr><a href="#_T" class="internal-link" title="mypy.plugins.enums._T">_T</a>]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="mypy.plugins.enums._implements_new">
    
  </a>
  <a name="_implements_new">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_implements_new</span>(info):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-0.931//mypy/plugins/enums.py#L105">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div>Check whether __new__ comes from enum.Enum or was implemented in a
subclass. In the latter case, we must infer Any as long as mypy can't infer
the type of _value_ from assignments in __new__.<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">info:</span><code><a href="mypy.nodes.TypeInfo.html" class="internal-link" title="mypy.nodes.TypeInfo">TypeInfo</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code><a href="https://docs.python.org/3/library/functions.html#bool" class="intersphinx-link">bool</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="mypy.plugins.enums._infer_value_type_with_auto_fallback">
    
  </a>
  <a name="_infer_value_type_with_auto_fallback">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_infer_value_type_with_auto_fallback</span>(ctx, proper_type):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-0.931//mypy/plugins/enums.py#L68">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Figure out the type of an enum value accounting for <code>auto()</code>.</p>
<p>This method is a no-op for a <code><a href="https://docs.python.org/3/library/constants.html#None" class="intersphinx-link">None</a></code> proper_type and also in the case where
the type is not "enum.auto"</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">ctx:</span><code><a href="mypy.plugin.html#AttributeContext" class="internal-link">mypy.plugin.AttributeContext</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">proper​_type:</span><code><a href="https://docs.python.org/3/library/typing.html#typing.Optional" class="intersphinx-link">Optional</a>[<wbr></wbr><a href="mypy.types.ProperType.html" class="internal-link" title="mypy.types.ProperType">ProperType</a>]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code><a href="https://docs.python.org/3/library/typing.html#typing.Optional" class="intersphinx-link">Optional</a>[<wbr></wbr><a href="mypy.types.Type.html" class="internal-link" title="mypy.types.Type">Type</a>]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="baseconstant private">
  
  
  <a name="mypy.plugins.enums._T">
    
  </a>
  <a name="_T">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_T</span> =
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/mypy-0.931//mypy/plugins/enums.py#L55">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code><a href="https://docs.python.org/3/library/typing.html#typing.TypeVar" class="intersphinx-link">TypeVar</a>(<wbr></wbr><span class="rst-variable-quote">'</span><span class="rst-variable-string">_T</span><span class="rst-variable-quote">'</span>)</code></pre></td></tr></table>
  </div>
</div>

      </div>
    </div>

    <footer class="navbar navbar-default">
  
  <div class="container">
    <a href="index.html">API Documentation</a> for mypy,
  generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a>
    22.2.0 at 2022-02-23 08:16:30.
  </div>
</footer>

    <script src="pydoctor.js" type="text/javascript"></script>

  </body>
</html>