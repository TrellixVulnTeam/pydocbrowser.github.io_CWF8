<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  

  <head>
    
    <title>lxml.isoschematron.Schematron</title>
    <meta name="generator" content="pydoctor 22.2.0"> 
        
    </meta>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=0.75" />
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="apidocs.css" />
    <link rel="stylesheet" type="text/css" href="extra.css" />
</head>

  <body>

    

    <nav class="navbar navbar-default">
  
  <div class="container">

    <div class="navbar-header">
      
      <div class="navlinks">
          <span class="navbar-brand">
            lxml <a href="index.html">API Documentation</a>
          </span>

          <a href="moduleIndex.html">
            Modules
          </a>

          <a href="classIndex.html">
            Classes
          </a>

          <a href="nameIndex.html">
            Names
          </a>
      </div>

    </div>
  </div>
</nav>

    

    <div class="container">

      <div class="page-header">
        <h1 class="class"><code><code><a href="index.html" class="internal-link">lxml</a></code><wbr></wbr>.<code><a href="lxml.isoschematron.html" class="internal-link" title="lxml.isoschematron">isoschematron</a></code><wbr></wbr>.<code><a href="lxml.isoschematron.Schematron.html" class="internal-link" title="lxml.isoschematron.Schematron">Schematron</a></code></code></h1>
        <div id="showPrivate">
          <button class="btn btn-link" onclick="togglePrivate()">Toggle Private API</button>
        </div>
      </div>

      <div class="categoryHeader">
        class documentation
      </div>

      <div class="extrasDocstring">
        <p><code><span class="py-keyword">class</span> <span class="py-defname">Schematron</span>(_etree._Validator):</code></p>
        <p><a href="classIndex.html#lxml.isoschematron.Schematron">View In Hierarchy</a></p>
      </div>

      <div class="moduleDocstring">
        <div><p>An ISO Schematron validator.</p>
<p>Pass a root Element or an ElementTree to turn it into a validator.
Alternatively, pass a filename as keyword argument 'file' to parse from
the file system.</p>
<p>Schematron is a less well known, but very powerful schema language.
The main idea is to use the capabilities of XPath to put restrictions on
the structure and the content of XML documents.</p>
<p>The standard behaviour is to fail on <tt class="rst-docutils literal"><span class="pre">failed-assert</span></tt> findings only
(<tt class="rst-docutils literal">ASSERTS_ONLY</tt>).  To change this, you can either pass a report filter
function to the <tt class="rst-docutils literal">error_finder</tt> parameter (e.g. <tt class="rst-docutils literal">ASSERTS_AND_REPORTS</tt>
or a custom <tt class="rst-docutils literal">XPath</tt> object), or subclass isoschematron.Schematron for
complete control of the validation process.</p>
<p>Built on the Schematron language 'reference' skeleton pure-xslt
implementation, the validator is created as an XSLT 1.0 stylesheet using
these steps:</p>
<blockquote>
<ol class="rst-arabic simple" start="0">
<li>(Extract from XML Schema or RelaxNG schema)</li>
<li>Process inclusions</li>
<li>Process abstract patterns</li>
<li>Compile the schematron schema to XSLT</li>
</ol>
</blockquote>
<p>The <tt class="rst-docutils literal">include</tt> and <tt class="rst-docutils literal">expand</tt> keyword arguments can be used to switch off
steps 1) and 2).
To set parameters for steps 1), 2) and 3) hand parameter dictionaries to the
keyword arguments <tt class="rst-docutils literal">include_params</tt>, <tt class="rst-docutils literal">expand_params</tt> or
<tt class="rst-docutils literal">compile_params</tt>.
For convenience, the compile-step parameter <tt class="rst-docutils literal">phase</tt> is also exposed as a
keyword argument <tt class="rst-docutils literal">phase</tt>. This takes precedence if the parameter is also
given in the parameter dictionary.</p>
<p>If <tt class="rst-docutils literal">store_schematron</tt> is set to True, the (included-and-expanded)
schematron document tree is stored and available through the <tt class="rst-docutils literal">schematron</tt>
property.
If <tt class="rst-docutils literal">store_xslt</tt> is set to True, the validation XSLT document tree will be
stored and can be retrieved through the <tt class="rst-docutils literal">validator_xslt</tt> property.
With <tt class="rst-docutils literal">store_report</tt> set to True (default: False), the resulting validation
report document gets stored and can be accessed as the <tt class="rst-docutils literal">validation_report</tt>
property.</p>
<p>Here is a usage example:</p>
<pre class="rst-literal-block">
&gt;&gt;&gt; from lxml import etree
&gt;&gt;&gt; from lxml.isoschematron import Schematron

&gt;&gt;&gt; schematron = Schematron(etree.XML('''
... &lt;schema xmlns="http://purl.oclc.org/dsdl/schematron" &gt;
...   &lt;pattern id="id_only_attribute"&gt;
...     &lt;title&gt;id is the only permitted attribute name&lt;/title&gt;
...     &lt;rule context="*"&gt;
...       &lt;report test="@*[not(name()='id')]"&gt;Attribute
...         &lt;name path="@*[not(name()='id')]"/&gt; is forbidden&lt;name/&gt;
...       &lt;/report&gt;
...     &lt;/rule&gt;
...   &lt;/pattern&gt;
... &lt;/schema&gt;'''),
... error_finder=Schematron.ASSERTS_AND_REPORTS)

&gt;&gt;&gt; xml = etree.XML('''
... &lt;AAA name="aaa"&gt;
...   &lt;BBB id="bbb"/&gt;
...   &lt;CCC color="ccc"/&gt;
... &lt;/AAA&gt;
... ''')

&gt;&gt;&gt; schematron.validate(xml)
False

&gt;&gt;&gt; xml = etree.XML('''
... &lt;AAA id="aaa"&gt;
...   &lt;BBB id="bbb"/&gt;
...   &lt;CCC/&gt;
... &lt;/AAA&gt;
... ''')

&gt;&gt;&gt; schematron.validate(xml)
True
</pre>
</div>
      </div>

      <div id="splitTables">
        <table class="children sortable" id="id8117">
  
  
  <tr class="method">
    
    <td>Method</td>
    <td><code><a href="#__call__" class="internal-link" title="lxml.isoschematron.Schematron.__call__">__call__</a></code></td>
    <td>Validate doc using Schematron.</td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#__init__" class="internal-link" title="lxml.isoschematron.Schematron.__init__">__init__</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="constant">
    
    <td>Constant</td>
    <td><code><a href="#ASSERTS_AND_REPORTS" class="internal-link" title="lxml.isoschematron.Schematron.ASSERTS_AND_REPORTS">ASSERTS​_AND​_REPORTS</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="property">
    
    <td>Property</td>
    <td><code><a href="#schematron" class="internal-link" title="lxml.isoschematron.Schematron.schematron">schematron</a></code></td>
    <td>ISO-schematron schema document (None if object has been initialized with store_schematron=False).</td>
  </tr><tr class="property">
    
    <td>Property</td>
    <td><code><a href="#validation_report" class="internal-link" title="lxml.isoschematron.Schematron.validation_report">validation​_report</a></code></td>
    <td>ISO-schematron validation result report (None if result-storing has been turned off).</td>
  </tr><tr class="property">
    
    <td>Property</td>
    <td><code><a href="#validator_xslt" class="internal-link" title="lxml.isoschematron.Schematron.validator_xslt">validator​_xslt</a></code></td>
    <td>ISO-schematron skeleton implementation XSLT validator document (None if object has been initialized with store_xslt=False).</td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><code><a href="#_extract" class="internal-link" title="lxml.isoschematron.Schematron._extract">​_extract</a></code></td>
    <td><span class="undocumented">No summary</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_schematron" class="internal-link" title="lxml.isoschematron.Schematron._schematron">​_schematron</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_store_report" class="internal-link" title="lxml.isoschematron.Schematron._store_report">​_store​_report</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_validation_errors" class="internal-link" title="lxml.isoschematron.Schematron._validation_errors">​_validation​_errors</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_validation_report" class="internal-link" title="lxml.isoschematron.Schematron._validation_report">​_validation​_report</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_validator" class="internal-link" title="lxml.isoschematron.Schematron._validator">​_validator</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_validator_xslt" class="internal-link" title="lxml.isoschematron.Schematron._validator_xslt">​_validator​_xslt</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr>
</table>
        

          
      </div>

      <div id="childList">

        <div class="basemethod">
  
  
  <a name="lxml.isoschematron.Schematron.__call__">
    
  </a>
  <a name="__call__">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">__call__</span>(self, etree):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Validate doc using Schematron.</p>
<p>Returns true if document is valid, false if not.</p>
</div>
  </div>
</div><div class="basemethod">
  
  
  <a name="lxml.isoschematron.Schematron.__init__">
    
  </a>
  <a name="__init__">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">__init__</span>(self, etree=None, file=None, include=True, expand=True, include_params={}, expand_params={}, compile_params={}, store_schematron=False, store_xslt=False, store_report=False, phase=None, error_finder=<a href="lxml.isoschematron.html#svrl_validation_errors" class="internal-link" title="lxml.isoschematron.svrl_validation_errors">ASSERTS_ONLY</a>):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="baseconstant">
  
  
  <a name="lxml.isoschematron.Schematron.ASSERTS_AND_REPORTS">
    
  </a>
  <a name="ASSERTS_AND_REPORTS">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">ASSERTS_AND_REPORTS</span> =
    
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code>_etree.XPath(<wbr></wbr><span class="rst-variable-quote">'</span><span class="rst-variable-string">//svrl:failed-assert | //svrl:successful-report</span><span class="rst-variable-quote">'</span>,
             <wbr></wbr>namespaces={<wbr></wbr><span class="rst-variable-quote">'</span><span class="rst-variable-string">svrl</span><span class="rst-variable-quote">'</span>: <a href="lxml.isoschematron.html#SVRL_NS" class="internal-link" title="lxml.isoschematron.SVRL_NS">SVRL_NS</a>})</code></pre></td></tr></table>
  </div>
</div><div class="baseproperty">
  
  
  <a name="lxml.isoschematron.Schematron.schematron">
    
  </a>
  <a name="schematron">
    
  </a>
  <div class="functionHeader">
    @property<br />
    <span class="py-defname">schematron</span> =
    
  </div>
  <div class="functionBody">
    
    
    <div>ISO-schematron schema document (None if object has been initialized
with store_schematron=False).</div>
    
  </div>
</div><div class="baseproperty">
  
  
  <a name="lxml.isoschematron.Schematron.validation_report">
    
  </a>
  <a name="validation_report">
    
  </a>
  <div class="functionHeader">
    @property<br />
    <span class="py-defname">validation_report</span> =
    
  </div>
  <div class="functionBody">
    
    
    <div>ISO-schematron validation result report (None if result-storing has
been turned off).</div>
    
  </div>
</div><div class="baseproperty">
  
  
  <a name="lxml.isoschematron.Schematron.validator_xslt">
    
  </a>
  <a name="validator_xslt">
    
  </a>
  <div class="functionHeader">
    @property<br />
    <span class="py-defname">validator_xslt</span> =
    
  </div>
  <div class="functionBody">
    
    
    <div>ISO-schematron skeleton implementation XSLT validator document (None
if object has been initialized with store_xslt=False).</div>
    
  </div>
</div><div class="basemethod private">
  
  
  <a name="lxml.isoschematron.Schematron._extract">
    
  </a>
  <a name="_extract">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_extract</span>(self, element):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div>Extract embedded schematron schema from non-schematron host schema.
This method will only be called by __init__ if the given schema document
is not a schematron schema by itself.
Must return a schematron schema document tree or None.</div>
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="lxml.isoschematron.Schematron._schematron">
    
  </a>
  <a name="_schematron">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_schematron</span> =
    
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="lxml.isoschematron.Schematron._store_report">
    
  </a>
  <a name="_store_report">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_store_report</span> =
    
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="lxml.isoschematron.Schematron._validation_errors">
    
  </a>
  <a name="_validation_errors">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_validation_errors</span> =
    
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="lxml.isoschematron.Schematron._validation_report">
    
  </a>
  <a name="_validation_report">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_validation_report</span> =
    
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="lxml.isoschematron.Schematron._validator">
    
  </a>
  <a name="_validator">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_validator</span> =
    
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="lxml.isoschematron.Schematron._validator_xslt">
    
  </a>
  <a name="_validator_xslt">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_validator_xslt</span> =
    
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div>

      </div>
    </div>

    <footer class="navbar navbar-default">
  
  <div class="container">
    <a href="index.html">API Documentation</a> for lxml,
  generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a>
    22.2.0 at 2022-02-23 04:36:43.
  </div>
</footer>

    <script src="pydoctor.js" type="text/javascript"></script>

  </body>
</html>