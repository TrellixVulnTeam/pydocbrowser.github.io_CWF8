<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  

  <head>
    
    <title>twisted.protocols.amp</title>
    <meta name="generator" content="pydoctor 22.2.0"> 
        
    </meta>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=0.75" />
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="apidocs.css" />
    <link rel="stylesheet" type="text/css" href="extra.css" />
</head>

  <body>

    <div id="banner">    
    <div>
        <a href="/">Home</a>
        &gt; twisted-22.1.0 <!-- This is a placeholder -->
        
        <!-- (<a href=""&gt;show all versions</a&gt;) -->
    </div>
</div>

    <nav class="navbar navbar-default">
  
  <div class="container">

    <div class="navbar-header">
      
      <div class="navlinks">
          <span class="navbar-brand">
            twisted <a href="index.html">API Documentation</a>
          </span>

          <a href="moduleIndex.html">
            Modules
          </a>

          <a href="classIndex.html">
            Classes
          </a>

          <a href="nameIndex.html">
            Names
          </a>
      </div>

    </div>
  </div>
</nav>

    

    <div class="container">

      <div class="page-header">
        <h1 class="module"><code><code><a href="index.html" class="internal-link">twisted</a></code><wbr></wbr>.<code><a href="twisted.protocols.html" class="internal-link" title="twisted.protocols">protocols</a></code><wbr></wbr>.<code><a href="twisted.protocols.amp.html" class="internal-link" title="twisted.protocols.amp">amp</a></code></code></h1>
        <div id="showPrivate">
          <button class="btn btn-link" onclick="togglePrivate()">Toggle Private API</button>
        </div>
      </div>

      <div class="categoryHeader">
        module documentation
      </div>

      <div class="extrasDocstring">
        <a href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/twisted-22.1.0//src/twisted/protocols/amp.py" class="sourceLink">(source)</a>
        <p></p>
      </div>

      <div class="moduleDocstring">
        <div><p>This module implements AMP, the Asynchronous Messaging Protocol.</p>
<p>AMP is a protocol for sending multiple asynchronous request/response pairs over
the same connection.  Requests and responses are both collections of key/value
pairs.</p>
<p>AMP is a very simple protocol which is not an application.  This module is a
"protocol construction kit" of sorts; it attempts to be the simplest wire-level
implementation of Deferreds.  AMP provides the following base-level features:</p>
<blockquote>
<ul class="rst-simple">
<li>Asynchronous request/response handling (hence the name)</li>
<li>Requests and responses are both key/value pairs</li>
<li>Binary transfer of all data: all data is length-prefixed.  Your
application will never need to worry about quoting.</li>
<li>Command dispatching (like HTTP Verbs): the protocol is extensible, and
multiple AMP sub-protocols can be grouped together easily.</li>
</ul>
</blockquote>
<p>The protocol implementation also provides a few additional features which are
not part of the core wire protocol, but are nevertheless very useful:</p>
<blockquote>
<ul class="rst-simple">
<li>Tight TLS integration, with an included StartTLS command.</li>
<li>Handshaking to other protocols: because AMP has well-defined message
boundaries and maintains all incoming and outgoing requests for you, you
can start a connection over AMP and then switch to another protocol.
This makes it ideal for firewall-traversal applications where you may
have only one forwarded port but multiple applications that want to use
it.</li>
</ul>
</blockquote>
<p>Using AMP with Twisted is simple.  Each message is a command, with a response.
You begin by defining a command type.  Commands specify their input and output
in terms of the types that they expect to see in the request and response
key-value pairs.  Here's an example of a command that adds two integers, 'a'
and 'b':</p>
<pre class="rst-literal-block">
class Sum(amp.Command):
    arguments = [('a', amp.Integer()),
                 ('b', amp.Integer())]
    response = [('total', amp.Integer())]
</pre>
<p>Once you have specified a command, you need to make it part of a protocol, and
define a responder for it.  Here's a 'JustSum' protocol that includes a
responder for our 'Sum' command:</p>
<pre class="rst-literal-block">
class JustSum(amp.AMP):
    def sum(self, a, b):
        total = a + b
        print 'Did a sum: %d + %d = %d' % (a, b, total)
        return {'total': total}
    Sum.responder(sum)
</pre>
<p>Later, when you want to actually do a sum, the following expression will return
a L{Deferred} which will fire with the result:</p>
<pre class="rst-literal-block">
ClientCreator(reactor, amp.AMP).connectTCP(...).addCallback(
    lambda p: p.callRemote(Sum, a=13, b=81)).addCallback(
        lambda result: result['total'])
</pre>
<p>Command responders may also return Deferreds, causing the response to be
sent only once the Deferred fires:</p>
<pre class="rst-literal-block">
class DelayedSum(amp.AMP):
    def slowSum(self, a, b):
        total = a + b
        result = defer.Deferred()
        reactor.callLater(3, result.callback, {'total': total})
        return result
    Sum.responder(slowSum)
</pre>
<p>This is transparent to the caller.</p>
<p>You can also define the propagation of specific errors in AMP.  For example,
for the slightly more complicated case of division, we might have to deal with
division by zero:</p>
<pre class="rst-literal-block">
class Divide(amp.Command):
    arguments = [('numerator', amp.Integer()),
                 ('denominator', amp.Integer())]
    response = [('result', amp.Float())]
    errors = {ZeroDivisionError: 'ZERO_DIVISION'}
</pre>
<p>The 'errors' mapping here tells AMP that if a responder to Divide emits a
L{ZeroDivisionError}, then the other side should be informed that an error of
the type 'ZERO_DIVISION' has occurred.  Writing a responder which takes
advantage of this is very simple - just raise your exception normally:</p>
<pre class="rst-literal-block">
class JustDivide(amp.AMP):
    def divide(self, numerator, denominator):
        result = numerator / denominator
        print 'Divided: %d / %d = %d' % (numerator, denominator, total)
        return {'result': result}
    Divide.responder(divide)
</pre>
<p>On the client side, the errors mapping will be used to determine what the
'ZERO_DIVISION' error means, and translated into an asynchronous exception,
which can be handled normally as any L{Deferred} would be:</p>
<pre class="rst-literal-block">
def trapZero(result):
    result.trap(ZeroDivisionError)
    print "Divided by zero: returning INF"
    return 1e1000
ClientCreator(reactor, amp.AMP).connectTCP(...).addCallback(
    lambda p: p.callRemote(Divide, numerator=1234,
                           denominator=0)
    ).addErrback(trapZero)
</pre>
<p>For a complete, runnable example of both of these commands, see the files in
the Twisted repository:</p>
<pre class="rst-literal-block">
doc/core/examples/ampserver.py
doc/core/examples/ampclient.py
</pre>
<p>On the wire, AMP is a protocol which uses 2-byte lengths to prefix keys and
values, and empty keys to separate messages:</p>
<pre class="rst-literal-block">
&lt;2-byte length&gt;&lt;key&gt;&lt;2-byte length&gt;&lt;value&gt;
&lt;2-byte length&gt;&lt;key&gt;&lt;2-byte length&gt;&lt;value&gt;
...
&lt;2-byte length&gt;&lt;key&gt;&lt;2-byte length&gt;&lt;value&gt;
&lt;NUL&gt;&lt;NUL&gt;                  # Empty Key == End of Message
</pre>
<p>And so on.  Because it's tedious to refer to lengths and NULs constantly, the
documentation will refer to packets as if they were newline delimited, like
so:</p>
<pre class="rst-literal-block">
C: _command: sum
C: _ask: ef639e5c892ccb54
C: a: 13
C: b: 81

S: _answer: ef639e5c892ccb54
S: total: 94
</pre>
<p>Notes:</p>
<p>In general, the order of keys is arbitrary.  Specific uses of AMP may impose an
ordering requirement, but unless this is specified explicitly, any ordering may
be generated and any ordering must be accepted.  This applies to the
command-related keys I{_command} and I{_ask} as well as any other keys.</p>
<p>Values are limited to the maximum encodable size in a 16-bit length, 65535
bytes.</p>
<p>Keys are limited to the maximum encodable size in a 8-bit length, 255 bytes.
Note that we still use 2-byte lengths to encode keys.  This small redundancy
has several features:</p>
<blockquote>
<ul class="rst-simple">
<li>If an implementation becomes confused and starts emitting corrupt data,
or gets keys confused with values, many common errors will be signalled
immediately instead of delivering obviously corrupt packets.</li>
<li>A single NUL will separate every key, and a double NUL separates
messages.  This provides some redundancy when debugging traffic dumps.</li>
<li>NULs will be present at regular intervals along the protocol, providing
some padding for otherwise braindead C implementations of the protocol,
so that &lt;stdio.h&gt; string functions will see the NUL and stop.</li>
<li>This makes it possible to run an AMP server on a port also used by a
plain-text protocol, and easily distinguish between non-AMP clients (like
web browsers) which issue non-NUL as the first byte, and AMP clients,
which always issue NUL as the first byte.</li>
</ul>
</blockquote>
<p>@var MAX_VALUE_LENGTH: The maximum length of a message.
@type MAX_VALUE_LENGTH: L{int}</p>
<p>@var ASK: Marker for an Ask packet.
@type ASK: L{bytes}</p>
<p>@var ANSWER: Marker for an Answer packet.
@type ANSWER: L{bytes}</p>
<p>@var COMMAND: Marker for a Command packet.
@type COMMAND: L{bytes}</p>
<p>@var ERROR: Marker for an AMP box of error type.
@type ERROR: L{bytes}</p>
<p>@var ERROR_CODE: Marker for an AMP box containing the code of an error.
@type ERROR_CODE: L{bytes}</p>
<dl class="rst-docutils">
<dt>@var ERROR_DESCRIPTION: Marker for an AMP box containing the description of the</dt>
<dd>error.</dd>
</dl>
<p>@type ERROR_DESCRIPTION: L{bytes}</p>
</div>
      </div>

      <div id="splitTables">
        <table class="children sortable" id="id6619">
  
  
  <tr class="interface">
    
    <td>Interface</td>
    <td><code><a href="twisted.protocols.amp.IArgumentType.html" class="internal-link" title="twisted.protocols.amp.IArgumentType">​IArgument​Type</a></code></td>
    <td>An L{IArgumentType} can serialize a Python object into an AMP box and deserialize information from an AMP box back into a Python object.</td>
  </tr><tr class="interface">
    
    <td>Interface</td>
    <td><code><a href="twisted.protocols.amp.IBoxReceiver.html" class="internal-link" title="twisted.protocols.amp.IBoxReceiver">​IBox​Receiver</a></code></td>
    <td>An application object which can receive L{AmpBox} objects and dispatch them appropriately.</td>
  </tr><tr class="interface">
    
    <td>Interface</td>
    <td><code><a href="twisted.protocols.amp.IBoxSender.html" class="internal-link" title="twisted.protocols.amp.IBoxSender">​IBox​Sender</a></code></td>
    <td>A transport which can send L{AmpBox} objects.</td>
  </tr><tr class="interface">
    
    <td>Interface</td>
    <td><code><a href="twisted.protocols.amp.IResponderLocator.html" class="internal-link" title="twisted.protocols.amp.IResponderLocator">​IResponder​Locator</a></code></td>
    <td>An application object which can look up appropriate responder methods for AMP commands.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.AMP.html" class="internal-link" title="twisted.protocols.amp.AMP">AMP</a></code></td>
    <td>This protocol is an AMP connection.  See the module docstring for protocol details.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.AmpBox.html" class="internal-link" title="twisted.protocols.amp.AmpBox">​Amp​Box</a></code></td>
    <td>I am a packet in the AMP protocol, much like a regular bytes:bytes dictionary.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.AmpError.html" class="internal-link" title="twisted.protocols.amp.AmpError">​Amp​Error</a></code></td>
    <td>Base class of all Amp-related exceptions.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.AmpList.html" class="internal-link" title="twisted.protocols.amp.AmpList">​Amp​List</a></code></td>
    <td>Convert a list of dictionaries into a list of AMP boxes on the wire.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.Argument.html" class="internal-link" title="twisted.protocols.amp.Argument">​Argument</a></code></td>
    <td>Base-class of all objects that take values from Amp packets and convert them into objects for Python functions.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.BadLocalReturn.html" class="internal-link" title="twisted.protocols.amp.BadLocalReturn">​Bad​Local​Return</a></code></td>
    <td>A bad value was returned from a local command; we were unable to coerce it.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.BinaryBoxProtocol.html" class="internal-link" title="twisted.protocols.amp.BinaryBoxProtocol">​Binary​Box​Protocol</a></code></td>
    <td>A protocol for receiving L{AmpBox}es - key/value pairs - via length-prefixed strings.  A box is composed of:</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.Boolean.html" class="internal-link" title="twisted.protocols.amp.Boolean">​Boolean</a></code></td>
    <td>Encode True or False as "True" or "False" on the wire.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.BoxDispatcher.html" class="internal-link" title="twisted.protocols.amp.BoxDispatcher">​Box​Dispatcher</a></code></td>
    <td>A L{BoxDispatcher} dispatches '_ask', '_answer', and '_error' L{AmpBox}es, both incoming and outgoing, to their appropriate destinations.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.Command.html" class="internal-link" title="twisted.protocols.amp.Command">​Command</a></code></td>
    <td>Subclass me to specify an AMP Command.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.CommandLocator.html" class="internal-link" title="twisted.protocols.amp.CommandLocator">​Command​Locator</a></code></td>
    <td>A L{CommandLocator} is a collection of responders to AMP L{Command}s, with the help of the L{Command.responder} decorator.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.DateTime.html" class="internal-link" title="twisted.protocols.amp.DateTime">​Date​Time</a></code></td>
    <td>Encodes C{datetime.datetime} instances.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.Decimal.html" class="internal-link" title="twisted.protocols.amp.Decimal">​Decimal</a></code></td>
    <td>Encodes C{decimal.Decimal} instances.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.Descriptor.html" class="internal-link" title="twisted.protocols.amp.Descriptor">​Descriptor</a></code></td>
    <td>Encode and decode file descriptors for exchange over a UNIX domain socket.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.Float.html" class="internal-link" title="twisted.protocols.amp.Float">​Float</a></code></td>
    <td>Encode floating-point values on the wire as their repr.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.IncompatibleVersions.html" class="internal-link" title="twisted.protocols.amp.IncompatibleVersions">​Incompatible​Versions</a></code></td>
    <td>It was impossible to negotiate a compatible version of the protocol with the other end of the connection.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.Integer.html" class="internal-link" title="twisted.protocols.amp.Integer">​Integer</a></code></td>
    <td>Encode any integer values of any size on the wire as the string representation.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.InvalidSignature.html" class="internal-link" title="twisted.protocols.amp.InvalidSignature">​Invalid​Signature</a></code></td>
    <td>You didn't pass all the required arguments.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.ListOf.html" class="internal-link" title="twisted.protocols.amp.ListOf">​List​Of</a></code></td>
    <td>Encode and decode lists of instances of a single other argument type.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.MalformedAmpBox.html" class="internal-link" title="twisted.protocols.amp.MalformedAmpBox">​Malformed​Amp​Box</a></code></td>
    <td>This error indicates that the wire-level protocol was malformed.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.NoEmptyBoxes.html" class="internal-link" title="twisted.protocols.amp.NoEmptyBoxes">​No​Empty​Boxes</a></code></td>
    <td>You can't have empty boxes on the connection.  This is raised when you receive or attempt to send one.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.OnlyOneTLS.html" class="internal-link" title="twisted.protocols.amp.OnlyOneTLS">​Only​One​TLS</a></code></td>
    <td>This is an implementation limitation; TLS may only be started once per connection.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.Path.html" class="internal-link" title="twisted.protocols.amp.Path">​Path</a></code></td>
    <td>Encode and decode L{filepath.FilePath} instances as paths on the wire.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.ProtocolSwitchCommand.html" class="internal-link" title="twisted.protocols.amp.ProtocolSwitchCommand">​Protocol​Switch​Command</a></code></td>
    <td><span class="undocumented">No summary</span></td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.ProtocolSwitched.html" class="internal-link" title="twisted.protocols.amp.ProtocolSwitched">​Protocol​Switched</a></code></td>
    <td>Connections which have been switched to other protocols can no longer accept traffic at the AMP level.  This is raised when you try to send it.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.QuitBox.html" class="internal-link" title="twisted.protocols.amp.QuitBox">​Quit​Box</a></code></td>
    <td>I am an AmpBox that, upon being sent, terminates the connection.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.RemoteAmpError.html" class="internal-link" title="twisted.protocols.amp.RemoteAmpError">​Remote​Amp​Error</a></code></td>
    <td>This error indicates that something went wrong on the remote end of the connection, and the error was serialized and transmitted to you.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.SimpleStringLocator.html" class="internal-link" title="twisted.protocols.amp.SimpleStringLocator">​Simple​String​Locator</a></code></td>
    <td>Implement the L{AMP.locateResponder} method to do simple, string-based dispatch.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.StartTLS.html" class="internal-link" title="twisted.protocols.amp.StartTLS">​Start​TLS</a></code></td>
    <td>Use, or subclass, me to implement a command that starts TLS.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.String.html" class="internal-link" title="twisted.protocols.amp.String">​String</a></code></td>
    <td>Don't do any conversion at all; just pass through 'str'.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.TooLong.html" class="internal-link" title="twisted.protocols.amp.TooLong">​Too​Long</a></code></td>
    <td>One of the protocol's length limitations was violated.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.UnhandledCommand.html" class="internal-link" title="twisted.protocols.amp.UnhandledCommand">​Unhandled​Command</a></code></td>
    <td>A command received via amp could not be dispatched.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.Unicode.html" class="internal-link" title="twisted.protocols.amp.Unicode">​Unicode</a></code></td>
    <td>Encode a unicode string on the wire as UTF-8.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp.UnknownRemoteError.html" class="internal-link" title="twisted.protocols.amp.UnknownRemoteError">​Unknown​Remote​Error</a></code></td>
    <td>This means that an error whose type we can't identify was raised from the other side.</td>
  </tr><tr class="constant">
    
    <td>Constant</td>
    <td><code><a href="#ANSWER" class="internal-link" title="twisted.protocols.amp.ANSWER">ANSWER</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="constant">
    
    <td>Constant</td>
    <td><code><a href="#ASK" class="internal-link" title="twisted.protocols.amp.ASK">ASK</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="constant">
    
    <td>Constant</td>
    <td><code><a href="#COMMAND" class="internal-link" title="twisted.protocols.amp.COMMAND">COMMAND</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="constant">
    
    <td>Constant</td>
    <td><code><a href="#ERROR" class="internal-link" title="twisted.protocols.amp.ERROR">ERROR</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="constant">
    
    <td>Constant</td>
    <td><code><a href="#ERROR_CODE" class="internal-link" title="twisted.protocols.amp.ERROR_CODE">ERROR​_CODE</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="constant">
    
    <td>Constant</td>
    <td><code><a href="#ERROR_DESCRIPTION" class="internal-link" title="twisted.protocols.amp.ERROR_DESCRIPTION">ERROR​_DESCRIPTION</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="constant">
    
    <td>Constant</td>
    <td><code><a href="#MAX_KEY_LENGTH" class="internal-link" title="twisted.protocols.amp.MAX_KEY_LENGTH">MAX​_KEY​_LENGTH</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="constant">
    
    <td>Constant</td>
    <td><code><a href="#MAX_VALUE_LENGTH" class="internal-link" title="twisted.protocols.amp.MAX_VALUE_LENGTH">MAX​_VALUE​_LENGTH</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="constant">
    
    <td>Constant</td>
    <td><code><a href="#PROTOCOL_ERRORS" class="internal-link" title="twisted.protocols.amp.PROTOCOL_ERRORS">PROTOCOL​_ERRORS</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="constant">
    
    <td>Constant</td>
    <td><code><a href="#PYTHON_KEYWORDS" class="internal-link" title="twisted.protocols.amp.PYTHON_KEYWORDS">PYTHON​_KEYWORDS</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="constant">
    
    <td>Constant</td>
    <td><code><a href="#UNHANDLED_ERROR_CODE" class="internal-link" title="twisted.protocols.amp.UNHANDLED_ERROR_CODE">UNHANDLED​_ERROR​_CODE</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="constant">
    
    <td>Constant</td>
    <td><code><a href="#UNKNOWN_ERROR_CODE" class="internal-link" title="twisted.protocols.amp.UNKNOWN_ERROR_CODE">UNKNOWN​_ERROR​_CODE</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="variable">
    
    <td>Variable</td>
    <td><code><a href="#ssl" class="internal-link" title="twisted.protocols.amp.ssl">ssl</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="class private">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp._CommandLocatorMeta.html" class="internal-link" title="twisted.protocols.amp._CommandLocatorMeta">_​Command​Locator​Meta</a></code></td>
    <td><span class="undocumented">No summary</span></td>
  </tr><tr class="class private">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp._CommandMeta.html" class="internal-link" title="twisted.protocols.amp._CommandMeta">_​Command​Meta</a></code></td>
    <td>Metaclass hack to establish reverse-mappings for 'errors' and 'fatalErrors' as class vars.</td>
  </tr><tr class="class private">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp._DescriptorExchanger.html" class="internal-link" title="twisted.protocols.amp._DescriptorExchanger">_​Descriptor​Exchanger</a></code></td>
    <td>L{_DescriptorExchanger} is a mixin for L{BinaryBoxProtocol} which adds support for receiving file descriptors, a feature offered by L{IUNIXTransport&lt;twisted.internet.interfaces.IUNIXTransport&gt;}.</td>
  </tr><tr class="class private">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp._LocalArgument.html" class="internal-link" title="twisted.protocols.amp._LocalArgument">_​Local​Argument</a></code></td>
    <td>Local arguments are never actually relayed across the wire.  This is just a shim so that StartTLS can pretend to have some arguments: if arguments acquire documentation properties, replace this with something nicer later.</td>
  </tr><tr class="class private">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp._NoCertificate.html" class="internal-link" title="twisted.protocols.amp._NoCertificate">_​No​Certificate</a></code></td>
    <td><span class="undocumented">No summary</span></td>
  </tr><tr class="class private">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp._ParserHelper.html" class="internal-link" title="twisted.protocols.amp._ParserHelper">_​Parser​Helper</a></code></td>
    <td>A box receiver which records all boxes received.</td>
  </tr><tr class="class private">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp._SwitchBox.html" class="internal-link" title="twisted.protocols.amp._SwitchBox">_​Switch​Box</a></code></td>
    <td>Implementation detail of ProtocolSwitchCommand: I am an AmpBox which sets up state for the protocol to switch.</td>
  </tr><tr class="class private">
    
    <td>Class</td>
    <td><code><a href="twisted.protocols.amp._TLSBox.html" class="internal-link" title="twisted.protocols.amp._TLSBox">_​TLSBox</a></code></td>
    <td>I am an AmpBox that, upon being sent, initiates a TLS connection.</td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_objectsToStrings" class="internal-link" title="twisted.protocols.amp._objectsToStrings">_objects​To​Strings</a></code></td>
    <td>Convert a dictionary of python objects to an AmpBox, converting through a given arglist.</td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_stringsToObjects" class="internal-link" title="twisted.protocols.amp._stringsToObjects">_strings​To​Objects</a></code></td>
    <td>Convert an AmpBox to a dictionary of python objects, converting through a given arglist.</td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_wireNameToPythonIdentifier" class="internal-link" title="twisted.protocols.amp._wireNameToPythonIdentifier">_wire​Name​To​Python​Identifier</a></code></td>
    <td><span class="undocumented">No summary</span></td>
  </tr>
</table>
        

          
      </div>

      <div id="childList">

        <div class="baseconstant">
  
  
  <a name="twisted.protocols.amp.ANSWER">
    
  </a>
  <a name="ANSWER">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">ANSWER</span>: <code><a href="https://docs.python.org/3/library/stdtypes.html#bytes" class="intersphinx-link">bytes</a></code> =
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/twisted-22.1.0//src/twisted/protocols/amp.py#L295">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code>b<span class="rst-variable-quote">'</span><span class="rst-variable-string">_answer</span><span class="rst-variable-quote">'</span></code></pre></td></tr></table>
  </div>
</div><div class="baseconstant">
  
  
  <a name="twisted.protocols.amp.ASK">
    
  </a>
  <a name="ASK">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">ASK</span>: <code><a href="https://docs.python.org/3/library/stdtypes.html#bytes" class="intersphinx-link">bytes</a></code> =
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/twisted-22.1.0//src/twisted/protocols/amp.py#L294">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code>b<span class="rst-variable-quote">'</span><span class="rst-variable-string">_ask</span><span class="rst-variable-quote">'</span></code></pre></td></tr></table>
  </div>
</div><div class="baseconstant">
  
  
  <a name="twisted.protocols.amp.COMMAND">
    
  </a>
  <a name="COMMAND">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">COMMAND</span>: <code><a href="https://docs.python.org/3/library/stdtypes.html#bytes" class="intersphinx-link">bytes</a></code> =
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/twisted-22.1.0//src/twisted/protocols/amp.py#L296">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code>b<span class="rst-variable-quote">'</span><span class="rst-variable-string">_command</span><span class="rst-variable-quote">'</span></code></pre></td></tr></table>
  </div>
</div><div class="baseconstant">
  
  
  <a name="twisted.protocols.amp.ERROR">
    
  </a>
  <a name="ERROR">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">ERROR</span>: <code><a href="https://docs.python.org/3/library/stdtypes.html#bytes" class="intersphinx-link">bytes</a></code> =
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/twisted-22.1.0//src/twisted/protocols/amp.py#L297">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code>b<span class="rst-variable-quote">'</span><span class="rst-variable-string">_error</span><span class="rst-variable-quote">'</span></code></pre></td></tr></table>
  </div>
</div><div class="baseconstant">
  
  
  <a name="twisted.protocols.amp.ERROR_CODE">
    
  </a>
  <a name="ERROR_CODE">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">ERROR_CODE</span>: <code><a href="https://docs.python.org/3/library/stdtypes.html#bytes" class="intersphinx-link">bytes</a></code> =
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/twisted-22.1.0//src/twisted/protocols/amp.py#L298">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code>b<span class="rst-variable-quote">'</span><span class="rst-variable-string">_error_code</span><span class="rst-variable-quote">'</span></code></pre></td></tr></table>
  </div>
</div><div class="baseconstant">
  
  
  <a name="twisted.protocols.amp.ERROR_DESCRIPTION">
    
  </a>
  <a name="ERROR_DESCRIPTION">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">ERROR_DESCRIPTION</span>: <code><a href="https://docs.python.org/3/library/stdtypes.html#bytes" class="intersphinx-link">bytes</a></code> =
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/twisted-22.1.0//src/twisted/protocols/amp.py#L299">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code>b<span class="rst-variable-quote">'</span><span class="rst-variable-string">_error_description</span><span class="rst-variable-quote">'</span></code></pre></td></tr></table>
  </div>
</div><div class="baseconstant">
  
  
  <a name="twisted.protocols.amp.MAX_KEY_LENGTH">
    
  </a>
  <a name="MAX_KEY_LENGTH">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">MAX_KEY_LENGTH</span>: <code><a href="https://docs.python.org/3/library/functions.html#int" class="intersphinx-link">int</a></code> =
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/twisted-22.1.0//src/twisted/protocols/amp.py#L303">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code>255</code></pre></td></tr></table>
  </div>
</div><div class="baseconstant">
  
  
  <a name="twisted.protocols.amp.MAX_VALUE_LENGTH">
    
  </a>
  <a name="MAX_VALUE_LENGTH">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">MAX_VALUE_LENGTH</span>: <code><a href="https://docs.python.org/3/library/functions.html#int" class="intersphinx-link">int</a></code> =
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/twisted-22.1.0//src/twisted/protocols/amp.py#L304">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code>65535</code></pre></td></tr></table>
  </div>
</div><div class="baseconstant">
  
  
  <a name="twisted.protocols.amp.PROTOCOL_ERRORS">
    
  </a>
  <a name="PROTOCOL_ERRORS">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">PROTOCOL_ERRORS</span> =
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/twisted-22.1.0//src/twisted/protocols/amp.py#L607">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code>{<wbr></wbr><a href="#UNHANDLED_ERROR_CODE" class="internal-link" title="twisted.protocols.amp.UNHANDLED_ERROR_CODE">UNHANDLED_ERROR_CODE</a>: <a href="twisted.protocols.amp.UnhandledCommand.html" class="internal-link" title="twisted.protocols.amp.UnhandledCommand">UnhandledCommand</a>}</code></pre></td></tr></table>
  </div>
</div><div class="baseconstant">
  
  
  <a name="twisted.protocols.amp.PYTHON_KEYWORDS">
    
  </a>
  <a name="PYTHON_KEYWORDS">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">PYTHON_KEYWORDS</span>: <code><a href="https://docs.python.org/3/library/stdtypes.html#list" class="intersphinx-link">list</a>[<wbr></wbr><a href="https://docs.python.org/3/library/stdtypes.html#str" class="intersphinx-link">str</a>]</code> =
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/twisted-22.1.0//src/twisted/protocols/amp.py#L1224">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code>[<wbr></wbr><span class="rst-variable-quote">'</span><span class="rst-variable-string">and</span><span class="rst-variable-quote">'</span>,
 <wbr></wbr><span class="rst-variable-quote">'</span><span class="rst-variable-string">del</span><span class="rst-variable-quote">'</span>,
 <wbr></wbr><span class="rst-variable-quote">'</span><span class="rst-variable-string">for</span><span class="rst-variable-quote">'</span>,
 <wbr></wbr><span class="rst-variable-quote">'</span><span class="rst-variable-string">is</span><span class="rst-variable-quote">'</span>,
 <wbr></wbr><span class="rst-variable-quote">'</span><span class="rst-variable-string">raise</span><span class="rst-variable-quote">'</span>,
 <wbr></wbr><span class="rst-variable-quote">'</span><span class="rst-variable-string">assert</span><span class="rst-variable-quote">'</span>,
 <wbr></wbr><span class="rst-variable-quote">'</span><span class="rst-variable-string">elif</span><span class="rst-variable-quote">'</span>,
<span class="rst-variable-ellipsis">...</span></code></pre></td></tr></table>
  </div>
</div><div class="baseconstant">
  
  
  <a name="twisted.protocols.amp.UNHANDLED_ERROR_CODE">
    
  </a>
  <a name="UNHANDLED_ERROR_CODE">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">UNHANDLED_ERROR_CODE</span>: <code><a href="https://docs.python.org/3/library/stdtypes.html#bytes" class="intersphinx-link">bytes</a></code> =
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/twisted-22.1.0//src/twisted/protocols/amp.py#L301">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code>b<span class="rst-variable-quote">'</span><span class="rst-variable-string">UNHANDLED</span><span class="rst-variable-quote">'</span></code></pre></td></tr></table>
  </div>
</div><div class="baseconstant">
  
  
  <a name="twisted.protocols.amp.UNKNOWN_ERROR_CODE">
    
  </a>
  <a name="UNKNOWN_ERROR_CODE">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">UNKNOWN_ERROR_CODE</span>: <code><a href="https://docs.python.org/3/library/stdtypes.html#bytes" class="intersphinx-link">bytes</a></code> =
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/twisted-22.1.0//src/twisted/protocols/amp.py#L300">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code>b<span class="rst-variable-quote">'</span><span class="rst-variable-string">UNKNOWN</span><span class="rst-variable-quote">'</span></code></pre></td></tr></table>
  </div>
</div><div class="basevariable">
  
  
  <a name="twisted.protocols.amp.ssl">
    
  </a>
  <a name="ssl">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">ssl</span> =
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/twisted-22.1.0//src/twisted/protocols/amp.py#L232">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div><div class="basefunction private">
  
  
  <a name="twisted.protocols.amp._objectsToStrings">
    
  </a>
  <a name="_objectsToStrings">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_objectsToStrings</span>(objects, arglist, strings, proto):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/twisted-22.1.0//src/twisted/protocols/amp.py#L2678">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Convert a dictionary of python objects to an AmpBox, converting through a
given arglist.</p>
<p>@param objects: a dict mapping names to python objects</p>
<p>@param arglist: a list of 2-tuples of strings and Argument objects, as
described in L{Command.arguments}.</p>
<p>@param strings: [OUT PARAMETER] An object providing the L{dict}
interface which will be populated with serialized data.</p>
<p>@param proto: an L{AMP} instance.</p>
<p>@return: The converted dictionary mapping names to encoded argument
strings (identical to C{strings}).</p>
</div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="twisted.protocols.amp._stringsToObjects">
    
  </a>
  <a name="_stringsToObjects">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_stringsToObjects</span>(strings, arglist, proto):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/twisted-22.1.0//src/twisted/protocols/amp.py#L2657">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Convert an AmpBox to a dictionary of python objects, converting through a
given arglist.</p>
<p>@param strings: an AmpBox (or dict of strings)</p>
<p>@param arglist: a list of 2-tuples of strings and Argument objects, as
described in L{Command.arguments}.</p>
<p>@param proto: an L{AMP} instance.</p>
<p>@return: the converted dictionary mapping names to argument objects.</p>
</div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="twisted.protocols.amp._wireNameToPythonIdentifier">
    
  </a>
  <a name="_wireNameToPythonIdentifier">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_wireNameToPythonIdentifier</span>(key):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/twisted-22.1.0//src/twisted/protocols/amp.py#L1257">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>(Private) Normalize an argument name from the wire for use with Python
code.  If the return value is going to be a python keyword it will be
capitalized.  If it contains any dashes they will be replaced with
underscores.</p>
<p>The rationale behind this method is that AMP should be an inherently
multi-language protocol, so message keys may contain all manner of bizarre
bytes.  This is not a complete solution; there are still forms of arguments
that this implementation will be unable to parse.  However, Python
identifiers share a huge raft of properties with identifiers from many
other languages, so this is a 'good enough' effort for now.  We deal
explicitly with dashes because that is the most likely departure: Lisps
commonly use dashes to separate method names, so protocols initially
implemented in a lisp amp dialect may use dashes in argument or command
names.</p>
<p>@param key: a C{bytes}, looking something like 'foo-bar-baz' or 'from'
@type key: C{bytes}</p>
<p>@return: a native string which is a valid python identifier, looking
something like 'foo_bar_baz' or 'From'.</p>
</div>
  </div>
</div>

      </div>
    </div>

    <footer class="navbar navbar-default">
  
  <div class="container">
    <a href="index.html">API Documentation</a> for twisted,
  generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a>
    22.2.0 at 2022-02-23 16:05:07.
  </div>
</footer>

    <script src="pydoctor.js" type="text/javascript"></script>

  </body>
</html>