<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  

  <head>
    
    <title>dropbox.oauth.DropboxOAuth2Flow</title>
    <meta name="generator" content="pydoctor 22.2.0"> 
        
    </meta>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=0.75" />
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="apidocs.css" />
    <link rel="stylesheet" type="text/css" href="extra.css" />
</head>

  <body>

    

    <nav class="navbar navbar-default">
  
  <div class="container">

    <div class="navbar-header">
      
      <div class="navlinks">
          <span class="navbar-brand">
            dropbox <a href="index.html">API Documentation</a>
          </span>

          <a href="moduleIndex.html">
            Modules
          </a>

          <a href="classIndex.html">
            Classes
          </a>

          <a href="nameIndex.html">
            Names
          </a>
      </div>

    </div>
  </div>
</nav>

    

    <div class="container">

      <div class="page-header">
        <h1 class="class"><code><code><a href="index.html" class="internal-link">dropbox</a></code><wbr></wbr>.<code><a href="dropbox.oauth.html" class="internal-link" title="dropbox.oauth">oauth</a></code><wbr></wbr>.<code><a href="dropbox.oauth.DropboxOAuth2Flow.html" class="internal-link" title="dropbox.oauth.DropboxOAuth2Flow">DropboxOAuth2Flow</a></code></code></h1>
        <div id="showPrivate">
          <button class="btn btn-link" onclick="togglePrivate()">Toggle Private API</button>
        </div>
      </div>

      <div class="categoryHeader">
        class documentation
      </div>

      <div class="extrasDocstring">
        <p><code><span class="py-keyword">class</span> <span class="py-defname">DropboxOAuth2Flow</span>(<a href="dropbox.oauth.DropboxOAuth2FlowBase.html" class="internal-link" title="dropbox.oauth.DropboxOAuth2FlowBase">DropboxOAuth2FlowBase</a>):</code></p>
        <p><a href="classIndex.html#dropbox.oauth.DropboxOAuth2Flow">View In Hierarchy</a></p>
      </div>

      <div class="moduleDocstring">
        <div><p>OAuth 2 authorization helper. Use this for web apps.</p>
<p>OAuth 2 has a two-step authorization process. The first step is having the user authorize your
app. The second involves getting an OAuth 2 access token from Dropbox.</p>
<p>See examples under <a class="rst-reference external" href="https://github.com/dropbox/dropbox-sdk-python/tree/main/example/oauth" target="_top">example/oauth</a></p>
</div>
      </div>

      <div id="splitTables">
        <table class="children sortable" id="id1004">
  
  
  <tr class="method">
    
    <td>Method</td>
    <td><code><a href="#__init__" class="internal-link" title="dropbox.oauth.DropboxOAuth2Flow.__init__">__init__</a></code></td>
    <td>Construct an instance.</td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#finish" class="internal-link" title="dropbox.oauth.DropboxOAuth2Flow.finish">finish</a></code></td>
    <td>Call this after the user has visited the authorize URL (see <code><a href="#start" class="internal-link" title="dropbox.oauth.DropboxOAuth2Flow.start">start()</a></code>), approved your app and was redirected to your redirect URI.</td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#start" class="internal-link" title="dropbox.oauth.DropboxOAuth2Flow.start">start</a></code></td>
    <td>Starts the OAuth 2 authorization process.</td>
  </tr><tr class="instancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="#csrf_token_session_key" class="internal-link" title="dropbox.oauth.DropboxOAuth2Flow.csrf_token_session_key">csrf​_token​_session​_key</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="#redirect_uri" class="internal-link" title="dropbox.oauth.DropboxOAuth2Flow.redirect_uri">redirect​_uri</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="#session" class="internal-link" title="dropbox.oauth.DropboxOAuth2Flow.session">session</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr>
</table>
        
          <p class="inheritedFrom">
            Inherited from <code><a href="dropbox.oauth.DropboxOAuth2FlowBase.html" class="internal-link" title="dropbox.oauth.DropboxOAuth2FlowBase">DropboxOAuth2FlowBase</a></code>:
          </p>
          <table class="children sortable" id="id1005">
  
  
  <tr class="basemethod">
    
    <td>Method</td>
    <td><code><a href="dropbox.oauth.DropboxOAuth2FlowBase.html#build_path" class="internal-link" title="dropbox.oauth.DropboxOAuth2FlowBase.build_path">build​_path</a></code></td>
    <td>Build the path component for an API URL.</td>
  </tr><tr class="basemethod">
    
    <td>Method</td>
    <td><code><a href="dropbox.oauth.DropboxOAuth2FlowBase.html#build_url" class="internal-link" title="dropbox.oauth.DropboxOAuth2FlowBase.build_url">build​_url</a></code></td>
    <td>Build an API URL.</td>
  </tr><tr class="baseinstancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="dropbox.oauth.DropboxOAuth2FlowBase.html#code_challenge" class="internal-link" title="dropbox.oauth.DropboxOAuth2FlowBase.code_challenge">code​_challenge</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="baseinstancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="dropbox.oauth.DropboxOAuth2FlowBase.html#code_verifier" class="internal-link" title="dropbox.oauth.DropboxOAuth2FlowBase.code_verifier">code​_verifier</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="baseinstancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="dropbox.oauth.DropboxOAuth2FlowBase.html#consumer_key" class="internal-link" title="dropbox.oauth.DropboxOAuth2FlowBase.consumer_key">consumer​_key</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="baseinstancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="dropbox.oauth.DropboxOAuth2FlowBase.html#consumer_secret" class="internal-link" title="dropbox.oauth.DropboxOAuth2FlowBase.consumer_secret">consumer​_secret</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="baseinstancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="dropbox.oauth.DropboxOAuth2FlowBase.html#include_granted_scopes" class="internal-link" title="dropbox.oauth.DropboxOAuth2FlowBase.include_granted_scopes">include​_granted​_scopes</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="baseinstancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="dropbox.oauth.DropboxOAuth2FlowBase.html#locale" class="internal-link" title="dropbox.oauth.DropboxOAuth2FlowBase.locale">locale</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="baseinstancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="dropbox.oauth.DropboxOAuth2FlowBase.html#requests_session" class="internal-link" title="dropbox.oauth.DropboxOAuth2FlowBase.requests_session">requests​_session</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="baseinstancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="dropbox.oauth.DropboxOAuth2FlowBase.html#scope" class="internal-link" title="dropbox.oauth.DropboxOAuth2FlowBase.scope">scope</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="baseinstancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="dropbox.oauth.DropboxOAuth2FlowBase.html#token_access_type" class="internal-link" title="dropbox.oauth.DropboxOAuth2FlowBase.token_access_type">token​_access​_type</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="basemethod private">
    
    <td>Method</td>
    <td><code><a href="dropbox.oauth.DropboxOAuth2FlowBase.html#_finish" class="internal-link" title="dropbox.oauth.DropboxOAuth2FlowBase._finish">​_finish</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="basemethod private">
    
    <td>Method</td>
    <td><code><a href="dropbox.oauth.DropboxOAuth2FlowBase.html#_get_authorize_url" class="internal-link" title="dropbox.oauth.DropboxOAuth2FlowBase._get_authorize_url">​_get​_authorize​_url</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="baseinstancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="dropbox.oauth.DropboxOAuth2FlowBase.html#_timeout" class="internal-link" title="dropbox.oauth.DropboxOAuth2FlowBase._timeout">​_timeout</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr>
</table>
          

          
      </div>

      <div id="childList">

        <div class="basemethod">
  
  
  <a name="dropbox.oauth.DropboxOAuth2Flow.__init__">
    
  </a>
  <a name="__init__">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">__init__</span>(self, consumer_key, redirect_uri, session, csrf_token_session_key, consumer_secret=None, locale=None, token_access_type=None, scope=None, include_granted_scopes=None, use_pkce=False, timeout=<a href="dropbox.session.html#DEFAULT_TIMEOUT" class="internal-link" title="dropbox.session.DEFAULT_TIMEOUT">DEFAULT_TIMEOUT</a>):
    
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">overrides <code><a href="dropbox.oauth.DropboxOAuth2FlowBase.html#__init__" class="internal-link">dropbox.oauth.DropboxOAuth2FlowBase.__init__</a></code></div>
    
    <div>Construct an instance.<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">consumer​_key</span></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">redirect​_uri</span></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">session</span></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">csrf​_token​_session​_key</span></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">consumer​_secret</span></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">locale</span></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">token​_access​_type</span></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">scope</span></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">include​_granted​_scopes</span></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">use​_pkce</span></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">timeout</span></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">str consumer​_key</span></td><td class="fieldArgDesc">Your API app's "app key".</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">str redirect​_uri</span></td><td class="fieldArgDesc">The URI that the Dropbox server will redirect the user to after the
user finishes authorizing your app.  This URI must be HTTPS-based and pre-registered
with the Dropbox servers, though localhost URIs are allowed without pre-registration and
can be either HTTP or HTTPS.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">dict session</span></td><td class="fieldArgDesc">A dict-like object that represents the current user's web session
(Will be used to save the CSRF token).</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">str csrf​_token​_session​_key</span></td><td class="fieldArgDesc">The key to use when storing the CSRF token in the session
(For example: "dropbox-auth-csrf-token").</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">str consumer​_secret</span></td><td class="fieldArgDesc">Your API app's "app secret".</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">str locale</span></td><td class="fieldArgDesc">The locale of the user of your application. For example "en" or "en_US".
Some API calls return localized data and error messages; this setting tells the server
which locale to use. By default, the server uses "en_US".</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">str token​_access​_type</span></td><td class="fieldArgDesc"><p>The type of token to be requested.
From the following enum:</p>
<ul class="rst-simple">
<li>None - creates a token with the app default (either legacy or online)</li>
<li>legacy - creates one long-lived token with no expiration</li>
<li>online - create one short-lived token with an expiration</li>
<li>offline - create one short-lived token with an expiration with a refresh token</li>
</ul>
</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">list scope</span></td><td class="fieldArgDesc">List of scopes to request in base oauth flow.  If left blank,
will default to all scopes for app.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">str include​_granted​_scopes</span></td><td class="fieldArgDesc"><p>Which scopes to include from previous grants.
From the following enum:</p>
<ul class="rst-simple">
<li>user - include user scopes in the grant</li>
<li>team - include team scopes in the grant</li>
<li><em>Note</em>: If this user has never linked the app, <code><a href="dropbox.oauth.DropboxOAuth2FlowBase.html#include_granted_scopes" class="internal-link" title="dropbox.oauth.DropboxOAuth2FlowBase.include_granted_scopes">include_granted_scopes</a></code> must             be <code>None</code></li>
</ul>
</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">bool use​_pkce</span></td><td class="fieldArgDesc">Whether or not to use Sha256 based PKCE</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">​Optional[float] timeout</span></td><td class="fieldArgDesc">Maximum duration in seconds that client will wait for any
single packet from the server. After the timeout the client will give up on connection.
If <code>None</code>, client will wait forever. Defaults to 100 seconds.</td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="dropbox.oauth.DropboxOAuth2Flow.finish">
    
  </a>
  <a name="finish">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">finish</span>(self, query_params):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div>Call this after the user has visited the authorize URL (see <code><a href="#start" class="internal-link" title="dropbox.oauth.DropboxOAuth2Flow.start">start()</a></code>), approved your
app and was redirected to your redirect URI.<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">query​_params</span></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">dict query​_params</span></td><td class="fieldArgDesc">The query parameters on the GET request to your redirect URI.</td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer">class:<code><a href="dropbox.oauth.OAuth2FlowResult.html" class="internal-link" title="dropbox.oauth.OAuth2FlowResult">OAuth2FlowResult</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Raises</td></tr><tr><td class="fieldArgContainer"><code><span class="undocumented">Unknown exception</span></code></td><td><code><a href="dropbox.oauth.BadRequestException.html" class="internal-link" title="dropbox.oauth.BadRequestException">BadRequestException</a></code> If the redirect URL was missing parameters or if the
given parameters were not valid.</td></tr><tr><td class="fieldArgContainer"><code><span class="undocumented">Unknown exception</span></code></td><td><code><a href="dropbox.oauth.BadStateException.html" class="internal-link" title="dropbox.oauth.BadStateException">BadStateException</a></code> If there's no CSRF token in the session.</td></tr><tr><td class="fieldArgContainer"><code><span class="undocumented">Unknown exception</span></code></td><td><code><a href="dropbox.oauth.CsrfException.html" class="internal-link" title="dropbox.oauth.CsrfException">CsrfException</a></code> If the <code>state</code> query parameter doesn't contain the
CSRF token from the user's session.</td></tr><tr><td class="fieldArgContainer"><code><span class="undocumented">Unknown exception</span></code></td><td><code><a href="dropbox.oauth.NotApprovedException.html" class="internal-link" title="dropbox.oauth.NotApprovedException">NotApprovedException</a></code> If the user chose not to approve your app.</td></tr><tr><td class="fieldArgContainer"><code><span class="undocumented">Unknown exception</span></code></td><td><code><a href="dropbox.oauth.ProviderException.html" class="internal-link" title="dropbox.oauth.ProviderException">ProviderException</a></code> If Dropbox redirected to your redirect URI with some
unexpected error identifier and error message.</td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="dropbox.oauth.DropboxOAuth2Flow.start">
    
  </a>
  <a name="start">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">start</span>(self, url_state=None):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Starts the OAuth 2 authorization process.</p>
<dl class="rst-docutils">
<dt>This function builds an "authorization URL". You should redirect your user's browser to this</dt>
<dd>URL, which will give them an opportunity to grant your app access to their Dropbox
account. When the user completes this process, they will be automatically redirected to
the <code><a href="#redirect_uri" class="internal-link" title="dropbox.oauth.DropboxOAuth2Flow.redirect_uri">redirect_uri</a></code> you passed in to the constructor. This function will also save
a CSRF token to <code>session[csrf_token_session_key]</code>
(as provided to the constructor). This CSRF token will be checked on <code><a href="#finish" class="internal-link" title="dropbox.oauth.DropboxOAuth2Flow.finish">finish()</a></code>
to prevent request forgery.</dd>
</dl>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">url​_state</span></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">str url​_state</span></td><td class="fieldArgDesc">Any data that you would like to keep in the URL through the
authorization process. This exact value will be returned to you by <code><a href="#finish" class="internal-link" title="dropbox.oauth.DropboxOAuth2Flow.finish">finish()</a></code>.</td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td colspan="2">The URL for a page on Dropbox's website. This page will let the user "approve" your
app, which gives your app permission to access the user's Dropbox account. Tell the user
to visit this URL and approve your app.</td></tr></table></div>
  </div>
</div><div class="baseinstancevariable">
  
  
  <a name="dropbox.oauth.DropboxOAuth2Flow.csrf_token_session_key">
    
  </a>
  <a name="csrf_token_session_key">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">csrf_token_session_key</span> =
    
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div><div class="baseinstancevariable">
  
  
  <a name="dropbox.oauth.DropboxOAuth2Flow.redirect_uri">
    
  </a>
  <a name="redirect_uri">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">redirect_uri</span> =
    
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div><div class="baseinstancevariable">
  
  
  <a name="dropbox.oauth.DropboxOAuth2Flow.session">
    
  </a>
  <a name="session">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">session</span> =
    
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div>

      </div>
    </div>

    <footer class="navbar navbar-default">
  
  <div class="container">
    <a href="index.html">API Documentation</a> for dropbox,
  generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a>
    22.2.0 at 2022-02-23 05:02:36.
  </div>
</footer>

    <script src="pydoctor.js" type="text/javascript"></script>

  </body>
</html>