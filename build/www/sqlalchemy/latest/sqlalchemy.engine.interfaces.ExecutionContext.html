<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  

  <head>
    
    <title>sqlalchemy.engine.interfaces.ExecutionContext</title>
    <meta name="generator" content="pydoctor 22.2.0"> 
        
    </meta>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=0.75" />
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="apidocs.css" />
    <link rel="stylesheet" type="text/css" href="extra.css" />
</head>

  <body>

    

    <nav class="navbar navbar-default">
  
  <div class="container">

    <div class="navbar-header">
      
      <div class="navlinks">
          <span class="navbar-brand">
            sqlalchemy <a href="index.html">API Documentation</a>
          </span>

          <a href="moduleIndex.html">
            Modules
          </a>

          <a href="classIndex.html">
            Classes
          </a>

          <a href="nameIndex.html">
            Names
          </a>
      </div>

    </div>
  </div>
</nav>

    

    <div class="container">

      <div class="page-header">
        <h1 class="class"><code><code><a href="index.html" class="internal-link">sqlalchemy</a></code><wbr></wbr>.<code><a href="sqlalchemy.engine.html" class="internal-link" title="sqlalchemy.engine">engine</a></code><wbr></wbr>.<code><a href="sqlalchemy.engine.interfaces.html" class="internal-link" title="sqlalchemy.engine.interfaces">interfaces</a></code><wbr></wbr>.<code><a href="sqlalchemy.engine.interfaces.ExecutionContext.html" class="internal-link" title="sqlalchemy.engine.interfaces.ExecutionContext">ExecutionContext</a></code></code></h1>
        <div id="showPrivate">
          <button class="btn btn-link" onclick="togglePrivate()">Toggle Private API</button>
        </div>
      </div>

      <div class="categoryHeader">
        class documentation
      </div>

      <div class="extrasDocstring">
        <p><code><span class="py-keyword">class</span> <span class="py-defname">ExecutionContext</span>(object):</code></p><p>Known subclasses: <code><a href="sqlalchemy.engine.default.DefaultExecutionContext.html" class="internal-link">sqlalchemy.engine.default.DefaultExecutionContext</a></code></p>
        <p><a href="classIndex.html#sqlalchemy.engine.interfaces.ExecutionContext">View In Hierarchy</a></p>
      </div>

      <div class="moduleDocstring">
        <div><p>A messenger object for a Dialect that corresponds to a single
execution.</p>
<p>ExecutionContext should have these data members:</p>
<dl class="rst-docutils">
<dt>connection</dt>
<dd>Connection object which can be freely used by default value
generators to execute SQL.  This Connection should reference the
same underlying connection/transactional resources of
root_connection.</dd>
<dt>root_connection</dt>
<dd>Connection object which is the source of this ExecutionContext.  This
Connection may have close_with_result=True set, in which case it can
only be used once.</dd>
<dt>dialect</dt>
<dd>dialect which created this ExecutionContext.</dd>
<dt>cursor</dt>
<dd>DB-API cursor procured from the connection,</dd>
<dt>compiled</dt>
<dd>if passed to constructor, sqlalchemy.engine.base.Compiled object
being executed,</dd>
<dt>statement</dt>
<dd>string version of the statement to be executed.  Is either
passed to the constructor, or must be created from the
sql.Compiled object by the time pre_exec() has completed.</dd>
<dt>parameters</dt>
<dd>bind parameters passed to the execute() method.  For compiled
statements, this is a dictionary or list of dictionaries.  For
textual statements, it should be in a format suitable for the
dialect's paramstyle (i.e. dict or list of dicts for non
positional, list or list of lists/tuples for positional).</dd>
<dt>isinsert</dt>
<dd>True if the statement is an INSERT.</dd>
<dt>isupdate</dt>
<dd>True if the statement is an UPDATE.</dd>
<dt>should_autocommit</dt>
<dd>True if the statement is a "committable" statement.</dd>
<dt>prefetch_cols</dt>
<dd>a list of Column objects for which a client-side default
was fired off.  Applies to inserts and updates.</dd>
<dt>postfetch_cols</dt>
<dd>a list of Column objects for which a server-side default or
inline SQL expression value was fired off.  Applies to inserts
and updates.</dd>
</dl>
</div>
      </div>

      <div id="splitTables">
        <table class="children sortable" id="id16242">
  
  
  <tr class="method">
    
    <td>Method</td>
    <td><code><a href="#create_cursor" class="internal-link" title="sqlalchemy.engine.interfaces.ExecutionContext.create_cursor">create​_cursor</a></code></td>
    <td>Return a new cursor generated from this ExecutionContext's connection.</td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#get_out_parameter_values" class="internal-link" title="sqlalchemy.engine.interfaces.ExecutionContext.get_out_parameter_values">get​_out​_parameter​_values</a></code></td>
    <td>Return a sequence of OUT parameter values from a cursor.</td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#get_result_cursor_strategy" class="internal-link" title="sqlalchemy.engine.interfaces.ExecutionContext.get_result_cursor_strategy">get​_result​_cursor​_strategy</a></code></td>
    <td>Return a result cursor strategy for a given result object.</td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#get_rowcount" class="internal-link" title="sqlalchemy.engine.interfaces.ExecutionContext.get_rowcount">get​_rowcount</a></code></td>
    <td>Return the DBAPI <tt class="rst-docutils literal">cursor.rowcount</tt> value, or in some cases an interpreted value.</td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#handle_dbapi_exception" class="internal-link" title="sqlalchemy.engine.interfaces.ExecutionContext.handle_dbapi_exception">handle​_dbapi​_exception</a></code></td>
    <td>Receive a DBAPI exception which occurred upon execute, result fetch, etc.</td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#lastrow_has_defaults" class="internal-link" title="sqlalchemy.engine.interfaces.ExecutionContext.lastrow_has_defaults">lastrow​_has​_defaults</a></code></td>
    <td>Return True if the last INSERT or UPDATE row contained inlined or database-side defaults.</td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#post_exec" class="internal-link" title="sqlalchemy.engine.interfaces.ExecutionContext.post_exec">post​_exec</a></code></td>
    <td>Called after the execution of a compiled statement.</td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#pre_exec" class="internal-link" title="sqlalchemy.engine.interfaces.ExecutionContext.pre_exec">pre​_exec</a></code></td>
    <td>Called before an execution of a compiled statement.</td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#should_autocommit_text" class="internal-link" title="sqlalchemy.engine.interfaces.ExecutionContext.should_autocommit_text">should​_autocommit​_text</a></code></td>
    <td>Parse the given textual statement and return True if it refers to a "committable" statement</td>
  </tr>
</table>
        

          
      </div>

      <div id="childList">

        <div class="basemethod">
  
  
  <a name="sqlalchemy.engine.interfaces.ExecutionContext.create_cursor">
    
  </a>
  <a name="create_cursor">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">create_cursor</span>(self):
    
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">overridden in <code><a href="sqlalchemy.engine.default.DefaultExecutionContext.html" class="internal-link">sqlalchemy.engine.default.DefaultExecutionContext</a></code></div>
    
    <div><p>Return a new cursor generated from this ExecutionContext's
connection.</p>
<p>Some dialects may wish to change the behavior of
connection.cursor(), such as postgresql which may return a PG
"server side" cursor.</p>
</div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.engine.interfaces.ExecutionContext.get_out_parameter_values">
    
  </a>
  <a name="get_out_parameter_values">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">get_out_parameter_values</span>(self, out_param_names):
    
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">overridden in <code><a href="sqlalchemy.engine.default.DefaultExecutionContext.html" class="internal-link">sqlalchemy.engine.default.DefaultExecutionContext</a></code></div>
    
    <div><p>Return a sequence of OUT parameter values from a cursor.</p>
<p>For dialects that support OUT parameters, this method will be called
when there is a <code>.SQLCompiler</code> object which has the
<code>.SQLCompiler.has_out_parameters</code> flag set.  This flag in turn
will be set to True if the statement itself has <code>.BindParameter</code>
objects that have the <tt class="rst-docutils literal">.isoutparam</tt> flag set which are consumed by
the <code>.SQLCompiler.visit_bindparam</code> method.  If the dialect
compiler produces <code>.BindParameter</code> objects with <tt class="rst-docutils literal">.isoutparam</tt>
set which are not handled by <code>.SQLCompiler.visit_bindparam</code>, it
should set this flag explicitly.</p>
<p>The list of names that were rendered for each bound parameter
is passed to the method.  The method should then return a sequence of
values corresponding to the list of parameter objects. Unlike in
previous SQLAlchemy versions, the values can be the <strong>raw values</strong> from
the DBAPI; the execution context will apply the appropriate type
handler based on what's present in self.compiled.binds and update the
values.  The processed dictionary will then be made available via the
<tt class="rst-docutils literal">.out_parameters</tt> collection on the result object.  Note that
SQLAlchemy 1.4 has multiple kinds of result object as part of the 2.0
transition.</p>
<div class="rst-versionadded">
<span class="rst-versionmodified rst-added">New in version 1.4: </span><span>- added
<code>.ExecutionContext.get_out_parameter_values</code>, which is invoked
automatically by the <code>.DefaultExecutionContext</code> when there
are <code>.BindParameter</code> objects with the <tt class="rst-docutils literal">.isoutparam</tt> flag
set.  This replaces the practice of setting out parameters within
the now-removed <tt class="rst-docutils literal">get_result_proxy()</tt> method.</span></div>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p class="rst-last"><code>.ExecutionContext.get_result_cursor_strategy</code></p>
</div>
</div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.engine.interfaces.ExecutionContext.get_result_cursor_strategy">
    
  </a>
  <a name="get_result_cursor_strategy">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">get_result_cursor_strategy</span>(self, result):
    
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">overridden in <code><a href="sqlalchemy.databases.mssql.MSExecutionContext.html" class="internal-link">sqlalchemy.databases.mssql.MSExecutionContext</a></code></div>
    
    <div><p>Return a result cursor strategy for a given result object.</p>
<p>This method is implemented by the <code>.DefaultDialect</code> and is
only needed by implementing dialects in the case where some special
steps regarding the cursor must be taken, such as manufacturing
fake results from some other element of the cursor, or pre-buffering
the cursor's results.</p>
<p>A simplified version of the default implementation is:</p>
<pre class="rst-literal-block">
from sqlalchemy.engine.result import DefaultCursorFetchStrategy

class MyExecutionContext(DefaultExecutionContext):
    def get_result_cursor_strategy(self, result):
        return DefaultCursorFetchStrategy.create(result)
</pre>
<p>Above, the <code>.DefaultCursorFetchStrategy</code> will be applied
to the result object.   For results that are pre-buffered from a
cursor that might be closed, an implementation might be:</p>
<pre class="rst-literal-block">
from sqlalchemy.engine.result import (
    FullyBufferedCursorFetchStrategy
)

class MyExecutionContext(DefaultExecutionContext):
    _pre_buffered_result = None

    def pre_exec(self):
        if self.special_condition_prebuffer_cursor():
            self._pre_buffered_result = (
                self.cursor.description,
                self.cursor.fetchall()
            )

    def get_result_cursor_strategy(self, result):
        if self._pre_buffered_result:
            description, cursor_buffer = self._pre_buffered_result
            return (
                FullyBufferedCursorFetchStrategy.
                    create_from_buffer(
                        result, description, cursor_buffer
                )
            )
        else:
            return DefaultCursorFetchStrategy.create(result)
</pre>
<p>This method replaces the previous not-quite-documented
<tt class="rst-docutils literal">get_result_proxy()</tt> method.</p>
<div class="rst-versionadded">
<span class="rst-versionmodified rst-added">New in version 1.4: </span><span>- result objects now interpret cursor results
based on a pluggable "strategy" object, which is delivered
by the <code>.ExecutionContext</code> via the
<code>.ExecutionContext.get_result_cursor_strategy</code> method.</span></div>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p class="rst-last"><code>.ExecutionContext.get_out_parameter_values</code></p>
</div>
</div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.engine.interfaces.ExecutionContext.get_rowcount">
    
  </a>
  <a name="get_rowcount">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">get_rowcount</span>(self):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Return the DBAPI <tt class="rst-docutils literal">cursor.rowcount</tt> value, or in some
cases an interpreted value.</p>
<p>See <code>_engine.CursorResult.rowcount</code> for details on this.</p>
</div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.engine.interfaces.ExecutionContext.handle_dbapi_exception">
    
  </a>
  <a name="handle_dbapi_exception">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">handle_dbapi_exception</span>(self, e):
    
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">overridden in <code><a href="sqlalchemy.engine.default.DefaultExecutionContext.html" class="internal-link">sqlalchemy.engine.default.DefaultExecutionContext</a></code></div>
    
    <div>Receive a DBAPI exception which occurred upon execute, result
fetch, etc.</div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.engine.interfaces.ExecutionContext.lastrow_has_defaults">
    
  </a>
  <a name="lastrow_has_defaults">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">lastrow_has_defaults</span>(self):
    
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">overridden in <code><a href="sqlalchemy.engine.default.DefaultExecutionContext.html" class="internal-link">sqlalchemy.engine.default.DefaultExecutionContext</a></code></div>
    
    <div>Return True if the last INSERT or UPDATE row contained
inlined or database-side defaults.</div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.engine.interfaces.ExecutionContext.post_exec">
    
  </a>
  <a name="post_exec">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">post_exec</span>(self):
    
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">overridden in <code><a href="sqlalchemy.engine.default.DefaultExecutionContext.html" class="internal-link">sqlalchemy.engine.default.DefaultExecutionContext</a></code></div>
    
    <div><p>Called after the execution of a compiled statement.</p>
<p>If a compiled statement was passed to this ExecutionContext,
the <code>last_insert_ids</code>, <code>last_inserted_params</code>, etc.
datamembers should be available after this method completes.</p>
</div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.engine.interfaces.ExecutionContext.pre_exec">
    
  </a>
  <a name="pre_exec">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">pre_exec</span>(self):
    
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">overridden in <code><a href="sqlalchemy.engine.default.DefaultExecutionContext.html" class="internal-link">sqlalchemy.engine.default.DefaultExecutionContext</a></code></div>
    
    <div><p>Called before an execution of a compiled statement.</p>
<p>If a compiled statement was passed to this ExecutionContext,
the <code><a href="sqlalchemy.engine.interfaces.ExceptionContext.html#statement" class="internal-link" title="sqlalchemy.engine.interfaces.ExceptionContext.statement">statement</a></code> and <code><a href="sqlalchemy.engine.interfaces.ExceptionContext.html#parameters" class="internal-link" title="sqlalchemy.engine.interfaces.ExceptionContext.parameters">parameters</a></code> datamembers must be
initialized after this statement is complete.</p>
</div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.engine.interfaces.ExecutionContext.should_autocommit_text">
    
  </a>
  <a name="should_autocommit_text">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">should_autocommit_text</span>(self, statement):
    
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">overridden in <code><a href="sqlalchemy.engine.default.DefaultExecutionContext.html" class="internal-link">sqlalchemy.engine.default.DefaultExecutionContext</a></code></div>
    
    <div>Parse the given textual statement and return True if it refers to
a "committable" statement</div>
  </div>
</div>

      </div>
    </div>

    <footer class="navbar navbar-default">
  
  <div class="container">
    <a href="index.html">API Documentation</a> for sqlalchemy,
  generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a>
    22.2.0 at 2022-02-23 04:41:59.
  </div>
</footer>

    <script src="pydoctor.js" type="text/javascript"></script>

  </body>
</html>