<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  

  <head>
    
    <title>sqlalchemy.event.api</title>
    <meta name="generator" content="pydoctor 22.2.0"> 
        
    </meta>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=0.75" />
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="apidocs.css" />
    <link rel="stylesheet" type="text/css" href="extra.css" />
</head>

  <body>

    

    <nav class="navbar navbar-default">
  
  <div class="container">

    <div class="navbar-header">
      
      <div class="navlinks">
          <span class="navbar-brand">
            sqlalchemy <a href="index.html">API Documentation</a>
          </span>

          <a href="moduleIndex.html">
            Modules
          </a>

          <a href="classIndex.html">
            Classes
          </a>

          <a href="nameIndex.html">
            Names
          </a>
      </div>

    </div>
  </div>
</nav>

    

    <div class="container">

      <div class="page-header">
        <h1 class="module"><code><code><a href="index.html" class="internal-link">sqlalchemy</a></code><wbr></wbr>.<code><a href="sqlalchemy.event.html" class="internal-link" title="sqlalchemy.event">event</a></code><wbr></wbr>.<code><a href="sqlalchemy.event.api.html" class="internal-link" title="sqlalchemy.event.api">api</a></code></code></h1>
        <div id="showPrivate">
          <button class="btn btn-link" onclick="togglePrivate()">Toggle Private API</button>
        </div>
      </div>

      <div class="categoryHeader">
        module documentation
      </div>

      <div class="extrasDocstring">
        
        <p></p>
      </div>

      <div class="moduleDocstring">
        <div>Public API functions for the event system.</div>
      </div>

      <div id="splitTables">
        <table class="children sortable" id="id16309">
  
  
  <tr class="function">
    
    <td>Function</td>
    <td><code><a href="#contains" class="internal-link" title="sqlalchemy.event.api.contains">contains</a></code></td>
    <td>Return True if the given target/ident/fn is set up to listen.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#listen" class="internal-link" title="sqlalchemy.event.api.listen">listen</a></code></td>
    <td>Register a listener function for the given target.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#listens_for" class="internal-link" title="sqlalchemy.event.api.listens_for">listens​_for</a></code></td>
    <td>Decorate a function as a listener for the given target + identifier.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#remove" class="internal-link" title="sqlalchemy.event.api.remove">remove</a></code></td>
    <td>Remove an event listener.</td>
  </tr><tr class="constant">
    
    <td>Constant</td>
    <td><code><a href="#CANCEL" class="internal-link" title="sqlalchemy.event.api.CANCEL">CANCEL</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="constant">
    
    <td>Constant</td>
    <td><code><a href="#NO_RETVAL" class="internal-link" title="sqlalchemy.event.api.NO_RETVAL">NO​_RETVAL</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_event_key" class="internal-link" title="sqlalchemy.event.api._event_key">​_event​_key</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr>
</table>
        

          
      </div>

      <div id="childList">

        <div class="basefunction">
  
  
  <a name="sqlalchemy.event.api.contains">
    
  </a>
  <a name="contains">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">contains</span>(target, identifier, fn):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div>Return True if the given target/ident/fn is set up to listen.</div>
  </div>
</div><div class="basefunction">
  
  
  <a name="sqlalchemy.event.api.listen">
    
  </a>
  <a name="listen">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">listen</span>(target, identifier, fn, *args, **kw):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Register a listener function for the given target.</p>
<p>The <code>.listen</code> function is part of the primary interface for the
SQLAlchemy event system, documented at <a href="#system-message-1"><span class="rst-problematic" id="rst-problematic-1">:ref:`event_toplevel`</span></a>.</p>
<p>e.g.:</p>
<pre class="rst-literal-block">
from sqlalchemy import event
from sqlalchemy.schema import UniqueConstraint

def unique_constraint_name(const, table):
    const.name = "uq_%s_%s" % (
        table.name,
        list(const.columns)[0].name
    )
event.listen(
        UniqueConstraint,
        "after_parent_attach",
        unique_constraint_name)
</pre>
<div class="rst-admonition note">
<p class="rst-first rst-admonition-title">Note</p>
<p>The <code>.listen</code> function cannot be called at the same time
that the target event is being run.   This has implications
for thread safety, and also means an event cannot be added
from inside the listener function for itself.  The list of
events to be run are present inside of a mutable collection
that can't be changed during iteration.</p>
<p class="rst-last">Event registration and removal is not intended to be a "high
velocity" operation; it is a configurational operation.  For
systems that need to quickly associate and deassociate with
events at high scale, use a mutable structure that is handled
from inside of a single listener.</p>
</div>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p><code>.listens_for</code></p>
<p class="rst-last"><code>.remove</code></p>
</div>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">target</span></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">identifier</span></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">fn</span></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">*args</span></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">**kw</span></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">bool insert</span></td><td class="fieldArgDesc">The default behavior for event handlers is to append
the decorated user defined function to an internal list of registered
event listeners upon discovery. If a user registers a function with
<tt class="rst-docutils literal">insert=True</tt>, SQLAlchemy will insert (prepend) the function to the
internal list upon discovery. This feature is not typically used or
recommended by the SQLAlchemy maintainers, but is provided to ensure
certain user defined functions can run before others, such as when
<a href="#system-message-2"><span class="rst-problematic" id="rst-problematic-2">:ref:`Changing the sql_mode in MySQL &lt;mysql_sql_mode&gt;`</span></a>.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">bool named</span></td><td class="fieldArgDesc">When using named argument passing, the names listed in
the function argument specification will be used as keys in the
dictionary.
See <a href="#system-message-3"><span class="rst-problematic" id="rst-problematic-3">:ref:`event_named_argument_styles`</span></a>.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">bool once</span></td><td class="fieldArgDesc">Private/Internal API usage. Deprecated.  This parameter
would provide that an event function would run only once per given
target. It does not however imply automatic de-registration of the
listener function; associating an arbitrarily high number of listeners
without explicitly removing them will cause memory to grow unbounded even
if <tt class="rst-docutils literal">once=True</tt> is specified.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">bool propagate</span></td><td class="fieldArgDesc">The <tt class="rst-docutils literal">propagate</tt> kwarg is available when working
with ORM instrumentation and mapping events.
See <code>_ormevent.MapperEvents</code> and
<code>_ormevent.MapperEvents.before_mapper_configured</code> for examples.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">bool retval</span></td><td class="fieldArgDesc"><p>This flag applies only to specific event listeners,
each of which includes documentation explaining when it should be used.
By default, no listener ever requires a return value.
However, some listeners do support special behaviors for return values,
and include in their documentation that the <tt class="rst-docutils literal">retval=True</tt> flag is
necessary for a return value to be processed.</p>
<p>Event listener suites that make use of <a href="#system-message-4"><span class="rst-problematic" id="rst-problematic-4">:paramref:`_event.listen.retval`</span></a>
include <code>_events.ConnectionEvents</code> and
<code>_ormevent.AttributeEvents</code>.</p>
</td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="sqlalchemy.event.api.listens_for">
    
  </a>
  <a name="listens_for">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">listens_for</span>(target, identifier, *args, **kw):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Decorate a function as a listener for the given target + identifier.</p>
<p>The <code>.listens_for</code> decorator is part of the primary interface for the
SQLAlchemy event system, documented at <a href="#system-message-1"><span class="rst-problematic" id="rst-problematic-1">:ref:`event_toplevel`</span></a>.</p>
<p>This function generally shares the same kwargs as <code>.listens</code>.</p>
<p>e.g.:</p>
<pre class="rst-literal-block">
from sqlalchemy import event
from sqlalchemy.schema import UniqueConstraint

@event.listens_for(UniqueConstraint, "after_parent_attach")
def unique_constraint_name(const, table):
    const.name = "uq_%s_%s" % (
        table.name,
        list(const.columns)[0].name
    )
</pre>
<p>A given function can also be invoked for only the first invocation
of the event using the <tt class="rst-docutils literal">once</tt> argument:</p>
<pre class="rst-literal-block">
@event.listens_for(Mapper, "before_configure", once=True)
def on_config():
    do_config()
</pre>
<div class="rst-admonition warning">
<p class="rst-first rst-admonition-title">Warning</p>
<p class="rst-last">The <tt class="rst-docutils literal">once</tt> argument does not imply automatic de-registration
of the listener function after it has been invoked a first time; a
listener entry will remain associated with the target object.
Associating an arbitrarily high number of listeners without explicitly
removing them will cause memory to grow unbounded even if <tt class="rst-docutils literal">once=True</tt>
is specified.</p>
</div>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p class="rst-last"><code>.listen</code> - general description of event listening</p>
</div>
</div>
  </div>
</div><div class="basefunction">
  
  
  <a name="sqlalchemy.event.api.remove">
    
  </a>
  <a name="remove">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">remove</span>(target, identifier, fn):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Remove an event listener.</p>
<p>The arguments here should match exactly those which were sent to
<code>.listen</code>; all the event registration which proceeded as a result
of this call will be reverted by calling <code>.remove</code> with the same
arguments.</p>
<p>e.g.:</p>
<pre class="rst-literal-block">
# if a function was registered like this...
@event.listens_for(SomeMappedClass, "before_insert", propagate=True)
def my_listener_function(*arg):
    pass

# ... it's removed like this
event.remove(SomeMappedClass, "before_insert", my_listener_function)
</pre>
<p>Above, the listener function associated with <tt class="rst-docutils literal">SomeMappedClass</tt> was also
propagated to subclasses of <tt class="rst-docutils literal">SomeMappedClass</tt>; the <code>.remove</code>
function will revert all of these operations.</p>
<div class="rst-admonition note">
<p class="rst-first rst-admonition-title">Note</p>
<p>The <code>.remove</code> function cannot be called at the same time
that the target event is being run.   This has implications
for thread safety, and also means an event cannot be removed
from inside the listener function for itself.  The list of
events to be run are present inside of a mutable collection
that can't be changed during iteration.</p>
<p>Event registration and removal is not intended to be a "high
velocity" operation; it is a configurational operation.  For
systems that need to quickly associate and deassociate with
events at high scale, use a mutable structure that is handled
from inside of a single listener.</p>
<div class="rst-last rst-versionchanged">
<span class="rst-versionmodified rst-changed">Changed in version 1.0.0: </span><span>- a <tt class="rst-docutils literal">collections.deque()</tt> object is now
used as the container for the list of events, which explicitly
disallows collection mutation while the collection is being
iterated.</span></div>
</div>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p class="rst-last"><code>.listen</code></p>
</div>
</div>
  </div>
</div><div class="baseconstant">
  
  
  <a name="sqlalchemy.event.api.CANCEL">
    
  </a>
  <a name="CANCEL">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">CANCEL</span> =
    
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code><a href="sqlalchemy.util.langhelpers.symbol.html" class="internal-link" title="sqlalchemy.util.langhelpers.symbol">util.symbol</a>(<wbr></wbr><span class="rst-variable-quote">'</span><span class="rst-variable-string">CANCEL</span><span class="rst-variable-quote">'</span>)</code></pre></td></tr></table>
  </div>
</div><div class="baseconstant">
  
  
  <a name="sqlalchemy.event.api.NO_RETVAL">
    
  </a>
  <a name="NO_RETVAL">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">NO_RETVAL</span> =
    
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code><a href="sqlalchemy.util.langhelpers.symbol.html" class="internal-link" title="sqlalchemy.util.langhelpers.symbol">util.symbol</a>(<wbr></wbr><span class="rst-variable-quote">'</span><span class="rst-variable-string">NO_RETVAL</span><span class="rst-variable-quote">'</span>)</code></pre></td></tr></table>
  </div>
</div><div class="basefunction private">
  
  
  <a name="sqlalchemy.event.api._event_key">
    
  </a>
  <a name="_event_key">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_event_key</span>(target, identifier, fn):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div>

      </div>
    </div>

    <footer class="navbar navbar-default">
  
  <div class="container">
    <a href="index.html">API Documentation</a> for sqlalchemy,
  generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a>
    22.2.0 at 2022-02-23 04:41:59.
  </div>
</footer>

    <script src="pydoctor.js" type="text/javascript"></script>

  </body>
</html>