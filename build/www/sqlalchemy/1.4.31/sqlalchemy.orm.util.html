<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  

  <head>
    
    <title>sqlalchemy.orm.util</title>
    <meta name="generator" content="pydoctor 22.2.0"> 
        
    </meta>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=0.75" />
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="apidocs.css" />
    <link rel="stylesheet" type="text/css" href="extra.css" />
</head>

  <body>

    <div id="banner" class="container">    
    <div>
        <a href="https://pydocbrowser.github.io/">Home</a>
        &gt; sqlalchemy-1.4.31 
        <!-- This is an important placeholder and will be 
            replaced by project name and version on building docs -->
        
        <!-- (<a href=""&gt;show all versions</a&gt;) -->
    </div>
</div>

    <nav class="navbar navbar-default">
  
  <div class="container">

    <div class="navbar-header">
      
      <div class="navlinks">
          <span class="navbar-brand">
            sqlalchemy <a href="index.html">API Documentation</a>
          </span>

          <a href="moduleIndex.html">
            Modules
          </a>

          <a href="classIndex.html">
            Classes
          </a>

          <a href="nameIndex.html">
            Names
          </a>
      </div>

    </div>
  </div>
</nav>

    

    <div class="container">

      <div class="page-header">
        <h1 class="module"><code><code><a href="index.html" class="internal-link">sqlalchemy</a></code><wbr></wbr>.<code><a href="sqlalchemy.orm.html" class="internal-link" title="sqlalchemy.orm">orm</a></code><wbr></wbr>.<code><a href="sqlalchemy.orm.util.html" class="internal-link" title="sqlalchemy.orm.util">util</a></code></code></h1>
        <div id="showPrivate">
          <button class="btn btn-link" onclick="togglePrivate()">Toggle Private API</button>
        </div>
      </div>

      <div class="categoryHeader">
        module documentation
      </div>

      <div class="extrasDocstring">
        <a href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/orm/util.py" class="sourceLink">(source)</a>
        <p></p>
      </div>

      <div class="moduleDocstring">
        <div><p class="undocumented">Undocumented</p></div>
      </div>

      <div id="splitTables">
        <table class="children sortable" id="id21254">
  
  
  <tr class="class">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.orm.util.AliasedClass.html" class="internal-link" title="sqlalchemy.orm.util.AliasedClass">​Aliased​Class</a></code></td>
    <td>Represents an "aliased" form of a mapped class for usage with Query.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.orm.util.AliasedInsp.html" class="internal-link" title="sqlalchemy.orm.util.AliasedInsp">​Aliased​Insp</a></code></td>
    <td>Provide an inspection interface for an <code>.AliasedClass</code> object.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.orm.util.Bundle.html" class="internal-link" title="sqlalchemy.orm.util.Bundle">​Bundle</a></code></td>
    <td>A grouping of SQL expressions that are returned by a <code>.Query</code> under one namespace.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.orm.util.CascadeOptions.html" class="internal-link" title="sqlalchemy.orm.util.CascadeOptions">​Cascade​Options</a></code></td>
    <td>Keeps track of the options sent to <a href="#system-message-1"><span class="rst-problematic" id="rst-problematic-1">:paramref:`.relationship.cascade`</span></a></td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.orm.util.LoaderCriteriaOption.html" class="internal-link" title="sqlalchemy.orm.util.LoaderCriteriaOption">​Loader​Criteria​Option</a></code></td>
    <td>Add additional WHERE criteria to the load for all occurrences of a particular entity.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.orm.util.ORMAdapter.html" class="internal-link" title="sqlalchemy.orm.util.ORMAdapter">​ORMAdapter</a></code></td>
    <td>ColumnAdapter subclass which excludes adaptation of entities from non-matching mappers.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#has_identity" class="internal-link" title="sqlalchemy.orm.util.has_identity">has​_identity</a></code></td>
    <td>Return True if the given object has a database identity.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#identity_key" class="internal-link" title="sqlalchemy.orm.util.identity_key">identity​_key</a></code></td>
    <td>Generate "identity key" tuples, as are used as keys in the <code>.Session.identity_map</code> dictionary.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#join" class="internal-link" title="sqlalchemy.orm.util.join">join</a></code></td>
    <td>Produce an inner join between left and right clauses.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#outerjoin" class="internal-link" title="sqlalchemy.orm.util.outerjoin">outerjoin</a></code></td>
    <td>Produce a left outer join between left and right clauses.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#polymorphic_union" class="internal-link" title="sqlalchemy.orm.util.polymorphic_union">polymorphic​_union</a></code></td>
    <td>Create a <tt class="rst-docutils literal">UNION</tt> statement used by a polymorphic mapper.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#randomize_unitofwork" class="internal-link" title="sqlalchemy.orm.util.randomize_unitofwork">randomize​_unitofwork</a></code></td>
    <td>Use random-ordering sets within the unit of work in order to detect unit of work sorting issues.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#was_deleted" class="internal-link" title="sqlalchemy.orm.util.was_deleted">was​_deleted</a></code></td>
    <td>Return True if the given object was deleted within a session flush.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#with_parent" class="internal-link" title="sqlalchemy.orm.util.with_parent">with​_parent</a></code></td>
    <td><span class="undocumented">No summary</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#with_polymorphic" class="internal-link" title="sqlalchemy.orm.util.with_polymorphic">with​_polymorphic</a></code></td>
    <td>Produce an <code>.AliasedClass</code> construct which specifies columns for descendant mappers of the given base.</td>
  </tr><tr class="variable">
    
    <td>Variable</td>
    <td><code><a href="#all_cascades" class="internal-link" title="sqlalchemy.orm.util.all_cascades">all​_cascades</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="class private">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.orm.util._ORMJoin.html" class="internal-link" title="sqlalchemy.orm.util._ORMJoin">_​ORMJoin</a></code></td>
    <td>Extend Join to support ORM constructs as input.</td>
  </tr><tr class="class private">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.orm.util._WrapUserEntity.html" class="internal-link" title="sqlalchemy.orm.util._WrapUserEntity">_​Wrap​User​Entity</a></code></td>
    <td>A wrapper used within the loader_criteria lambda caller so that we can bypass declared_attr descriptors on unmapped mixins, which normally emit a warning for such use.</td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_entity_corresponds_to" class="internal-link" title="sqlalchemy.orm.util._entity_corresponds_to">​_entity​_corresponds​_to</a></code></td>
    <td>determine if 'given' corresponds to 'entity', in terms of an entity passed to Query that would match the same entity being referred to elsewhere in the query.</td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_entity_corresponds_to_use_path_impl" class="internal-link" title="sqlalchemy.orm.util._entity_corresponds_to_use_path_impl">​_entity​_corresponds​_to​_use​_path​_impl</a></code></td>
    <td>determine if 'given' corresponds to 'entity', in terms of a path of loader options where a mapped attribute is taken to be a member of a parent entity.</td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_entity_isa" class="internal-link" title="sqlalchemy.orm.util._entity_isa">​_entity​_isa</a></code></td>
    <td>determine if 'given' "is a" mapper, in terms of the given would load rows of type 'mapper'.</td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_getitem" class="internal-link" title="sqlalchemy.orm.util._getitem">​_getitem</a></code></td>
    <td>calculate __getitem__ in terms of an iterable query object that also has a slice() method.</td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_orm_annotate" class="internal-link" title="sqlalchemy.orm.util._orm_annotate">​_orm​_annotate</a></code></td>
    <td>Deep copy the given ClauseElement, annotating each element with the "_orm_adapt" flag.</td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_orm_deannotate" class="internal-link" title="sqlalchemy.orm.util._orm_deannotate">​_orm​_deannotate</a></code></td>
    <td>Remove annotations that link a column to a particular mapping.</td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_orm_full_deannotate" class="internal-link" title="sqlalchemy.orm.util._orm_full_deannotate">​_orm​_full​_deannotate</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_validator_events" class="internal-link" title="sqlalchemy.orm.util._validator_events">​_validator​_events</a></code></td>
    <td>Runs a validation method on an attribute value to be set or appended.</td>
  </tr>
</table>
        

          
      </div>

      <div id="childList">

        <div class="basefunction">
  
  
  <a name="sqlalchemy.orm.util.has_identity">
    
  </a>
  <a name="has_identity">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">has_identity</span>(object_):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/orm/util.py#L1916">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Return True if the given object has a database
identity.</p>
<p>This typically corresponds to the object being
in either the persistent or detached state.</p>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p class="rst-last"><code>.was_deleted</code></p>
</div>
</div>
  </div>
</div><div class="basefunction">
  
  
  <a name="sqlalchemy.orm.util.identity_key">
    
  </a>
  <a name="identity_key">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">identity_key</span>(*args, **kwargs):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/orm/util.py#L278">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Generate "identity key" tuples, as are used as keys in the
<code>.Session.identity_map</code> dictionary.</p>
<p>This function has several call styles:</p>
<ul>
<li><p class="rst-first"><tt class="rst-docutils literal">identity_key(class, ident, identity_token=token)</tt></p>
<p>This form receives a mapped class and a primary key scalar or
tuple as an argument.</p>
<p>E.g.:</p>
<pre class="rst-literal-block">
&gt;&gt;&gt; identity_key(MyClass, (1, 2))
(&lt;class '__main__.MyClass'&gt;, (1, 2), None)
</pre>
</li>
<li><p class="rst-first"><tt class="rst-docutils literal">identity_key(instance=instance)</tt></p>
<p>This form will produce the identity key for a given instance.  The
instance need not be persistent, only that its primary key attributes
are populated (else the key will contain <tt class="rst-docutils literal">None</tt> for those missing
values).</p>
<p>E.g.:</p>
<pre class="rst-literal-block">
&gt;&gt;&gt; instance = MyClass(1, 2)
&gt;&gt;&gt; identity_key(instance=instance)
(&lt;class '__main__.MyClass'&gt;, (1, 2), None)
</pre>
<p>In this form, the given instance is ultimately run though
<code>_orm.Mapper.identity_key_from_instance</code>, which will have the
effect of performing a database check for the corresponding row
if the object is expired.</p>
</li>
<li><p class="rst-first"><tt class="rst-docutils literal">identity_key(class, row=row, identity_token=token)</tt></p>
<p>This form is similar to the class/tuple form, except is passed a
database result row as a <code>.Row</code> object.</p>
<p>E.g.:</p>
<pre class="rst-literal-block">
&gt;&gt;&gt; row = engine.execute(\
    text("select * from table where a=1 and b=2")\
    ).first()
&gt;&gt;&gt; identity_key(MyClass, row=row)
(&lt;class '__main__.MyClass'&gt;, (1, 2), None)
</pre>
</li>
</ul>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">*args</span></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">**kwargs</span></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">class</span></td><td class="fieldArgDesc">mapped class (must be a positional argument)</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">ident</span></td><td class="fieldArgDesc">primary key, may be a scalar or tuple argument.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">identity​_token</span></td><td class="fieldArgDesc"><p>optional identity token</p>
<div class="rst-versionadded">
<span class="rst-versionmodified rst-added">New in version 1.2: </span><span>added identity_token</span></div>
</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">instance</span></td><td class="fieldArgDesc">object instance (must be given as a keyword arg)</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">row</span></td><td class="fieldArgDesc"><code>.Row</code> row returned by a <code>_engine.CursorResult</code>
(must be given as a keyword arg)</td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="sqlalchemy.orm.util.join">
    
  </a>
  <a name="join">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">join</span>(left, right, onclause=<a href="https://docs.python.org/3/library/constants.html#None" class="intersphinx-link">None</a>, isouter=<a href="https://docs.python.org/3/library/constants.html#False" class="intersphinx-link">False</a>, full=<a href="https://docs.python.org/3/library/constants.html#False" class="intersphinx-link">False</a>, join_to_left=<a href="https://docs.python.org/3/library/constants.html#None" class="intersphinx-link">None</a>):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/orm/util.py#L1790">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Produce an inner join between left and right clauses.</p>
<p><code>_orm.join</code> is an extension to the core join interface
provided by <code>_expression.join()</code>, where the
left and right selectables may be not only core selectable
objects such as <code>_schema.Table</code>, but also mapped classes or
<code>.AliasedClass</code> instances.   The "on" clause can
be a SQL expression, or an attribute or string name
referencing a configured <code>_orm.relationship</code>.</p>
<p><code>_orm.join</code> is not commonly needed in modern usage,
as its functionality is encapsulated within that of the
<code>_query.Query.join</code> method, which features a
significant amount of automation beyond <code>_orm.join</code>
by itself.  Explicit usage of <code>_orm.join</code>
with <code>_query.Query</code> involves usage of the
<code>_query.Query.select_from</code> method, as in:</p>
<pre class="rst-literal-block">
from sqlalchemy.orm import join
session.query(User).\
    select_from(join(User, Address, User.addresses)).\
    filter(Address.email_address=='foo@bar.com')
</pre>
<p>In modern SQLAlchemy the above join can be written more
succinctly as:</p>
<pre class="rst-literal-block">
session.query(User).\
        join(User.addresses).\
        filter(Address.email_address=='foo@bar.com')
</pre>
<p>See <code>_query.Query.join</code> for information on modern usage
of ORM level joins.</p>
<div class="rst-deprecated">
<span class="rst-versionmodified rst-deprecated">Deprecated since version 0.8: </span><span>the <tt class="rst-docutils literal">join_to_left</tt> parameter is deprecated, and will be removed
in a future release.  The parameter has no effect.</span></div>
</div>
  </div>
</div><div class="basefunction">
  
  
  <a name="sqlalchemy.orm.util.outerjoin">
    
  </a>
  <a name="outerjoin">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">outerjoin</span>(left, right, onclause=<a href="https://docs.python.org/3/library/constants.html#None" class="intersphinx-link">None</a>, full=<a href="https://docs.python.org/3/library/constants.html#False" class="intersphinx-link">False</a>, join_to_left=<a href="https://docs.python.org/3/library/constants.html#None" class="intersphinx-link">None</a>):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/orm/util.py#L1835">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Produce a left outer join between left and right clauses.</p>
<p>This is the "outer join" version of the <code>_orm.join</code> function,
featuring the same behavior except that an OUTER JOIN is generated.
See that function's documentation for other usage details.</p>
</div>
  </div>
</div><div class="basefunction">
  
  
  <a name="sqlalchemy.orm.util.polymorphic_union">
    
  </a>
  <a name="polymorphic_union">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">polymorphic_union</span>(table_map, typecolname, aliasname=<span class="rst-variable-quote">'</span><span class="rst-variable-string">p_union</span><span class="rst-variable-quote">'</span>, cast_nulls=<a href="https://docs.python.org/3/library/constants.html#True" class="intersphinx-link">True</a>):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/orm/util.py#L196">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Create a <tt class="rst-docutils literal">UNION</tt> statement used by a polymorphic mapper.</p>
<p>See  <a href="#system-message-1"><span class="rst-problematic" id="rst-problematic-1">:ref:`concrete_inheritance`</span></a> for an example of how
this is used.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">table​_map</span></td><td class="fieldArgDesc">mapping of polymorphic identities to
<code>_schema.Table</code> objects.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">typecolname</span></td><td class="fieldArgDesc">string name of a "discriminator" column, which will be
derived from the query, producing the polymorphic identity for
each row.  If <tt class="rst-docutils literal">None</tt>, no polymorphic discriminator is generated.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">aliasname</span></td><td class="fieldArgDesc">name of the <code>~sqlalchemy.sql.expression.alias()</code>
construct generated.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">cast​_nulls</span></td><td class="fieldArgDesc">if True, non-existent columns, which are represented
as labeled NULLs, will be passed into CAST.   This is a legacy behavior
that is problematic on some backends such as Oracle - in which case it
can be set to False.</td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="sqlalchemy.orm.util.randomize_unitofwork">
    
  </a>
  <a name="randomize_unitofwork">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">randomize_unitofwork</span>():
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/orm/util.py#L2019">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Use random-ordering sets within the unit of work in order
to detect unit of work sorting issues.</p>
<p>This is a utility function that can be used to help reproduce
inconsistent unit of work sorting issues.   For example,
if two kinds of objects A and B are being inserted, and
B has a foreign key reference to A - the A must be inserted first.
However, if there is no relationship between A and B, the unit of work
won't know to perform this sorting, and an operation may or may not
fail, depending on how the ordering works out.   Since Python sets
and dictionaries have non-deterministic ordering, such an issue may
occur on some runs and not on others, and in practice it tends to
have a great dependence on the state of the interpreter.  This leads
to so-called "heisenbugs" where changing entirely irrelevant aspects
of the test program still cause the failure behavior to change.</p>
<p>By calling <tt class="rst-docutils literal">randomize_unitofwork()</tt> when a script first runs, the
ordering of a key series of sets within the unit of work implementation
are randomized, so that the script can be minimized down to the
fundamental mapping and operation that's failing, while still reproducing
the issue on at least some runs.</p>
<p>This utility is also available when running the test suite via the
<tt class="rst-docutils literal"><span class="pre">--reversetop</span></tt> flag.</p>
</div>
  </div>
</div><div class="basefunction">
  
  
  <a name="sqlalchemy.orm.util.was_deleted">
    
  </a>
  <a name="was_deleted">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">was_deleted</span>(object_):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/orm/util.py#L1932">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Return True if the given object was deleted
within a session flush.</p>
<p>This is regardless of whether or not the object is
persistent or detached.</p>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p class="rst-last"><code>.InstanceState.was_deleted</code></p>
</div>
</div>
  </div>
</div><div class="basefunction">
  
  
  <a name="sqlalchemy.orm.util.with_parent">
    
  </a>
  <a name="with_parent">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">with_parent</span>(instance, prop, from_entity=<a href="https://docs.python.org/3/library/constants.html#None" class="intersphinx-link">None</a>):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/orm/util.py#L1846">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Create filtering criterion that relates this query's primary entity
to the given related instance, using established
<code>_orm.relationship()</code>
configuration.</p>
<p>E.g.:</p>
<pre class="rst-literal-block">
stmt = select(Address).where(with_parent(some_user, User.addresses))
</pre>
<p>The SQL rendered is the same as that rendered when a lazy loader
would fire off from the given parent on that attribute, meaning
that the appropriate state is taken from the parent object in
Python without the need to render joins to the parent table
in the rendered statement.</p>
<p>The given property may also make use of <code>_orm.PropComparator.of_type</code>
to indicate the left side of the criteria:</p>
<pre class="rst-literal-block">
a1 = aliased(Address)
a2 = aliased(Address)
stmt = select(a1, a2).where(
    with_parent(u1, User.addresses.of_type(a2))
)
</pre>
<p>The above use is equivalent to using the
<code>_orm.with_parent.from_entity</code> argument:</p>
<pre class="rst-literal-block">
a1 = aliased(Address)
a2 = aliased(Address)
stmt = select(a1, a2).where(
    with_parent(u1, User.addresses, from_entity=a2)
)
</pre>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">instance</span></td><td class="fieldArgDesc">An instance which has some <code>_orm.relationship</code>.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">prop</span></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">from​_entity</span></td><td class="fieldArgDesc"><p>Entity in which to consider as the left side.  This defaults to the
"zero" entity of the <code>_query.Query</code> itself.</p>
<div class="rst-versionadded">
<span class="rst-versionmodified rst-added">New in version 1.2.</span></div>
</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">property</span></td><td class="fieldArgDesc"><p>String property name, or class-bound attribute, which indicates
what relationship from the instance should be used to reconcile the
parent/child relationship.</p>
<div class="rst-deprecated">
<span class="rst-versionmodified rst-deprecated">Deprecated since version 1.4: </span><span>Using strings is deprecated and will be removed
in SQLAlchemy 2.0.  Please use the class-bound attribute directly.</span></div>
</td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="sqlalchemy.orm.util.with_polymorphic">
    
  </a>
  <a name="with_polymorphic">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">with_polymorphic</span>(base, classes, selectable=<a href="https://docs.python.org/3/library/constants.html#False" class="intersphinx-link">False</a>, flat=<a href="https://docs.python.org/3/library/constants.html#False" class="intersphinx-link">False</a>, polymorphic_on=<a href="https://docs.python.org/3/library/constants.html#None" class="intersphinx-link">None</a>, aliased=<a href="https://docs.python.org/3/library/constants.html#False" class="intersphinx-link">False</a>, innerjoin=<a href="https://docs.python.org/3/library/constants.html#False" class="intersphinx-link">False</a>, _use_mapper_path=<a href="https://docs.python.org/3/library/constants.html#False" class="intersphinx-link">False</a>, _existing_alias=<a href="https://docs.python.org/3/library/constants.html#None" class="intersphinx-link">None</a>):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/orm/util.py#L1334">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Produce an <code>.AliasedClass</code> construct which specifies
columns for descendant mappers of the given base.</p>
<p>Using this method will ensure that each descendant mapper's
tables are included in the FROM clause, and will allow filter()
criterion to be used against those tables.  The resulting
instances will also have those columns already loaded so that
no "post fetch" of those columns will be required.</p>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p class="rst-last"><a href="#system-message-1"><span class="rst-problematic" id="rst-problematic-1">:ref:`with_polymorphic`</span></a> - full discussion of
<code>_orm.with_polymorphic</code>.</p>
</div>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">base</span></td><td class="fieldArgDesc">Base class to be aliased.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">classes</span></td><td class="fieldArgDesc">a single class or mapper, or list of
class/mappers, which inherit from the base class.
Alternatively, it may also be the string <tt class="rst-docutils literal">'*'</tt>, in which case
all descending mapped classes will be added to the FROM clause.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">selectable</span></td><td class="fieldArgDesc"><p>a table or subquery that will
be used in place of the generated FROM clause. This argument is
required if any of the desired classes use concrete table
inheritance, since SQLAlchemy currently cannot generate UNIONs
among tables automatically. If used, the <tt class="rst-docutils literal">selectable</tt> argument
must represent the full set of tables and columns mapped by every
mapped class. Otherwise, the unaccounted mapped columns will
result in their table being appended directly to the FROM clause
which will usually lead to incorrect results.</p>
<p>When left at its default value of <tt class="rst-docutils literal">False</tt>, the polymorphic
selectable assigned to the base mapper is used for selecting rows.
However, it may also be passed as <tt class="rst-docutils literal">None</tt>, which will bypass the
configured polymorphic selectable and instead construct an ad-hoc
selectable for the target classes given; for joined table inheritance
this will be a join that includes all target mappers and their
subclasses.</p>
</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">flat</span></td><td class="fieldArgDesc">Boolean, will be passed through to the
<code>_expression.FromClause.alias</code> call so that aliases of
<code>_expression.Join</code> objects will alias the individual tables
inside the join, rather than creating a subquery.  This is generally
supported by all modern databases with regards to right-nested joins
and generally produces more efficient queries.  Setting this flag is
recommended as long as the resulting SQL is functional.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">polymorphic​_on</span></td><td class="fieldArgDesc">a column to be used as the "discriminator"
column for the given selectable. If not given, the polymorphic_on
attribute of the base classes' mapper will be used, if any. This
is useful for mappings that don't have polymorphic loading
behavior by default.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">aliased</span></td><td class="fieldArgDesc">when True, the selectable will be aliased.   For a
JOIN, this means the JOIN will be SELECTed from inside of a subquery
unless the <a href="#system-message-2"><span class="rst-problematic" id="rst-problematic-2">:paramref:`_orm.with_polymorphic.flat`</span></a> flag is set to
True, which is recommended for simpler use cases.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">innerjoin</span></td><td class="fieldArgDesc">if True, an INNER JOIN will be used.  This should
only be specified if querying for one specific subtype only</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">​_use​_mapper​_path</span></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">​_existing​_alias</span></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basevariable">
  
  
  <a name="sqlalchemy.orm.util.all_cascades">
    
  </a>
  <a name="all_cascades">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">all_cascades</span> =
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/orm/util.py#L50">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div><div class="basefunction private">
  
  
  <a name="sqlalchemy.orm.util._entity_corresponds_to">
    
  </a>
  <a name="_entity_corresponds_to">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_entity_corresponds_to</span>(given, entity):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/orm/util.py#L1949">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div>determine if 'given' corresponds to 'entity', in terms
of an entity passed to Query that would match the same entity
being referred to elsewhere in the query.</div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="sqlalchemy.orm.util._entity_corresponds_to_use_path_impl">
    
  </a>
  <a name="_entity_corresponds_to_use_path_impl">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_entity_corresponds_to_use_path_impl</span>(given, entity):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/orm/util.py#L1969">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>determine if 'given' corresponds to 'entity', in terms
of a path of loader options where a mapped attribute is taken to
be a member of a parent entity.</p>
<p>e.g.:</p>
<pre class="rst-literal-block">
someoption(A).someoption(A.b)  # -&gt; fn(A, A) -&gt; True
someoption(A).someoption(C.d)  # -&gt; fn(A, C) -&gt; False

a1 = aliased(A)
someoption(a1).someoption(A.b) # -&gt; fn(a1, A) -&gt; False
someoption(a1).someoption(a1.b) # -&gt; fn(a1, a1) -&gt; True

wp = with_polymorphic(A, [A1, A2])
someoption(wp).someoption(A1.foo)  # -&gt; fn(wp, A1) -&gt; False
someoption(wp).someoption(wp.A1.foo)  # -&gt; fn(wp, wp.A1) -&gt; True
</pre>
</div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="sqlalchemy.orm.util._entity_isa">
    
  </a>
  <a name="_entity_isa">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_entity_isa</span>(given, mapper):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/orm/util.py#L2004">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div>determine if 'given' "is a" mapper, in terms of the given
would load rows of type 'mapper'.</div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="sqlalchemy.orm.util._getitem">
    
  </a>
  <a name="_getitem">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_getitem</span>(iterable_query, item, allow_negative):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/orm/util.py#L2055">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div>calculate __getitem__ in terms of an iterable query object
that also has a slice() method.</div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="sqlalchemy.orm.util._orm_annotate">
    
  </a>
  <a name="_orm_annotate">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_orm_annotate</span>(element, exclude=<a href="https://docs.python.org/3/library/constants.html#None" class="intersphinx-link">None</a>):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/orm/util.py#L1616">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Deep copy the given ClauseElement, annotating each element with the
"_orm_adapt" flag.</p>
<p>Elements within the exclude collection will be cloned but not annotated.</p>
</div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="sqlalchemy.orm.util._orm_deannotate">
    
  </a>
  <a name="_orm_deannotate">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_orm_deannotate</span>(element):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/orm/util.py#L1626">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Remove annotations that link a column to a particular mapping.</p>
<p>Note this doesn't affect "remote" and "foreign" annotations
passed by the <code>_orm.foreign</code> and <code>_orm.remote</code>
annotators.</p>
</div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="sqlalchemy.orm.util._orm_full_deannotate">
    
  </a>
  <a name="_orm_full_deannotate">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_orm_full_deannotate</span>(element):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/orm/util.py#L1640">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="sqlalchemy.orm.util._validator_events">
    
  </a>
  <a name="_validator_events">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_validator_events</span>(desc, key, validator, include_removes, include_backrefs):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/orm/util.py#L130">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div>Runs a validation method on an attribute value to be set or
appended.</div>
  </div>
</div>

      </div>
    </div>

    <footer class="navbar navbar-default">
  
  <div class="container">
    <a href="index.html">API Documentation</a> for sqlalchemy,
  generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a>
    22.2.0 at 2022-02-23 08:22:50.
  </div>
</footer>

    <script src="pydoctor.js" type="text/javascript"></script>

  </body>
</html>