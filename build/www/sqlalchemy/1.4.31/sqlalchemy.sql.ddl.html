<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  

  <head>
    
    <title>sqlalchemy.sql.ddl</title>
    <meta name="generator" content="pydoctor 22.2.0"> 
        
    </meta>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=0.75" />
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="apidocs.css" />
    <link rel="stylesheet" type="text/css" href="extra.css" />
</head>

  <body>

    <div id="banner" class="container">    
    <div>
        <a href="https://pydocbrowser.github.io/">Home</a>
        &gt; sqlalchemy-1.4.31 
        <!-- This is an important placeholder and will be 
            replaced by project name and version on building docs -->
        
        <!-- (<a href=""&gt;show all versions</a&gt;) -->
    </div>
</div>

    <nav class="navbar navbar-default">
  
  <div class="container">

    <div class="navbar-header">
      
      <div class="navlinks">
          <span class="navbar-brand">
            sqlalchemy <a href="index.html">API Documentation</a>
          </span>

          <a href="moduleIndex.html">
            Modules
          </a>

          <a href="classIndex.html">
            Classes
          </a>

          <a href="nameIndex.html">
            Names
          </a>
      </div>

    </div>
  </div>
</nav>

    

    <div class="container">

      <div class="page-header">
        <h1 class="module"><code><code><a href="index.html" class="internal-link">sqlalchemy</a></code><wbr></wbr>.<code><a href="sqlalchemy.sql.html" class="internal-link" title="sqlalchemy.sql">sql</a></code><wbr></wbr>.<code><a href="sqlalchemy.sql.ddl.html" class="internal-link" title="sqlalchemy.sql.ddl">ddl</a></code></code></h1>
        <div id="showPrivate">
          <button class="btn btn-link" onclick="togglePrivate()">Toggle Private API</button>
        </div>
      </div>

      <div class="categoryHeader">
        module documentation
      </div>

      <div class="extrasDocstring">
        <a href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/sql/ddl.py" class="sourceLink">(source)</a>
        <p></p>
      </div>

      <div class="moduleDocstring">
        <div>Provides the hierarchy of DDL-defining schema items as well as routines
to invoke them for a create/drop call.</div>
      </div>

      <div id="splitTables">
        <table class="children sortable" id="id21620">
  
  
  <tr class="class">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.sql.ddl.AddConstraint.html" class="internal-link" title="sqlalchemy.sql.ddl.AddConstraint">​Add​Constraint</a></code></td>
    <td>Represent an ALTER TABLE ADD CONSTRAINT statement.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.sql.ddl.CreateColumn.html" class="internal-link" title="sqlalchemy.sql.ddl.CreateColumn">​Create​Column</a></code></td>
    <td>Represent a <code>_schema.Column</code> as rendered in a CREATE TABLE statement, via the <code>.CreateTable</code> construct.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.sql.ddl.CreateIndex.html" class="internal-link" title="sqlalchemy.sql.ddl.CreateIndex">​Create​Index</a></code></td>
    <td>Represent a CREATE INDEX statement.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.sql.ddl.CreateSchema.html" class="internal-link" title="sqlalchemy.sql.ddl.CreateSchema">​Create​Schema</a></code></td>
    <td>Represent a CREATE SCHEMA statement.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.sql.ddl.CreateSequence.html" class="internal-link" title="sqlalchemy.sql.ddl.CreateSequence">​Create​Sequence</a></code></td>
    <td>Represent a CREATE SEQUENCE statement.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.sql.ddl.CreateTable.html" class="internal-link" title="sqlalchemy.sql.ddl.CreateTable">​Create​Table</a></code></td>
    <td>Represent a CREATE TABLE statement.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.sql.ddl.DDL.html" class="internal-link" title="sqlalchemy.sql.ddl.DDL">DDL</a></code></td>
    <td>A literal DDL statement.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.sql.ddl.DDLBase.html" class="internal-link" title="sqlalchemy.sql.ddl.DDLBase">​DDLBase</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.sql.ddl.DDLElement.html" class="internal-link" title="sqlalchemy.sql.ddl.DDLElement">​DDLElement</a></code></td>
    <td>Base class for DDL expression constructs.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.sql.ddl.DropColumnComment.html" class="internal-link" title="sqlalchemy.sql.ddl.DropColumnComment">​Drop​Column​Comment</a></code></td>
    <td>Represent a COMMENT ON COLUMN IS NULL statement.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.sql.ddl.DropConstraint.html" class="internal-link" title="sqlalchemy.sql.ddl.DropConstraint">​Drop​Constraint</a></code></td>
    <td>Represent an ALTER TABLE DROP CONSTRAINT statement.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.sql.ddl.DropIndex.html" class="internal-link" title="sqlalchemy.sql.ddl.DropIndex">​Drop​Index</a></code></td>
    <td>Represent a DROP INDEX statement.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.sql.ddl.DropSchema.html" class="internal-link" title="sqlalchemy.sql.ddl.DropSchema">​Drop​Schema</a></code></td>
    <td>Represent a DROP SCHEMA statement.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.sql.ddl.DropSequence.html" class="internal-link" title="sqlalchemy.sql.ddl.DropSequence">​Drop​Sequence</a></code></td>
    <td>Represent a DROP SEQUENCE statement.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.sql.ddl.DropTable.html" class="internal-link" title="sqlalchemy.sql.ddl.DropTable">​Drop​Table</a></code></td>
    <td>Represent a DROP TABLE statement.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.sql.ddl.DropTableComment.html" class="internal-link" title="sqlalchemy.sql.ddl.DropTableComment">​Drop​Table​Comment</a></code></td>
    <td>Represent a COMMENT ON TABLE '' statement.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.sql.ddl.SchemaDropper.html" class="internal-link" title="sqlalchemy.sql.ddl.SchemaDropper">​Schema​Dropper</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.sql.ddl.SchemaGenerator.html" class="internal-link" title="sqlalchemy.sql.ddl.SchemaGenerator">​Schema​Generator</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.sql.ddl.SetColumnComment.html" class="internal-link" title="sqlalchemy.sql.ddl.SetColumnComment">​Set​Column​Comment</a></code></td>
    <td>Represent a COMMENT ON COLUMN IS statement.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.sql.ddl.SetTableComment.html" class="internal-link" title="sqlalchemy.sql.ddl.SetTableComment">​Set​Table​Comment</a></code></td>
    <td>Represent a COMMENT ON TABLE IS statement.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#sort_tables" class="internal-link" title="sqlalchemy.sql.ddl.sort_tables">sort​_tables</a></code></td>
    <td>Sort a collection of <code>_schema.Table</code> objects based on dependency.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#sort_tables_and_constraints" class="internal-link" title="sqlalchemy.sql.ddl.sort_tables_and_constraints">sort​_tables​_and​_constraints</a></code></td>
    <td>Sort a collection of <code>_schema.Table</code>  / <code>_schema.ForeignKeyConstraint</code> objects.</td>
  </tr><tr class="class private">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.sql.ddl._CreateDropBase.html" class="internal-link" title="sqlalchemy.sql.ddl._CreateDropBase">_​Create​Drop​Base</a></code></td>
    <td>Base class for DDL constructs that represent CREATE and DROP or equivalents.</td>
  </tr><tr class="class private">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.sql.ddl._DDLCompiles.html" class="internal-link" title="sqlalchemy.sql.ddl._DDLCompiles">_​DDLCompiles</a></code></td>
    <td><span class="undocumented">No class docstring; 1/1 class variable, 1/2 method documented</span></td>
  </tr><tr class="class private">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.sql.ddl._DropView.html" class="internal-link" title="sqlalchemy.sql.ddl._DropView">_​Drop​View</a></code></td>
    <td>Semi-public 'DROP VIEW' construct.</td>
  </tr>
</table>
        

          
      </div>

      <div id="childList">

        <div class="basefunction">
  
  
  <a name="sqlalchemy.sql.ddl.sort_tables">
    
  </a>
  <a name="sort_tables">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">sort_tables</span>(tables, skip_fn=<a href="https://docs.python.org/3/library/constants.html#None" class="intersphinx-link">None</a>, extra_dependencies=<a href="https://docs.python.org/3/library/constants.html#None" class="intersphinx-link">None</a>):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/sql/ddl.py#L1134">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Sort a collection of <code>_schema.Table</code> objects based on
dependency.</p>
<p>This is a dependency-ordered sort which will emit <code>_schema.Table</code>
objects such that they will follow their dependent <code>_schema.Table</code>
objects.
Tables are dependent on another based on the presence of
<code>_schema.ForeignKeyConstraint</code>
objects as well as explicit dependencies
added by <code>_schema.Table.add_is_dependent_on</code>.</p>
<div class="rst-admonition warning">
<p class="rst-first rst-admonition-title">Warning</p>
<p>The <code>._schema.sort_tables</code> function cannot by itself
accommodate automatic resolution of dependency cycles between
tables, which are usually caused by mutually dependent foreign key
constraints. When these cycles are detected, the foreign keys
of these tables are omitted from consideration in the sort.
A warning is emitted when this condition occurs, which will be an
exception raise in a future release.   Tables which are not part
of the cycle will still be returned in dependency order.</p>
<p>To resolve these cycles, the
<a href="#system-message-1"><span class="rst-problematic" id="rst-problematic-1">:paramref:`_schema.ForeignKeyConstraint.use_alter`</span></a> parameter may be
applied to those constraints which create a cycle.  Alternatively,
the <code>_schema.sort_tables_and_constraints</code> function will
automatically return foreign key constraints in a separate
collection when cycles are detected so that they may be applied
to a schema separately.</p>
<div class="rst-last rst-versionchanged">
<span class="rst-versionmodified rst-changed">Changed in version 1.3.17: </span><span>- a warning is emitted when
<code>_schema.sort_tables</code> cannot perform a proper sort due to
cyclical dependencies.  This will be an exception in a future
release.  Additionally, the sort will continue to return
other tables not involved in the cycle in dependency order
which was not the case previously.</span></div>
</div>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p><code>.sort_tables_and_constraints</code></p>
<p class="rst-last"><code>_schema.MetaData.sorted_tables</code> - uses this function to sort</p>
</div>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">tables</span></td><td class="fieldArgDesc">a sequence of <code>_schema.Table</code> objects.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">skip​_fn</span></td><td class="fieldArgDesc">optional callable which will be passed a
<code>_schema.ForeignKey</code> object; if it returns True, this
constraint will not be considered as a dependency.  Note this is
<strong>different</strong> from the same parameter in
<code>.sort_tables_and_constraints</code>, which is
instead passed the owning <code>_schema.ForeignKeyConstraint</code> object.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">extra​_dependencies</span></td><td class="fieldArgDesc">a sequence of 2-tuples of tables which will
also be considered as dependent on each other.</td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="sqlalchemy.sql.ddl.sort_tables_and_constraints">
    
  </a>
  <a name="sort_tables_and_constraints">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">sort_tables_and_constraints</span>(tables, filter_fn=<a href="https://docs.python.org/3/library/constants.html#None" class="intersphinx-link">None</a>, extra_dependencies=<a href="https://docs.python.org/3/library/constants.html#None" class="intersphinx-link">None</a>, _warn_for_cycles=<a href="https://docs.python.org/3/library/constants.html#False" class="intersphinx-link">False</a>):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/sql/ddl.py#L1221">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Sort a collection of <code>_schema.Table</code>  /
<code>_schema.ForeignKeyConstraint</code>
objects.</p>
<p>This is a dependency-ordered sort which will emit tuples of
<tt class="rst-docutils literal">(Table, [ForeignKeyConstraint, <span class="pre">...])</span></tt> such that each
<code>_schema.Table</code> follows its dependent <code>_schema.Table</code>
objects.
Remaining <code>_schema.ForeignKeyConstraint</code>
objects that are separate due to
dependency rules not satisfied by the sort are emitted afterwards
as <tt class="rst-docutils literal">(None, [ForeignKeyConstraint <span class="pre">...])</span></tt>.</p>
<p>Tables are dependent on another based on the presence of
<code>_schema.ForeignKeyConstraint</code> objects, explicit dependencies
added by <code>_schema.Table.add_is_dependent_on</code>,
as well as dependencies
stated here using the <a href="#system-message-1"><span class="rst-problematic" id="rst-problematic-1">:paramref:`~.sort_tables_and_constraints.skip_fn`</span></a>
and/or <a href="#system-message-2"><span class="rst-problematic" id="rst-problematic-2">:paramref:`~.sort_tables_and_constraints.extra_dependencies`</span></a>
parameters.</p>
<div class="rst-versionadded">
<span class="rst-versionmodified rst-added">New in version 1.0.0.</span></div>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p class="rst-last"><code>.sort_tables</code></p>
</div>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">tables</span></td><td class="fieldArgDesc">a sequence of <code>_schema.Table</code> objects.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">filter​_fn</span></td><td class="fieldArgDesc">optional callable which will be passed a
<code>_schema.ForeignKeyConstraint</code> object,
and returns a value based on
whether this constraint should definitely be included or excluded as
an inline constraint, or neither.   If it returns False, the constraint
will definitely be included as a dependency that cannot be subject
to ALTER; if True, it will <strong>only</strong> be included as an ALTER result at
the end.   Returning None means the constraint is included in the
table-based result unless it is detected as part of a dependency cycle.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">extra​_dependencies</span></td><td class="fieldArgDesc">a sequence of 2-tuples of tables which will
also be considered as dependent on each other.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">​_warn​_for​_cycles</span></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div>

      </div>
    </div>

    <footer class="navbar navbar-default">
  
  <div class="container">
    <a href="index.html">API Documentation</a> for sqlalchemy,
  generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a>
    22.2.0 at 2022-02-23 08:22:50.
  </div>
</footer>

    <script src="pydoctor.js" type="text/javascript"></script>

  </body>
</html>