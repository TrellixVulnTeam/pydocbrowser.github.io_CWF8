<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  

  <head>
    
    <title>flask.ctx</title>
    <meta name="generator" content="pydoctor 22.2.0"> 
        
    </meta>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=0.75" />
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="apidocs.css" />
    <link rel="stylesheet" type="text/css" href="extra.css" />
</head>

  <body>

    <div id="banner" class="container">    
    <div>
        <a href="https://pydocbrowser.github.io/">Home</a>
        &gt; flask-2.0.3 
        <!-- This is an important placeholder and will be 
            replaced by project name and version on building docs -->
        
        <!-- (<a href=""&gt;show all versions</a&gt;) -->
    </div>
</div>

    <nav class="navbar navbar-default">
  
  <div class="container">

    <div class="navbar-header">
      
      <div class="navlinks">
          <span class="navbar-brand">
            flask <a href="index.html">API Documentation</a>
          </span>

          <a href="moduleIndex.html">
            Modules
          </a>

          <a href="classIndex.html">
            Classes
          </a>

          <a href="nameIndex.html">
            Names
          </a>
      </div>

    </div>
  </div>
</nav>

    

    <div class="container">

      <div class="page-header">
        <h1 class="module"><code><code><a href="index.html" class="internal-link">flask</a></code><wbr></wbr>.<code><a href="flask.ctx.html" class="internal-link" title="flask.ctx">ctx</a></code></code></h1>
        <div id="showPrivate">
          <button class="btn btn-link" onclick="togglePrivate()">Toggle Private API</button>
        </div>
      </div>

      <div class="categoryHeader">
        module documentation
      </div>

      <div class="extrasDocstring">
        <a href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/flask-2.0.3//src/flask/ctx.py" class="sourceLink">(source)</a>
        <p></p>
      </div>

      <div class="moduleDocstring">
        <div><p class="undocumented">Undocumented</p></div>
      </div>

      <div id="splitTables">
        <table class="children sortable" id="id10297">
  
  
  <tr class="class">
    
    <td>Class</td>
    <td><code><a href="flask.ctx.AppContext.html" class="internal-link" title="flask.ctx.AppContext">​App​Context</a></code></td>
    <td><span class="undocumented">No summary</span></td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="flask.ctx.RequestContext.html" class="internal-link" title="flask.ctx.RequestContext">​Request​Context</a></code></td>
    <td><span class="undocumented">No summary</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#after_this_request" class="internal-link" title="flask.ctx.after_this_request">after​_this​_request</a></code></td>
    <td>Executes a function after this request.  This is useful to modify response objects.  The function is passed the response object and has to return the same or a new one.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#copy_current_request_context" class="internal-link" title="flask.ctx.copy_current_request_context">copy​_current​_request​_context</a></code></td>
    <td><span class="undocumented">No summary</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#has_app_context" class="internal-link" title="flask.ctx.has_app_context">has​_app​_context</a></code></td>
    <td>Works like <code><a href="#has_request_context" class="internal-link" title="flask.ctx.has_request_context">has_request_context</a></code> but for the application context.  You can also just do a boolean check on the <code><a href="flask.globals.html#current_app" class="internal-link" title="flask.globals.current_app">current_app</a></code> object instead.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#has_request_context" class="internal-link" title="flask.ctx.has_request_context">has​_request​_context</a></code></td>
    <td><span class="undocumented">No summary</span></td>
  </tr><tr class="class private">
    
    <td>Class</td>
    <td><code><a href="flask.ctx._AppCtxGlobals.html" class="internal-link" title="flask.ctx._AppCtxGlobals">_​App​Ctx​Globals</a></code></td>
    <td>A plain object. Used as a namespace for storing data during an application context.</td>
  </tr><tr class="variable private">
    
    <td>Variable</td>
    <td><code><a href="#_sentinel" class="internal-link" title="flask.ctx._sentinel">​_sentinel</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr>
</table>
        

          
      </div>

      <div id="childList">

        <div class="basefunction">
  
  
  <a name="flask.ctx.after_this_request">
    
  </a>
  <a name="after_this_request">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">after_this_request</span>(f):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/flask-2.0.3//src/flask/ctx.py#L112">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Executes a function after this request.  This is useful to modify
response objects.  The function is passed the response object and has
to return the same or a new one.</p>
<p>Example:</p>
<pre class="rst-literal-block">
@app.route('/')
def index():
    @after_this_request
    def add_header(response):
        response.headers['X-Foo'] = 'Parachute'
        return response
    return 'Hello World!'
</pre>
<p>This is more useful if a function other than the view function wants to
modify a response.  For instance think of a decorator that wants to add
some headers without converting the return value into a response object.</p>
<div class="rst-versionadded">
<span class="rst-versionmodified rst-added">New in version 0.9.</span></div>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">f:</span><code><a href="flask.typing.html#AfterRequestCallable" class="internal-link" title="flask.typing.AfterRequestCallable">AfterRequestCallable</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code><a href="flask.typing.html#AfterRequestCallable" class="internal-link" title="flask.typing.AfterRequestCallable">AfterRequestCallable</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="flask.ctx.copy_current_request_context">
    
  </a>
  <a name="copy_current_request_context">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">copy_current_request_context</span>(f):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/flask-2.0.3//src/flask/ctx.py#L145">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>A helper function that decorates a function to retain the current
request context.  This is useful when working with greenlets.  The moment
the function is decorated a copy of the request context is created and
then pushed when the function is called.  The current session is also
included in the copied request context.</p>
<p>Example:</p>
<pre class="rst-literal-block">
import gevent
from flask import copy_current_request_context

@app.route('/')
def index():
    @copy_current_request_context
    def do_some_work():
        # do some work here, it can access flask.request or
        # flask.session like you would otherwise in the view function.
        ...
    gevent.spawn(do_some_work)
    return 'Regular response'
</pre>
<div class="rst-versionadded">
<span class="rst-versionmodified rst-added">New in version 0.10.</span></div>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">f:</span><code><a href="https://docs.python.org/3/library/typing.html#typing.Callable" class="intersphinx-link">t.Callable</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code><a href="https://docs.python.org/3/library/typing.html#typing.Callable" class="intersphinx-link">t.Callable</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="flask.ctx.has_app_context">
    
  </a>
  <a name="has_app_context">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">has_app_context</span>():
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/flask-2.0.3//src/flask/ctx.py#L218">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Works like <code><a href="#has_request_context" class="internal-link" title="flask.ctx.has_request_context">has_request_context</a></code> but for the application
context.  You can also just do a boolean check on the
<code><a href="flask.globals.html#current_app" class="internal-link" title="flask.globals.current_app">current_app</a></code> object instead.</p>
<div class="rst-versionadded">
<span class="rst-versionmodified rst-added">New in version 0.9.</span></div>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code><a href="https://docs.python.org/3/library/functions.html#bool" class="intersphinx-link">bool</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="flask.ctx.has_request_context">
    
  </a>
  <a name="has_request_context">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">has_request_context</span>():
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/flask-2.0.3//src/flask/ctx.py#L186">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>If you have code that wants to test if a request context is there or
not this function can be used.  For instance, you may want to take advantage
of request information if the request object is available, but fail
silently if it is unavailable.</p>
<pre class="rst-literal-block">
class User(db.Model):

    def __init__(self, username, remote_addr=None):
        self.username = username
        if remote_addr is None and has_request_context():
            remote_addr = request.remote_addr
        self.remote_addr = remote_addr
</pre>
<p>Alternatively you can also just test any of the context bound objects
(such as <code><a href="flask.globals.html#request" class="internal-link" title="flask.globals.request">request</a></code> or <code><a href="flask.globals.html#g" class="internal-link" title="flask.globals.g">g</a></code>) for truthness:</p>
<pre class="rst-literal-block">
class User(db.Model):

    def __init__(self, username, remote_addr=None):
        self.username = username
        if remote_addr is None and request:
            remote_addr = request.remote_addr
        self.remote_addr = remote_addr
</pre>
<div class="rst-versionadded">
<span class="rst-versionmodified rst-added">New in version 0.7.</span></div>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code><a href="https://docs.python.org/3/library/functions.html#bool" class="intersphinx-link">bool</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basevariable private">
  
  
  <a name="flask.ctx._sentinel">
    
  </a>
  <a name="_sentinel">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_sentinel</span> =
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/flask-2.0.3//src/flask/ctx.py#L21">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div>

      </div>
    </div>

    <footer class="navbar navbar-default">
  
  <div class="container">
    <a href="index.html">API Documentation</a> for flask,
  generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a>
    22.2.0 at 2022-02-23 08:14:52.
  </div>
</footer>

    <script src="pydoctor.js" type="text/javascript"></script>

  </body>
</html>