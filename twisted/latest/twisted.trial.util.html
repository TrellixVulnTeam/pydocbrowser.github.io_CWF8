<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  

  <head>
    
    <title>twisted.trial.util</title>
    <meta name="generator" content="pydoctor 22.2.0"> 
        
    </meta>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=0.75" />
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="apidocs.css" />
    <link rel="stylesheet" type="text/css" href="extra.css" />
</head>

  <body>

    <div id="banner">    
    <div>
        <a href="/">Home</a>
        &gt; twisted-22.1.0 <!-- This is a placeholder -->
        
        <!-- (<a href=""&gt;show all versions</a&gt;) -->
    </div>
</div>

    <nav class="navbar navbar-default">
  
  <div class="container">

    <div class="navbar-header">
      
      <div class="navlinks">
          <span class="navbar-brand">
            twisted <a href="index.html">API Documentation</a>
          </span>

          <a href="moduleIndex.html">
            Modules
          </a>

          <a href="classIndex.html">
            Classes
          </a>

          <a href="nameIndex.html">
            Names
          </a>
      </div>

    </div>
  </div>
</nav>

    

    <div class="container">

      <div class="page-header">
        <h1 class="module"><code><code><a href="index.html" class="internal-link">twisted</a></code><wbr></wbr>.<code><a href="twisted.trial.html" class="internal-link" title="twisted.trial">trial</a></code><wbr></wbr>.<code><a href="twisted.trial.util.html" class="internal-link" title="twisted.trial.util">util</a></code></code></h1>
        <div id="showPrivate">
          <button class="btn btn-link" onclick="togglePrivate()">Toggle Private API</button>
        </div>
      </div>

      <div class="categoryHeader">
        module documentation
      </div>

      <div class="extrasDocstring">
        <a href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/twisted-22.1.0//src/twisted/trial/util.py" class="sourceLink">(source)</a>
        <p></p>
      </div>

      <div class="moduleDocstring">
        <div><p>A collection of utility functions and classes, used internally by Trial.</p>
<p>This code is for Trial's internal use.  Do NOT use this code if you are writing
tests.  It is subject to change at the Trial maintainer's whim.  There is
nothing here in this module for you to use unless you are maintaining Trial.</p>
<p>Any non-Trial Twisted code that uses this module will be shot.</p>
<p>Maintainer: Jonathan Lange</p>
<dl class="rst-docutils">
<dt>@var DEFAULT_TIMEOUT_DURATION: The default timeout which will be applied to</dt>
<dd>asynchronous (ie, Deferred-returning) test methods, in seconds.</dd>
</dl>
</div>
      </div>

      <div id="splitTables">
        <table class="children sortable" id="id11826">
  
  
  <tr class="class">
    
    <td>Class</td>
    <td><code><a href="twisted.trial.util.DirtyReactorAggregateError.html" class="internal-link" title="twisted.trial.util.DirtyReactorAggregateError">​Dirty​Reactor​Aggregate​Error</a></code></td>
    <td>Passed to L{twisted.trial.itrial.IReporter.addError} when the reactor is left in an unclean state after a test.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#acquireAttribute" class="internal-link" title="twisted.trial.util.acquireAttribute">acquire​Attribute</a></code></td>
    <td>Go through the list 'objects' sequentially until we find one which has attribute 'attr', then return the value of that attribute.  If not found, return 'default' if set, otherwise, raise AttributeError.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#excInfoOrFailureToExcInfo" class="internal-link" title="twisted.trial.util.excInfoOrFailureToExcInfo">exc​Info​Or​Failure​To​Exc​Info</a></code></td>
    <td>Coerce a Failure to an _exc_info, if err is a Failure.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#profiled" class="internal-link" title="twisted.trial.util.profiled">profiled</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#suppress" class="internal-link" title="twisted.trial.util.suppress">suppress</a></code></td>
    <td>Sets up the .suppress tuple properly, pass options to this method as you would the stdlib warnings.filterwarnings()</td>
  </tr><tr class="constant">
    
    <td>Constant</td>
    <td><code><a href="#DEFAULT_TIMEOUT" class="internal-link" title="twisted.trial.util.DEFAULT_TIMEOUT">DEFAULT​_TIMEOUT</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="constant">
    
    <td>Constant</td>
    <td><code><a href="#DEFAULT_TIMEOUT_DURATION" class="internal-link" title="twisted.trial.util.DEFAULT_TIMEOUT_DURATION">DEFAULT​_TIMEOUT​_DURATION</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="class private">
    
    <td>Class</td>
    <td><code><a href="twisted.trial.util._Janitor.html" class="internal-link" title="twisted.trial.util._Janitor">_​Janitor</a></code></td>
    <td>The guy that cleans up after you.</td>
  </tr><tr class="class private">
    
    <td>Class</td>
    <td><code><a href="twisted.trial.util._NoTrialMarker.html" class="internal-link" title="twisted.trial.util._NoTrialMarker">_​No​Trial​Marker</a></code></td>
    <td>No trial marker file could be found.</td>
  </tr><tr class="class private">
    
    <td>Class</td>
    <td><code><a href="twisted.trial.util._WorkingDirectoryBusy.html" class="internal-link" title="twisted.trial.util._WorkingDirectoryBusy">_​Working​Directory​Busy</a></code></td>
    <td>A working directory was specified to the runner, but another test run is currently using that directory.</td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_listToPhrase" class="internal-link" title="twisted.trial.util._listToPhrase">_list​To​Phrase</a></code></td>
    <td>Produce a string containing each thing in C{things}, separated by a C{delimiter}, with the last couple being separated by C{finalDelimiter}</td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_removeSafely" class="internal-link" title="twisted.trial.util._removeSafely">_remove​Safely</a></code></td>
    <td>Safely remove a path, recursively.</td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_unusedTestDirectory" class="internal-link" title="twisted.trial.util._unusedTestDirectory">_unused​Test​Directory</a></code></td>
    <td>Find an unused directory named similarly to C{base}.</td>
  </tr><tr class="constant private">
    
    <td>Constant</td>
    <td><code><a href="#_DEFAULT" class="internal-link" title="twisted.trial.util._DEFAULT">​_DEFAULT</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr>
</table>
        

          
      </div>

      <div id="childList">

        <div class="basefunction">
  
  
  <a name="twisted.trial.util.acquireAttribute">
    
  </a>
  <a name="acquireAttribute">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">acquireAttribute</span>(objects, attr, default=<a href="#_DEFAULT" class="internal-link" title="twisted.trial.util._DEFAULT">_DEFAULT</a>):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/twisted-22.1.0//src/twisted/trial/util.py#L186">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div>Go through the list 'objects' sequentially until we find one which has
attribute 'attr', then return the value of that attribute.  If not found,
return 'default' if set, otherwise, raise AttributeError.</div>
  </div>
</div><div class="basefunction">
  
  
  <a name="twisted.trial.util.excInfoOrFailureToExcInfo">
    
  </a>
  <a name="excInfoOrFailureToExcInfo">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">excInfoOrFailureToExcInfo</span>(err):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/twisted-22.1.0//src/twisted/trial/util.py#L200">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Coerce a Failure to an _exc_info, if err is a Failure.</p>
<dl class="rst-docutils">
<dt>@param err: Either a tuple such as returned by L{sys.exc_info} or a</dt>
<dd>L{Failure} object.</dd>
<dt>@return: A tuple like the one returned by L{sys.exc_info}. e.g.</dt>
<dd>C{exception_type, exception_object, traceback_object}.</dd>
</dl>
</div>
  </div>
</div><div class="basefunction">
  
  
  <a name="twisted.trial.util.profiled">
    
  </a>
  <a name="profiled">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">profiled</span>(f, outputFile):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/twisted-22.1.0//src/twisted/trial/util.py#L243">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="twisted.trial.util.suppress">
    
  </a>
  <a name="suppress">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">suppress</span>(action=<span class="rst-variable-quote">'</span><span class="rst-variable-string">ignore</span><span class="rst-variable-quote">'</span>, **kwarg):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/twisted-22.1.0//src/twisted/trial/util.py#L215">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Sets up the .suppress tuple properly, pass options to this method as you
would the stdlib warnings.filterwarnings()</p>
<p>So, to use this with a .suppress magic attribute you would do the
following:</p>
<blockquote>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">from</span> twisted.trial <span class="py-keyword">import</span> unittest, util
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">import</span> warnings
<span class="py-prompt">&gt;&gt;&gt;</span>
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">class</span> <span class="py-defname">TestFoo</span>(unittest.TestCase):
<span class="py-more">... </span>    <span class="py-keyword">def</span> <span class="py-defname">testFooBar</span>(self):
<span class="py-more">... </span>        warnings.warn(<span class="py-string">"i am deprecated"</span>, <span class="py-builtin">DeprecationWarning</span>)
<span class="py-more">... </span>    testFooBar.suppress = [util.suppress(message=<span class="py-string">'i am deprecated'</span>)]
<span class="py-more">...</span>
<span class="py-prompt">&gt;&gt;&gt;</span></pre></blockquote>
<p>Note that as with the todo and timeout attributes: the module level
attribute acts as a default for the class attribute which acts as a default
for the method attribute. The suppress attribute can be overridden at any
level by specifying C{.suppress = []}</p>
</div>
  </div>
</div><div class="baseconstant">
  
  
  <a name="twisted.trial.util.DEFAULT_TIMEOUT">
    
  </a>
  <a name="DEFAULT_TIMEOUT">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">DEFAULT_TIMEOUT</span> =
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/twisted-22.1.0//src/twisted/trial/util.py#L36">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code><a href="https://docs.python.org/3/library/functions.html#object" class="intersphinx-link">object</a>()</code></pre></td></tr></table>
  </div>
</div><div class="baseconstant">
  
  
  <a name="twisted.trial.util.DEFAULT_TIMEOUT_DURATION">
    
  </a>
  <a name="DEFAULT_TIMEOUT_DURATION">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">DEFAULT_TIMEOUT_DURATION</span>: <code><a href="https://docs.python.org/3/library/functions.html#float" class="intersphinx-link">float</a></code> =
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/twisted-22.1.0//src/twisted/trial/util.py#L37">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code>120.0</code></pre></td></tr></table>
  </div>
</div><div class="basefunction private">
  
  
  <a name="twisted.trial.util._listToPhrase">
    
  </a>
  <a name="_listToPhrase">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_listToPhrase</span>(things, finalDelimiter, delimiter=<span class="rst-variable-quote">'</span><span class="rst-variable-string">, </span><span class="rst-variable-quote">'</span>):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/twisted-22.1.0//src/twisted/trial/util.py#L352">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Produce a string containing each thing in C{things},
separated by a C{delimiter}, with the last couple being separated
by C{finalDelimiter}</p>
<p>@param things: The elements of the resulting phrase
@type things: L{list} or L{tuple}</p>
<dl class="rst-docutils">
<dt>@param finalDelimiter: What to put between the last two things</dt>
<dd>(typically 'and' or 'or')</dd>
</dl>
<p>@type finalDelimiter: L{str}</p>
<dl class="rst-docutils">
<dt>@param delimiter: The separator to use between each thing,</dt>
<dd>not including the last two. Should typically include a trailing space.</dd>
</dl>
<p>@type delimiter: L{str}</p>
<p>@return: The resulting phrase
@rtype: L{str}</p>
</div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="twisted.trial.util._removeSafely">
    
  </a>
  <a name="_removeSafely">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_removeSafely</span>(path):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/twisted-22.1.0//src/twisted/trial/util.py#L268">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Safely remove a path, recursively.</p>
<p>If C{path} does not contain a node named C{_trial_marker}, a
L{_NoTrialMarker} exception is raised and the path is not removed.</p>
</div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="twisted.trial.util._unusedTestDirectory">
    
  </a>
  <a name="_unusedTestDirectory">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_unusedTestDirectory</span>(base):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/twisted-22.1.0//src/twisted/trial/util.py#L306">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Find an unused directory named similarly to C{base}.</p>
<p>Once a directory is found, it will be locked and a marker dropped into it
to identify it as a trial temporary directory.</p>
<dl class="rst-docutils">
<dt>@param base: A template path for the discovery process.  If this path</dt>
<dd>exactly cannot be used, a path which varies only in a suffix of the
basename will be used instead.</dd>
</dl>
<p>@type base: L{FilePath}</p>
<dl class="rst-docutils">
<dt>@return: A two-tuple.  The first element is a L{FilePath} representing the</dt>
<dd>directory which was found and created.  The second element is a locked
L{FilesystemLock&lt;twisted.python.lockfile.FilesystemLock&gt;}.  Another
call to C{_unusedTestDirectory} will not be able to reused the
same name until the lock is released, either explicitly or by this
process exiting.</dd>
</dl>
</div>
  </div>
</div><div class="baseconstant private">
  
  
  <a name="twisted.trial.util._DEFAULT">
    
  </a>
  <a name="_DEFAULT">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_DEFAULT</span> =
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/twisted-22.1.0//src/twisted/trial/util.py#L183">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code><a href="https://docs.python.org/3/library/functions.html#object" class="intersphinx-link">object</a>()</code></pre></td></tr></table>
  </div>
</div>

      </div>
    </div>

    <footer class="navbar navbar-default">
  
  <div class="container">
    <a href="index.html">API Documentation</a> for twisted,
  generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a>
    22.2.0 at 2022-02-23 16:05:07.
  </div>
</footer>

    <script src="pydoctor.js" type="text/javascript"></script>

  </body>
</html>