<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  

  <head>
    
    <title>sqlalchemy.orm.events.AttributeEvents</title>
    <meta name="generator" content="pydoctor 22.2.0"> 
        
    </meta>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=0.75" />
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="apidocs.css" />
    <link rel="stylesheet" type="text/css" href="extra.css" />
</head>

  <body>

    <div id="banner" class="container">    
    <div>
        <a href="https://pydocbrowser.github.io/">Home</a>
        &gt; sqlalchemy-1.4.31 
        <!-- This is an important placeholder and will be 
            replaced by project name and version on building docs -->
        
        <!-- (<a href=""&gt;show all versions</a&gt;) -->
    </div>
</div>

    <nav class="navbar navbar-default">
  
  <div class="container">

    <div class="navbar-header">
      
      <div class="navlinks">
          <span class="navbar-brand">
            sqlalchemy <a href="index.html">API Documentation</a>
          </span>

          <a href="moduleIndex.html">
            Modules
          </a>

          <a href="classIndex.html">
            Classes
          </a>

          <a href="nameIndex.html">
            Names
          </a>
      </div>

    </div>
  </div>
</nav>

    

    <div class="container">

      <div class="page-header">
        <h1 class="class"><code><code><a href="index.html" class="internal-link">sqlalchemy</a></code><wbr></wbr>.<code><a href="sqlalchemy.orm.html" class="internal-link" title="sqlalchemy.orm">orm</a></code><wbr></wbr>.<code><a href="sqlalchemy.orm.events.html" class="internal-link" title="sqlalchemy.orm.events">events</a></code><wbr></wbr>.<code><a href="sqlalchemy.orm.events.AttributeEvents.html" class="internal-link" title="sqlalchemy.orm.events.AttributeEvents">AttributeEvents</a></code></code></h1>
        <div id="showPrivate">
          <button class="btn btn-link" onclick="togglePrivate()">Toggle Private API</button>
        </div>
      </div>

      <div class="categoryHeader">
        class documentation
      </div>

      <div class="extrasDocstring">
        <p><code><span class="py-keyword">class</span> <span class="py-defname">AttributeEvents</span>(<a href="sqlalchemy.event.base.Events.html" class="internal-link" title="sqlalchemy.event.base.Events">event.Events</a>): <a href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/orm/events.py#L2139" class="sourceLink">(source)</a></code></p>
        <p><a href="classIndex.html#sqlalchemy.orm.events.AttributeEvents">View In Hierarchy</a></p>
      </div>

      <div class="moduleDocstring">
        <div><p>Define events for object attributes.</p>
<p>These are typically defined on the class-bound descriptor for the
target class.</p>
<p>e.g.:</p>
<pre class="rst-literal-block">
from sqlalchemy import event

@event.listens_for(MyClass.collection, 'append', propagate=True)
def my_append_listener(target, value, initiator):
    print("received append event for target: %s" % target)
</pre>
<p>Listeners have the option to return a possibly modified version of the
value, when the <a href="#system-message-1"><span class="rst-problematic" id="rst-problematic-1">:paramref:`.AttributeEvents.retval`</span></a> flag is passed to
<code>.event.listen</code> or <code>.event.listens_for</code>:</p>
<pre class="rst-literal-block">
def validate_phone(target, value, oldvalue, initiator):
    "Strip non-numeric characters from a phone number"

    return re.sub(r'\D', '', value)

# setup listener on UserContact.phone attribute, instructing
# it to use the return value
listen(UserContact.phone, 'set', validate_phone, retval=True)
</pre>
<p>A validation function like the above can also raise an exception
such as <code><a href="https://docs.python.org/3/library/exceptions.html#ValueError" class="intersphinx-link">ValueError</a></code> to halt the operation.</p>
<p>The <a href="#system-message-2"><span class="rst-problematic" id="rst-problematic-2">:paramref:`.AttributeEvents.propagate`</span></a> flag is also important when
applying listeners to mapped classes that also have mapped subclasses,
as when using mapper inheritance patterns:</p>
<pre class="rst-literal-block">
@event.listens_for(MySuperClass.attr, 'set', propagate=True)
def receive_set(target, value, initiator):
    print("value set: %s" % target)
</pre>
<p>The full list of modifiers available to the <code>.event.listen</code>
and <code>.event.listens_for</code> functions are below.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">active_history=​False</span></td><td class="fieldArgDesc">When True, indicates that the
"set" event would like to receive the "old" value being
replaced unconditionally, even if this requires firing off
database loads. Note that <tt class="rst-docutils literal">active_history</tt> can also be
set directly via <code>.column_property</code> and
<code>_orm.relationship</code>.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">propagate=​False</span></td><td class="fieldArgDesc">When True, the listener function will
be established not just for the class attribute given, but
for attributes of the same name on all current subclasses
of that class, as well as all future subclasses of that
class, using an additional listener that listens for
instrumentation events.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">raw=​False</span></td><td class="fieldArgDesc">When True, the "target" argument to the
event will be the <code>.InstanceState</code> management
object, rather than the mapped instance itself.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">retval=​False</span></td><td class="fieldArgDesc">when True, the user-defined event
listening must return the "value" argument from the
function.  This gives the listening function the opportunity
to change the value that is ultimately used for a "set"
or "append" event.</td></tr></table></div>
      </div>

      <div id="splitTables">
        <table class="children sortable" id="id20864">
  
  
  <tr class="method">
    
    <td>Method</td>
    <td><code><a href="#append" class="internal-link" title="sqlalchemy.orm.events.AttributeEvents.append">append</a></code></td>
    <td>Receive a collection append event.</td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#append_wo_mutation" class="internal-link" title="sqlalchemy.orm.events.AttributeEvents.append_wo_mutation">append​_wo​_mutation</a></code></td>
    <td>Receive a collection append event where the collection was not actually mutated.</td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#bulk_replace" class="internal-link" title="sqlalchemy.orm.events.AttributeEvents.bulk_replace">bulk​_replace</a></code></td>
    <td>Receive a collection 'bulk replace' event.</td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#dispose_collection" class="internal-link" title="sqlalchemy.orm.events.AttributeEvents.dispose_collection">dispose​_collection</a></code></td>
    <td>Receive a 'collection dispose' event.</td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#init_collection" class="internal-link" title="sqlalchemy.orm.events.AttributeEvents.init_collection">init​_collection</a></code></td>
    <td>Receive a 'collection init' event.</td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#init_scalar" class="internal-link" title="sqlalchemy.orm.events.AttributeEvents.init_scalar">init​_scalar</a></code></td>
    <td>Receive a scalar "init" event.</td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#modified" class="internal-link" title="sqlalchemy.orm.events.AttributeEvents.modified">modified</a></code></td>
    <td>Receive a 'modified' event.</td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#remove" class="internal-link" title="sqlalchemy.orm.events.AttributeEvents.remove">remove</a></code></td>
    <td>Receive a collection remove event.</td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#set" class="internal-link" title="sqlalchemy.orm.events.AttributeEvents.set">set</a></code></td>
    <td>Receive a scalar set event.</td>
  </tr><tr class="classmethod private">
    
    <td>Class Method</td>
    <td><code><a href="#_accept_with" class="internal-link" title="sqlalchemy.orm.events.AttributeEvents._accept_with">​_accept​_with</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="classmethod private">
    
    <td>Class Method</td>
    <td><code><a href="#_listen" class="internal-link" title="sqlalchemy.orm.events.AttributeEvents._listen">​_listen</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="staticmethod private">
    
    <td>Static Method</td>
    <td><code><a href="#_set_dispatch" class="internal-link" title="sqlalchemy.orm.events.AttributeEvents._set_dispatch">​_set​_dispatch</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="classvariable private">
    
    <td>Class Variable</td>
    <td><code><a href="#_target_class_doc" class="internal-link" title="sqlalchemy.orm.events.AttributeEvents._target_class_doc">​_target​_class​_doc</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr>
</table>
        
          <p class="inheritedFrom">
            Inherited from <code><a href="sqlalchemy.event.base.Events.html" class="internal-link" title="sqlalchemy.event.base.Events">Events</a></code>:
          </p>
          <table class="children sortable" id="id20865">
  
  
  <tr class="baseclassmethod private">
    
    <td>Class Method</td>
    <td><code><a href="sqlalchemy.event.base.Events.html#_clear" class="internal-link" title="sqlalchemy.event.base.Events._clear">​_clear</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="baseclassmethod private">
    
    <td>Class Method</td>
    <td><code><a href="sqlalchemy.event.base.Events.html#_remove" class="internal-link" title="sqlalchemy.event.base.Events._remove">​_remove</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr>
</table>
          

          
      </div>

      <div id="childList">

        <div class="basemethod">
  
  
  <a name="sqlalchemy.orm.events.AttributeEvents.append">
    
  </a>
  <a name="append">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">append</span>(self, target, value, initiator):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/orm/events.py#L2267">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Receive a collection append event.</p>
<p>The append event is invoked for each element as it is appended
to the collection.  This occurs for single-item appends as well
as for a "bulk replace" operation.</p>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p><code>.AttributeEvents</code> - background on listener options such
as propagation to subclasses.</p>
<p class="rst-last"><code>.AttributeEvents.bulk_replace</code></p>
</div>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">target</span></td><td class="fieldArgDesc">the object instance receiving the event.
If the listener is registered with <tt class="rst-docutils literal">raw=True</tt>, this will
be the <code>.InstanceState</code> object.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">value</span></td><td class="fieldArgDesc">the value being appended.  If this listener
is registered with <tt class="rst-docutils literal">retval=True</tt>, the listener
function must return this value, or a new value which
replaces it.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">initiator</span></td><td class="fieldArgDesc">An instance of <code>.attributes.Event</code>
representing the initiation of the event.  May be modified
from its original value by backref handlers in order to control
chained event propagation, as well as be inspected for information
about the source of the event.</td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td colspan="2">if the event was registered with <tt class="rst-docutils literal">retval=True</tt>,
the given value, or a new effective value, should be returned.</td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.orm.events.AttributeEvents.append_wo_mutation">
    
  </a>
  <a name="append_wo_mutation">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">append_wo_mutation</span>(self, target, value, initiator):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/orm/events.py#L2298">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Receive a collection append event where the collection was not
actually mutated.</p>
<p>This event differs from <code>_orm.AttributeEvents.append</code> in that
it is fired off for de-duplicating collections such as sets and
dictionaries, when the object already exists in the target collection.
The event does not have a return value and the identity of the
given object cannot be changed.</p>
<p>The event is used for cascading objects into a <code>_orm.Session</code>
when the collection has already been mutated via a backref event.</p>
<div class="rst-versionadded">
<span class="rst-versionmodified rst-added">New in version 1.4.15.</span></div>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">target</span></td><td class="fieldArgDesc">the object instance receiving the event.
If the listener is registered with <tt class="rst-docutils literal">raw=True</tt>, this will
be the <code>.InstanceState</code> object.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">value</span></td><td class="fieldArgDesc">the value that would be appended if the object did not
already exist in the collection.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">initiator</span></td><td class="fieldArgDesc">An instance of <code>.attributes.Event</code>
representing the initiation of the event.  May be modified
from its original value by backref handlers in order to control
chained event propagation, as well as be inspected for information
about the source of the event.</td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td colspan="2">No return value is defined for this event.</td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.orm.events.AttributeEvents.bulk_replace">
    
  </a>
  <a name="bulk_replace">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">bulk_replace</span>(self, target, values, initiator):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/orm/events.py#L2328">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Receive a collection 'bulk replace' event.</p>
<p>This event is invoked for a sequence of values as they are incoming
to a bulk collection set operation, which can be
modified in place before the values are treated as ORM objects.
This is an "early hook" that runs before the bulk replace routine
attempts to reconcile which objects are already present in the
collection and which are being removed by the net replace operation.</p>
<p>It is typical that this method be combined with use of the
<code>.AttributeEvents.append</code> event.    When using both of these
events, note that a bulk replace operation will invoke
the <code>.AttributeEvents.append</code> event for all new items,
even after <code>.AttributeEvents.bulk_replace</code> has been invoked
for the collection as a whole.  In order to determine if an
<code>.AttributeEvents.append</code> event is part of a bulk replace,
use the symbol <code>~.attributes.OP_BULK_REPLACE</code> to test the
incoming initiator:</p>
<pre class="rst-literal-block">
from sqlalchemy.orm.attributes import OP_BULK_REPLACE

@event.listens_for(SomeObject.collection, "bulk_replace")
def process_collection(target, values, initiator):
    values[:] = [_make_value(value) for value in values]

@event.listens_for(SomeObject.collection, "append", retval=True)
def process_collection(target, value, initiator):
    # make sure bulk_replace didn't already do it
    if initiator is None or initiator.op is not OP_BULK_REPLACE:
        return _make_value(value)
    else:
        return value
</pre>
<div class="rst-versionadded">
<span class="rst-versionmodified rst-added">New in version 1.2.</span></div>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p class="rst-last"><code>.AttributeEvents</code> - background on listener options such
as propagation to subclasses.</p>
</div>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">target</span></td><td class="fieldArgDesc">the object instance receiving the event.
If the listener is registered with <tt class="rst-docutils literal">raw=True</tt>, this will
be the <code>.InstanceState</code> object.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">values</span></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">initiator</span></td><td class="fieldArgDesc">An instance of <code>.attributes.Event</code>
representing the initiation of the event.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">value</span></td><td class="fieldArgDesc">a sequence (e.g. a list) of the values being set.  The
handler can modify this list in place.</td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.orm.events.AttributeEvents.dispose_collection">
    
  </a>
  <a name="dispose_collection">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">dispose_collection</span>(self, target, collection, collection_adapter):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/orm/events.py#L2606">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Receive a 'collection dispose' event.</p>
<p>This event is triggered for a collection-based attribute when
a collection is replaced, that is:</p>
<pre class="rst-literal-block">
u1.addresses.append(a1)

u1.addresses = [a2, a3]  # &lt;- old collection is disposed
</pre>
<p>The old collection received will contain its previous contents.</p>
<div class="rst-versionchanged">
<span class="rst-versionmodified rst-changed">Changed in version 1.2: </span><span>The collection passed to
<code>.AttributeEvents.dispose_collection</code> will now have its
contents before the dispose intact; previously, the collection
would be empty.</span></div>
<div class="rst-versionadded">
<span class="rst-versionmodified rst-added">New in version 1.0.0: </span><span>the <code>.AttributeEvents.init_collection</code>
and <code>.AttributeEvents.dispose_collection</code> events.</span></div>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p class="rst-last"><code>.AttributeEvents</code> - background on listener options such
as propagation to subclasses.</p>
</div>
</div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.orm.events.AttributeEvents.init_collection">
    
  </a>
  <a name="init_collection">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">init_collection</span>(self, target, collection, collection_adapter):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/orm/events.py#L2565">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Receive a 'collection init' event.</p>
<p>This event is triggered for a collection-based attribute, when
the initial "empty collection" is first generated for a blank
attribute, as well as for when the collection is replaced with
a new one, such as via a set event.</p>
<p>E.g., given that <tt class="rst-docutils literal">User.addresses</tt> is a relationship-based
collection, the event is triggered here:</p>
<pre class="rst-literal-block">
u1 = User()
u1.addresses.append(a1)  #  &lt;- new collection
</pre>
<p>and also during replace operations:</p>
<pre class="rst-literal-block">
u1.addresses = [a2, a3]  #  &lt;- new collection
</pre>
<div class="rst-versionadded">
<span class="rst-versionmodified rst-added">New in version 1.0.0: </span><span><code>.AttributeEvents.init_collection</code>
and <code>.AttributeEvents.dispose_collection</code> events.</span></div>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p><code>.AttributeEvents</code> - background on listener options such
as propagation to subclasses.</p>
<p class="rst-last"><code>.AttributeEvents.init_scalar</code> - "scalar" version of this
event.</p>
</div>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">target</span></td><td class="fieldArgDesc">the object instance receiving the event.
If the listener is registered with <tt class="rst-docutils literal">raw=True</tt>, this will
be the <code>.InstanceState</code> object.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">collection</span></td><td class="fieldArgDesc">the new collection.  This will always be generated
from what was specified as
<a href="#system-message-1"><span class="rst-problematic" id="rst-problematic-1">:paramref:`_orm.relationship.collection_class`</span></a>, and will always
be empty.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">collection​_adapter</span></td><td class="fieldArgDesc">the <code>.CollectionAdapter</code> that will
mediate internal access to the collection.</td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.orm.events.AttributeEvents.init_scalar">
    
  </a>
  <a name="init_scalar">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">init_scalar</span>(self, target, value, dict_):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/orm/events.py#L2443">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Receive a scalar "init" event.</p>
<p>This event is invoked when an uninitialized, unpersisted scalar
attribute is accessed, e.g. read:</p>
<pre class="rst-literal-block">
x = my_object.some_attribute
</pre>
<p>The ORM's default behavior when this occurs for an un-initialized
attribute is to return the value <tt class="rst-docutils literal">None</tt>; note this differs from
Python's usual behavior of raising <tt class="rst-docutils literal">AttributeError</tt>.    The
event here can be used to customize what value is actually returned,
with the assumption that the event listener would be mirroring
a default generator that is configured on the Core
<code>_schema.Column</code>
object as well.</p>
<p>Since a default generator on a <code>_schema.Column</code>
might also produce
a changing value such as a timestamp, the
<code>.AttributeEvents.init_scalar</code>
event handler can also be used to <strong>set</strong> the newly returned value, so
that a Core-level default generation function effectively fires off
only once, but at the moment the attribute is accessed on the
non-persisted object.   Normally, no change to the object's state
is made when an uninitialized attribute is accessed (much older
SQLAlchemy versions did in fact change the object's state).</p>
<p>If a default generator on a column returned a particular constant,
a handler might be used as follows:</p>
<pre class="rst-literal-block">
SOME_CONSTANT = 3.1415926

class MyClass(Base):
    # ...

    some_attribute = Column(Numeric, default=SOME_CONSTANT)

@event.listens_for(
    MyClass.some_attribute, "init_scalar",
    retval=True, propagate=True)
def _init_some_attribute(target, dict_, value):
    dict_['some_attribute'] = SOME_CONSTANT
    return SOME_CONSTANT
</pre>
<p>Above, we initialize the attribute <tt class="rst-docutils literal">MyClass.some_attribute</tt> to the
value of <tt class="rst-docutils literal">SOME_CONSTANT</tt>.   The above code includes the following
features:</p>
<ul class="rst-simple">
<li>By setting the value <tt class="rst-docutils literal">SOME_CONSTANT</tt> in the given <tt class="rst-docutils literal">dict_</tt>,
we indicate that this value is to be persisted to the database.
This supersedes the use of <tt class="rst-docutils literal">SOME_CONSTANT</tt> in the default generator
for the <code>_schema.Column</code>.  The <tt class="rst-docutils literal">active_column_defaults.py</tt>
example given at <a href="#system-message-1"><span class="rst-problematic" id="rst-problematic-1">:ref:`examples_instrumentation`</span></a> illustrates using
the same approach for a changing default, e.g. a timestamp
generator.    In this particular example, it is not strictly
necessary to do this since <tt class="rst-docutils literal">SOME_CONSTANT</tt> would be part of the
INSERT statement in either case.</li>
<li>By establishing the <tt class="rst-docutils literal">retval=True</tt> flag, the value we return
from the function will be returned by the attribute getter.
Without this flag, the event is assumed to be a passive observer
and the return value of our function is ignored.</li>
<li>The <tt class="rst-docutils literal">propagate=True</tt> flag is significant if the mapped class
includes inheriting subclasses, which would also make use of this
event listener.  Without this flag, an inheriting subclass will
not use our event handler.</li>
</ul>
<p>In the above example, the attribute set event
<code>.AttributeEvents.set</code> as well as the related validation feature
provided by <code>_orm.validates</code> is <strong>not</strong> invoked when we apply our
value to the given <tt class="rst-docutils literal">dict_</tt>.  To have these events to invoke in
response to our newly generated value, apply the value to the given
object as a normal attribute set operation:</p>
<pre class="rst-literal-block">
SOME_CONSTANT = 3.1415926

@event.listens_for(
    MyClass.some_attribute, "init_scalar",
    retval=True, propagate=True)
def _init_some_attribute(target, dict_, value):
    # will also fire off attribute set events
    target.some_attribute = SOME_CONSTANT
    return SOME_CONSTANT
</pre>
<p>When multiple listeners are set up, the generation of the value
is "chained" from one listener to the next by passing the value
returned by the previous listener that specifies <tt class="rst-docutils literal">retval=True</tt>
as the <tt class="rst-docutils literal">value</tt> argument of the next listener.</p>
<div class="rst-versionadded">
<span class="rst-versionmodified rst-added">New in version 1.1.</span></div>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p><code>.AttributeEvents.init_collection</code> - collection version
of this event</p>
<p><code>.AttributeEvents</code> - background on listener options such
as propagation to subclasses.</p>
<p class="rst-last"><a href="#system-message-2"><span class="rst-problematic" id="rst-problematic-2">:ref:`examples_instrumentation`</span></a> - see the
<tt class="rst-docutils literal">active_column_defaults.py</tt> example.</p>
</div>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">target</span></td><td class="fieldArgDesc">the object instance receiving the event.
If the listener is registered with <tt class="rst-docutils literal">raw=True</tt>, this will
be the <code>.InstanceState</code> object.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">value</span></td><td class="fieldArgDesc">the value that is to be returned before this event
listener were invoked.  This value begins as the value <tt class="rst-docutils literal">None</tt>,
however will be the return value of the previous event handler
function if multiple listeners are present.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">dict​_</span></td><td class="fieldArgDesc">the attribute dictionary of this mapped object.
This is normally the <tt class="rst-docutils literal">__dict__</tt> of the object, but in all cases
represents the destination that the attribute system uses to get
at the actual value of this attribute.  Placing the value in this
dictionary has the effect that the value will be used in the
INSERT statement generated by the unit of work.</td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.orm.events.AttributeEvents.modified">
    
  </a>
  <a name="modified">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">modified</span>(self, target, initiator):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/orm/events.py#L2633">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Receive a 'modified' event.</p>
<p>This event is triggered when the <code>.attributes.flag_modified</code>
function is used to trigger a modify event on an attribute without
any specific value being set.</p>
<div class="rst-versionadded">
<span class="rst-versionmodified rst-added">New in version 1.2.</span></div>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p class="rst-last"><code>.AttributeEvents</code> - background on listener options such
as propagation to subclasses.</p>
</div>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">target</span></td><td class="fieldArgDesc">the object instance receiving the event.
If the listener is registered with <tt class="rst-docutils literal">raw=True</tt>, this will
be the <code>.InstanceState</code> object.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">initiator</span></td><td class="fieldArgDesc">An instance of <code>.attributes.Event</code>
representing the initiation of the event.</td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.orm.events.AttributeEvents.remove">
    
  </a>
  <a name="remove">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">remove</span>(self, target, value, initiator):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/orm/events.py#L2380">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Receive a collection remove event.</p>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p class="rst-last"><code>.AttributeEvents</code> - background on listener options such
as propagation to subclasses.</p>
</div>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">target</span></td><td class="fieldArgDesc">the object instance receiving the event.
If the listener is registered with <tt class="rst-docutils literal">raw=True</tt>, this will
be the <code>.InstanceState</code> object.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">value</span></td><td class="fieldArgDesc">the value being removed.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">initiator</span></td><td class="fieldArgDesc"><p>An instance of <code>.attributes.Event</code>
representing the initiation of the event.  May be modified
from its original value by backref handlers in order to control
chained event propagation.</p>
<div class="rst-versionchanged">
<span class="rst-versionmodified rst-changed">Changed in version 0.9.0: </span><span>the <tt class="rst-docutils literal">initiator</tt> argument is now
passed as a <code>.attributes.Event</code> object, and may be
modified by backref handlers within a chain of backref-linked
events.</span></div>
</td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td colspan="2">No return value is defined for this event.</td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.orm.events.AttributeEvents.set">
    
  </a>
  <a name="set">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">set</span>(self, target, value, oldvalue, initiator):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/orm/events.py#L2407">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Receive a scalar set event.</p>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p class="rst-last"><code>.AttributeEvents</code> - background on listener options such
as propagation to subclasses.</p>
</div>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">target</span></td><td class="fieldArgDesc">the object instance receiving the event.
If the listener is registered with <tt class="rst-docutils literal">raw=True</tt>, this will
be the <code>.InstanceState</code> object.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">value</span></td><td class="fieldArgDesc">the value being set.  If this listener
is registered with <tt class="rst-docutils literal">retval=True</tt>, the listener
function must return this value, or a new value which
replaces it.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">oldvalue</span></td><td class="fieldArgDesc">the previous value being replaced.  This
may also be the symbol <tt class="rst-docutils literal">NEVER_SET</tt> or <tt class="rst-docutils literal">NO_VALUE</tt>.
If the listener is registered with <tt class="rst-docutils literal">active_history=True</tt>,
the previous value of the attribute will be loaded from
the database if the existing value is currently unloaded
or expired.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">initiator</span></td><td class="fieldArgDesc"><p>An instance of <code>.attributes.Event</code>
representing the initiation of the event.  May be modified
from its original value by backref handlers in order to control
chained event propagation.</p>
<div class="rst-versionchanged">
<span class="rst-versionmodified rst-changed">Changed in version 0.9.0: </span><span>the <tt class="rst-docutils literal">initiator</tt> argument is now
passed as a <code>.attributes.Event</code> object, and may be
modified by backref handlers within a chain of backref-linked
events.</span></div>
</td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td colspan="2">if the event was registered with <tt class="rst-docutils literal">retval=True</tt>,
the given value, or a new effective value, should be returned.</td></tr></table></div>
  </div>
</div><div class="baseclassmethod private">
  
  
  <a name="sqlalchemy.orm.events.AttributeEvents._accept_with">
    
  </a>
  <a name="_accept_with">
    
  </a>
  <div class="functionHeader">
    @<a href="https://docs.python.org/3/library/functions.html#classmethod" class="intersphinx-link">classmethod</a><br />
    <span class="py-keyword">def</span> <span class="py-defname">_accept_with</span>(cls, target):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/orm/events.py#L2215">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">overrides <code><a href="sqlalchemy.event.base.Events.html#_accept_with" class="internal-link">sqlalchemy.event.base.Events._accept_with</a></code></div>
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="baseclassmethod private">
  
  
  <a name="sqlalchemy.orm.events.AttributeEvents._listen">
    
  </a>
  <a name="_listen">
    
  </a>
  <div class="functionHeader">
    @<a href="https://docs.python.org/3/library/functions.html#classmethod" class="intersphinx-link">classmethod</a><br />
    <span class="py-keyword">def</span> <span class="py-defname">_listen</span>(cls, event_key, active_history=<a href="https://docs.python.org/3/library/constants.html#False" class="intersphinx-link">False</a>, raw=<a href="https://docs.python.org/3/library/constants.html#False" class="intersphinx-link">False</a>, retval=<a href="https://docs.python.org/3/library/constants.html#False" class="intersphinx-link">False</a>, propagate=<a href="https://docs.python.org/3/library/constants.html#False" class="intersphinx-link">False</a>):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/orm/events.py#L2223">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">overrides <code><a href="sqlalchemy.event.base.Events.html#_listen" class="internal-link">sqlalchemy.event.base.Events._listen</a></code></div>
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basestaticmethod private">
  
  
  <a name="sqlalchemy.orm.events.AttributeEvents._set_dispatch">
    
  </a>
  <a name="_set_dispatch">
    
  </a>
  <div class="functionHeader">
    @<a href="https://docs.python.org/3/library/functions.html#staticmethod" class="intersphinx-link">staticmethod</a><br />
    <span class="py-keyword">def</span> <span class="py-defname">_set_dispatch</span>(cls, dispatch_cls):
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/orm/events.py#L2209">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">overrides <code><a href="sqlalchemy.event.base.Events.html#_set_dispatch" class="internal-link">sqlalchemy.event.base.Events._set_dispatch</a></code></div>
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="baseclassvariable private">
  
  
  <a name="sqlalchemy.orm.events.AttributeEvents._target_class_doc">
    
  </a>
  <a name="_target_class_doc">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_target_class_doc</span>: <code><a href="https://docs.python.org/3/library/stdtypes.html#str" class="intersphinx-link">str</a></code> =
    <a class="sourceLink" href="https://github.com/pydocbrowser/pydocbrowser.github.io/tree/main/build/sources/sqlalchemy-1.4.31//lib/sqlalchemy/orm/events.py#L2206">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div>

      </div>
    </div>

    <footer class="navbar navbar-default">
  
  <div class="container">
    <a href="index.html">API Documentation</a> for sqlalchemy,
  generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a>
    22.2.0 at 2022-02-23 08:22:50.
  </div>
</footer>

    <script src="pydoctor.js" type="text/javascript"></script>

  </body>
</html>