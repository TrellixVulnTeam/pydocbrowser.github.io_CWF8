<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  

  <head>
    
    <title>sqlalchemy.databases.mysql</title>
    <meta name="generator" content="pydoctor 22.2.0"> 
        
    </meta>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=0.75" />
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="apidocs.css" />
    <link rel="stylesheet" type="text/css" href="extra.css" />
</head>

  <body>

    

    <nav class="navbar navbar-default">
  
  <div class="container">

    <div class="navbar-header">
      
      <div class="navlinks">
          <span class="navbar-brand">
            sqlalchemy <a href="index.html">API Documentation</a>
          </span>

          <a href="moduleIndex.html">
            Modules
          </a>

          <a href="classIndex.html">
            Classes
          </a>

          <a href="nameIndex.html">
            Names
          </a>
      </div>

    </div>
  </div>
</nav>

    

    <div class="container">

      <div class="page-header">
        <h1 class="module"><code><code><a href="index.html" class="internal-link">sqlalchemy</a></code><wbr></wbr>.<code><a href="sqlalchemy.databases.html" class="internal-link" title="sqlalchemy.databases">databases</a></code><wbr></wbr>.<code><a href="sqlalchemy.databases.mysql.html" class="internal-link" title="sqlalchemy.databases.mysql">mysql</a></code></code></h1>
        <div id="showPrivate">
          <button class="btn btn-link" onclick="togglePrivate()">Toggle Private API</button>
        </div>
      </div>

      <div class="categoryHeader">
        module documentation
      </div>

      <div class="extrasDocstring">
        
        <p></p>
      </div>

      <div class="moduleDocstring">
        <div><div class="rst-section" id="rst-supported-versions-and-features">
<h2 class="heading">Supported Versions and Features</h2>
<p>SQLAlchemy supports MySQL starting with version 5.0.2 through modern releases,
as well as all modern versions of MariaDB.   See the official MySQL
documentation for detailed information about features supported in any given
server release.</p>
<div class="rst-versionchanged">
<span class="rst-versionmodified rst-changed">Changed in version 1.4: </span><span>minimum MySQL version supported is now 5.0.2.</span></div>
<div class="rst-section" id="rst-mariadb-support">
<h3 class="heading">MariaDB Support</h3>
<p>The MariaDB variant of MySQL retains fundamental compatibility with MySQL's
protocols however the development of these two products continues to diverge.
Within the realm of SQLAlchemy, the two databases have a small number of
syntactical and behavioral differences that SQLAlchemy accommodates automatically.
To connect to a MariaDB database, no changes to the database URL are required:</p>
<pre class="rst-literal-block">
engine = create_engine("mysql+pymysql://user:pass@some_mariadb/dbname?charset=utf8mb4")
</pre>
<p>Upon first connect, the SQLAlchemy dialect employs a
server version detection scheme that determines if the
backing database reports as MariaDB.  Based on this flag, the dialect
can make different choices in those of areas where its behavior
must be different.</p>
</div>
<div class="rst-section" id="rst-mariadb-only-mode">
<span id="rst-mysql-mariadb-only-mode"></span><h3 class="heading">MariaDB-Only Mode</h3>
<p>The dialect also supports an <strong>optional</strong> "MariaDB-only" mode of connection, which may be
useful for the case where an application makes use of MariaDB-specific features
and is not compatible with a MySQL database.    To use this mode of operation,
replace the "mysql" token in the above URL with "mariadb":</p>
<pre class="rst-literal-block">
engine = create_engine("mariadb+pymysql://user:pass@some_mariadb/dbname?charset=utf8mb4")
</pre>
<p>The above engine, upon first connect, will raise an error if the server version
detection detects that the backing database is not MariaDB.</p>
<p>When using an engine with <tt class="rst-docutils literal">"mariadb"</tt> as the dialect name, <strong>all mysql-specific options
that include the name "mysql" in them are now named with "mariadb"</strong>.  This means
options like <tt class="rst-docutils literal">mysql_engine</tt> should be named <tt class="rst-docutils literal">mariadb_engine</tt>, etc.  Both
"mysql" and "mariadb" options can be used simultaneously for applications that
use URLs with both "mysql" and "mariadb" dialects:</p>
<pre class="rst-literal-block">
my_table = Table(
    "mytable",
    metadata,
    Column("id", Integer, primary_key=True),
    Column("textdata", String(50)),
    mariadb_engine="InnoDB",
    mysql_engine="InnoDB",
)

Index(
    "textdata_ix",
    my_table.c.textdata,
    mysql_prefix="FULLTEXT",
    mariadb_prefix="FULLTEXT",
)
</pre>
<p>Similar behavior will occur when the above structures are reflected, i.e. the
"mariadb" prefix will be present in the option names when the database URL
is based on the "mariadb" name.</p>
<div class="rst-versionadded">
<span class="rst-versionmodified rst-added">New in version 1.4: </span><span>Added "mariadb" dialect name supporting "MariaDB-only mode"
for the MySQL dialect.</span></div>
</div>
</div>
<div class="rst-section" id="rst-connection-timeouts-and-disconnects">
<span id="rst-mysql-connection-timeouts"></span><h2 class="heading">Connection Timeouts and Disconnects</h2>
<p>MySQL / MariaDB feature an automatic connection close behavior, for connections that
have been idle for a fixed period of time, defaulting to eight hours.
To circumvent having this issue, use
the <a href="#system-message-1"><span class="rst-problematic" id="rst-problematic-1">:paramref:`_sa.create_engine.pool_recycle`</span></a> option which ensures that
a connection will be discarded and replaced with a new one if it has been
present in the pool for a fixed number of seconds:</p>
<pre class="rst-literal-block">
engine = create_engine('mysql+mysqldb://...', pool_recycle=3600)
</pre>
<p>For more comprehensive disconnect detection of pooled connections, including
accommodation of  server restarts and network issues, a pre-ping approach may
be employed.  See <a href="#system-message-2"><span class="rst-problematic" id="rst-problematic-2">:ref:`pool_disconnects`</span></a> for current approaches.</p>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p class="rst-last"><a href="#system-message-3"><span class="rst-problematic" id="rst-problematic-3">:ref:`pool_disconnects`</span></a> - Background on several techniques for dealing
with timed out connections as well as database restarts.</p>
</div>
</div>
<div class="rst-section" id="rst-create-table-arguments-including-storage-engines">
<span id="rst-mysql-storage-engines"></span><h2 class="heading">CREATE TABLE arguments including Storage Engines</h2>
<p>Both MySQL's and MariaDB's CREATE TABLE syntax includes a wide array of special options,
including <tt class="rst-docutils literal">ENGINE</tt>, <tt class="rst-docutils literal">CHARSET</tt>, <tt class="rst-docutils literal">MAX_ROWS</tt>, <tt class="rst-docutils literal">ROW_FORMAT</tt>,
<tt class="rst-docutils literal">INSERT_METHOD</tt>, and many more.
To accommodate the rendering of these arguments, specify the form
<tt class="rst-docutils literal"><span class="pre">mysql_argument_name="value"</span></tt>.  For example, to specify a table with
<tt class="rst-docutils literal">ENGINE</tt> of <tt class="rst-docutils literal">InnoDB</tt>, <tt class="rst-docutils literal">CHARSET</tt> of <tt class="rst-docutils literal">utf8mb4</tt>, and <tt class="rst-docutils literal">KEY_BLOCK_SIZE</tt>
of <tt class="rst-docutils literal">1024</tt>:</p>
<pre class="rst-literal-block">
Table('mytable', metadata,
      Column('data', String(32)),
      mysql_engine='InnoDB',
      mysql_charset='utf8mb4',
      mysql_key_block_size="1024"
     )
</pre>
<p>When supporting <a href="#system-message-4"><span class="rst-problematic" id="rst-problematic-4">:ref:`mysql_mariadb_only_mode`</span></a> mode, similar keys against
the "mariadb" prefix must be included as well.  The values can of course
vary independently so that different settings on MySQL vs. MariaDB may
be maintained:</p>
<pre class="rst-literal-block">
# support both "mysql" and "mariadb-only" engine URLs

Table('mytable', metadata,
      Column('data', String(32)),

      mysql_engine='InnoDB',
      mariadb_engine='InnoDB',

      mysql_charset='utf8mb4',
      mariadb_charset='utf8',

      mysql_key_block_size="1024"
      mariadb_key_block_size="1024"

     )
</pre>
<p>The MySQL / MariaDB dialects will normally transfer any keyword specified as
<tt class="rst-docutils literal">mysql_keyword_name</tt> to be rendered as <tt class="rst-docutils literal">KEYWORD_NAME</tt> in the
<tt class="rst-docutils literal">CREATE TABLE</tt> statement.  A handful of these names will render with a space
instead of an underscore; to support this, the MySQL dialect has awareness of
these particular names, which include <tt class="rst-docutils literal">DATA DIRECTORY</tt>
(e.g. <tt class="rst-docutils literal">mysql_data_directory</tt>), <tt class="rst-docutils literal">CHARACTER SET</tt> (e.g.
<tt class="rst-docutils literal">mysql_character_set</tt>) and <tt class="rst-docutils literal">INDEX DIRECTORY</tt> (e.g.
<tt class="rst-docutils literal">mysql_index_directory</tt>).</p>
<p>The most common argument is <tt class="rst-docutils literal">mysql_engine</tt>, which refers to the storage
engine for the table.  Historically, MySQL server installations would default
to <tt class="rst-docutils literal">MyISAM</tt> for this value, although newer versions may be defaulting
to <tt class="rst-docutils literal">InnoDB</tt>.  The <tt class="rst-docutils literal">InnoDB</tt> engine is typically preferred for its support
of transactions and foreign keys.</p>
<p>A <code>_schema.Table</code>
that is created in a MySQL / MariaDB database with a storage engine
of <tt class="rst-docutils literal">MyISAM</tt> will be essentially non-transactional, meaning any
INSERT/UPDATE/DELETE statement referring to this table will be invoked as
autocommit.   It also will have no support for foreign key constraints; while
the <tt class="rst-docutils literal">CREATE TABLE</tt> statement accepts foreign key options, when using the
<tt class="rst-docutils literal">MyISAM</tt> storage engine these arguments are discarded.  Reflecting such a
table will also produce no foreign key constraint information.</p>
<p>For fully atomic transactions as well as support for foreign key
constraints, all participating <tt class="rst-docutils literal">CREATE TABLE</tt> statements must specify a
transactional engine, which in the vast majority of cases is <tt class="rst-docutils literal">InnoDB</tt>.</p>
</div>
<div class="rst-section" id="rst-case-sensitivity-and-table-reflection">
<h2 class="heading">Case Sensitivity and Table Reflection</h2>
<p>Both MySQL and MariaDB have inconsistent support for case-sensitive identifier
names, basing support on specific details of the underlying
operating system. However, it has been observed that no matter
what case sensitivity behavior is present, the names of tables in
foreign key declarations are <em>always</em> received from the database
as all-lower case, making it impossible to accurately reflect a
schema where inter-related tables use mixed-case identifier names.</p>
<p>Therefore it is strongly advised that table names be declared as
all lower case both within SQLAlchemy as well as on the MySQL / MariaDB
database itself, especially if database reflection features are
to be used.</p>
</div>
<div class="rst-section" id="rst-transaction-isolation-level">
<span id="rst-mysql-isolation-level"></span><h2 class="heading">Transaction Isolation Level</h2>
<p>All MySQL / MariaDB dialects support setting of transaction isolation level both via a
dialect-specific parameter <a href="#system-message-5"><span class="rst-problematic" id="rst-problematic-5">:paramref:`_sa.create_engine.isolation_level`</span></a>
accepted
by <code>_sa.create_engine</code>, as well as the
<a href="#system-message-6"><span class="rst-problematic" id="rst-problematic-6">:paramref:`.Connection.execution_options.isolation_level`</span></a> argument as passed to
<code>_engine.Connection.execution_options</code>.
This feature works by issuing the
command <tt class="rst-docutils literal">SET SESSION TRANSACTION ISOLATION LEVEL &lt;level&gt;</tt> for each new
connection.  For the special AUTOCOMMIT isolation level, DBAPI-specific
techniques are used.</p>
<p>To set isolation level using <code>_sa.create_engine</code>:</p>
<pre class="rst-literal-block">
engine = create_engine(
                "mysql://scott:tiger@localhost/test",
                isolation_level="READ UNCOMMITTED"
            )
</pre>
<p>To set using per-connection execution options:</p>
<pre class="rst-literal-block">
connection = engine.connect()
connection = connection.execution_options(
    isolation_level="READ COMMITTED"
)
</pre>
<p>Valid values for <tt class="rst-docutils literal">isolation_level</tt> include:</p>
<ul class="rst-simple">
<li><tt class="rst-docutils literal">READ COMMITTED</tt></li>
<li><tt class="rst-docutils literal">READ UNCOMMITTED</tt></li>
<li><tt class="rst-docutils literal">REPEATABLE READ</tt></li>
<li><tt class="rst-docutils literal">SERIALIZABLE</tt></li>
<li><tt class="rst-docutils literal">AUTOCOMMIT</tt></li>
</ul>
<p>The special <tt class="rst-docutils literal">AUTOCOMMIT</tt> value makes use of the various "autocommit"
attributes provided by specific DBAPIs, and is currently supported by
MySQLdb, MySQL-Client, MySQL-Connector Python, and PyMySQL.   Using it,
the database connection will return true for the value of
<tt class="rst-docutils literal">SELECT @@autocommit;</tt>.</p>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p class="rst-last"><a href="#system-message-7"><span class="rst-problematic" id="rst-problematic-7">:ref:`dbapi_autocommit`</span></a></p>
</div>
</div>
<div class="rst-section" id="rst-auto-increment-behavior">
<h2 class="heading">AUTO_INCREMENT Behavior</h2>
<p>When creating tables, SQLAlchemy will automatically set <tt class="rst-docutils literal">AUTO_INCREMENT</tt> on
the first <code>.Integer</code> primary key column which is not marked as a
foreign key:</p>
<pre class="rst-literal-block">
&gt;&gt;&gt; t = Table('mytable', metadata,
...   Column('mytable_id', Integer, primary_key=True)
... )
&gt;&gt;&gt; t.create()
CREATE TABLE mytable (
        id INTEGER NOT NULL AUTO_INCREMENT,
        PRIMARY KEY (id)
)
</pre>
<p>You can disable this behavior by passing <tt class="rst-docutils literal">False</tt> to the
<a href="#system-message-8"><span class="rst-problematic" id="rst-problematic-8">:paramref:`_schema.Column.autoincrement`</span></a> argument of <code>_schema.Column</code>.
This flag
can also be used to enable auto-increment on a secondary column in a
multi-column key for some storage engines:</p>
<pre class="rst-literal-block">
Table('mytable', metadata,
      Column('gid', Integer, primary_key=True, autoincrement=False),
      Column('id', Integer, primary_key=True)
     )
</pre>
</div>
<div class="rst-section" id="rst-server-side-cursors">
<span id="rst-mysql-ss-cursors"></span><h2 class="heading">Server Side Cursors</h2>
<p>Server-side cursor support is available for the mysqlclient, PyMySQL,
mariadbconnector dialects and may also be available in others.   This makes use
of either the "buffered=True/False" flag if available or by using a class such
as <tt class="rst-docutils literal">MySQLdb.cursors.SSCursor</tt> or <tt class="rst-docutils literal">pymysql.cursors.SSCursor</tt> internally.</p>
<p>Server side cursors are enabled on a per-statement basis by using the
<a href="#system-message-9"><span class="rst-problematic" id="rst-problematic-9">:paramref:`.Connection.execution_options.stream_results`</span></a> connection execution
option:</p>
<pre class="rst-literal-block">
with engine.connect() as conn:
    result = conn.execution_options(stream_results=True).execute(text("select * from table"))
</pre>
<p>Note that some kinds of SQL statements may not be supported with
server side cursors; generally, only SQL statements that return rows should be
used with this option.</p>
<div class="rst-deprecated">
<span class="rst-versionmodified rst-deprecated">Deprecated since version 1.4: </span><span>The dialect-level server_side_cursors flag is deprecated
and will be removed in a future release.  Please use the
<a href="#system-message-10"><span class="rst-problematic" id="rst-problematic-10">:paramref:`_engine.Connection.stream_results`</span></a> execution option for
unbuffered cursor support.</span></div>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p class="rst-last"><a href="#system-message-11"><span class="rst-problematic" id="rst-problematic-11">:ref:`engine_stream_results`</span></a></p>
</div>
</div>
<div class="rst-section" id="rst-unicode">
<span id="rst-mysql-unicode"></span><h2 class="heading">Unicode</h2>
<div class="rst-section" id="rst-charset-selection">
<h3 class="heading">Charset Selection</h3>
<p>Most MySQL / MariaDB DBAPIs offer the option to set the client character set for
a connection.   This is typically delivered using the <tt class="rst-docutils literal">charset</tt> parameter
in the URL, such as:</p>
<pre class="rst-literal-block">
e = create_engine(
    "mysql+pymysql://scott:tiger@localhost/test?charset=utf8mb4")
</pre>
<p>This charset is the <strong>client character set</strong> for the connection.  Some
MySQL DBAPIs will default this to a value such as <tt class="rst-docutils literal">latin1</tt>, and some
will make use of the <tt class="rst-docutils literal"><span class="pre">default-character-set</span></tt> setting in the <tt class="rst-docutils literal">my.cnf</tt>
file as well.   Documentation for the DBAPI in use should be consulted
for specific behavior.</p>
<p>The encoding used for Unicode has traditionally been <tt class="rst-docutils literal">'utf8'</tt>.  However, for
MySQL versions 5.5.3 and MariaDB 5.5 on forward, a new MySQL-specific encoding
<tt class="rst-docutils literal">'utf8mb4'</tt> has been introduced, and as of MySQL 8.0 a warning is emitted by
the server if plain <tt class="rst-docutils literal">utf8</tt> is specified within any server-side directives,
replaced with <tt class="rst-docutils literal">utf8mb3</tt>.  The rationale for this new encoding is due to the
fact that MySQL's legacy utf-8 encoding only supports codepoints up to three
bytes instead of four.  Therefore, when communicating with a MySQL or MariaDB
database that includes codepoints more than three bytes in size, this new
charset is preferred, if supported by both the database as well as the client
DBAPI, as in:</p>
<pre class="rst-literal-block">
e = create_engine(
    "mysql+pymysql://scott:tiger@localhost/test?charset=utf8mb4")
</pre>
<p>All modern DBAPIs should support the <tt class="rst-docutils literal">utf8mb4</tt> charset.</p>
<p>In order to use <tt class="rst-docutils literal">utf8mb4</tt> encoding for a schema that was created with  legacy
<tt class="rst-docutils literal">utf8</tt>, changes to the MySQL/MariaDB schema and/or server configuration may be
required.</p>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p class="rst-last"><a class="rst-reference external" href="https://dev.mysql.com/doc/refman/5.5/en/charset-unicode-utf8mb4.html" target="_top">The utf8mb4 Character Set </a> - in the MySQL documentation</p>
</div>
</div>
<div class="rst-section" id="rst-dealing-with-binary-data-warnings-and-unicode">
<span id="rst-mysql-binary-introducer"></span><h3 class="heading">Dealing with Binary Data Warnings and Unicode</h3>
<p>MySQL versions 5.6, 5.7 and later (not MariaDB at the time of this writing) now
emit a warning when attempting to pass binary data to the database, while a
character set encoding is also in place, when the binary data itself is not
valid for that encoding:</p>
<pre class="rst-literal-block">
default.py:509: Warning: (1300, "Invalid utf8mb4 character string:
'F9876A'")
  cursor.execute(statement, parameters)
</pre>
<p>This warning is due to the fact that the MySQL client library is attempting to
interpret the binary string as a unicode object even if a datatype such
as <code>.LargeBinary</code> is in use.   To resolve this, the SQL statement requires
a binary "character set introducer" be present before any non-NULL value
that renders like this:</p>
<pre class="rst-literal-block">
INSERT INTO table (data) VALUES (_binary %s)
</pre>
<p>These character set introducers are provided by the DBAPI driver, assuming the
use of mysqlclient or PyMySQL (both of which are recommended).  Add the query
string parameter <tt class="rst-docutils literal">binary_prefix=true</tt> to the URL to repair this warning:</p>
<pre class="rst-literal-block">
# mysqlclient
engine = create_engine(
    "mysql+mysqldb://scott:tiger@localhost/test?charset=utf8mb4&amp;binary_prefix=true")

# PyMySQL
engine = create_engine(
    "mysql+pymysql://scott:tiger@localhost/test?charset=utf8mb4&amp;binary_prefix=true")
</pre>
<p>The <tt class="rst-docutils literal">binary_prefix</tt> flag may or may not be supported by other MySQL drivers.</p>
<p>SQLAlchemy itself cannot render this <tt class="rst-docutils literal">_binary</tt> prefix reliably, as it does
not work with the NULL value, which is valid to be sent as a bound parameter.
As the MySQL driver renders parameters directly into the SQL string, it's the
most efficient place for this additional keyword to be passed.</p>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p class="rst-last"><a class="rst-reference external" href="https://dev.mysql.com/doc/refman/5.7/en/charset-introducer.html" target="_top">Character set introducers</a> - on the MySQL website</p>
</div>
</div>
</div>
<div class="rst-section" id="rst-ansi-quoting-style">
<h2 class="heading">ANSI Quoting Style</h2>
<p>MySQL / MariaDB feature two varieties of identifier "quoting style", one using
backticks and the other using quotes, e.g. <tt class="rst-docutils literal">`some_identifier`</tt>  vs.
<tt class="rst-docutils literal">"some_identifier"</tt>.   All MySQL dialects detect which version
is in use by checking the value of <a href="#system-message-12"><span class="rst-problematic" id="rst-problematic-12">:ref:`sql_mode&lt;mysql_sql_mode&gt;`</span></a> when a connection is first
established with a particular <code>_engine.Engine</code>.
This quoting style comes
into play when rendering table and column names as well as when reflecting
existing database structures.  The detection is entirely automatic and
no special configuration is needed to use either quoting style.</p>
</div>
<div class="rst-section" id="rst-changing-the-sql-mode">
<span id="rst-mysql-sql-mode"></span><h2 class="heading">Changing the sql_mode</h2>
<p>MySQL supports operating in multiple
<a class="rst-reference external" href="https://dev.mysql.com/doc/refman/8.0/en/sql-mode.html" target="_top">Server SQL Modes</a>  for
both Servers and Clients. To change the <tt class="rst-docutils literal">sql_mode</tt> for a given application, a
developer can leverage SQLAlchemy's Events system.</p>
<p>In the following example, the event system is used to set the <tt class="rst-docutils literal">sql_mode</tt> on
the <tt class="rst-docutils literal">first_connect</tt> and <tt class="rst-docutils literal">connect</tt> events:</p>
<pre class="rst-literal-block">
from sqlalchemy import create_engine, event

eng = create_engine("mysql://scott:tiger@localhost/test", echo='debug')

# `insert=True` will ensure this is the very first listener to run
@event.listens_for(eng, "connect", insert=True)
def connect(dbapi_connection, connection_record):
    cursor = dbapi_connection.cursor()
    cursor.execute("SET sql_mode = 'STRICT_ALL_TABLES'")

conn = eng.connect()
</pre>
<p>In the example illustrated above, the "connect" event will invoke the "SET"
statement on the connection at the moment a particular DBAPI connection is
first created for a given Pool, before the connection is made available to the
connection pool.  Additionally, because the function was registered with
<tt class="rst-docutils literal">insert=True</tt>, it will be prepended to the internal list of registered
functions.</p>
</div>
<div class="rst-section" id="rst-mysql-mariadb-sql-extensions">
<h2 class="heading">MySQL / MariaDB SQL Extensions</h2>
<p>Many of the MySQL / MariaDB SQL extensions are handled through SQLAlchemy's generic
function and operator support:</p>
<pre class="rst-literal-block">
table.select(table.c.password==func.md5('plaintext'))
table.select(table.c.username.op('regexp')('^[a-d]'))
</pre>
<p>And of course any valid SQL statement can be executed as a string as well.</p>
<p>Some limited direct support for MySQL / MariaDB extensions to SQL is currently
available.</p>
<ul>
<li><p class="rst-first">INSERT..ON DUPLICATE KEY UPDATE:  See
<a href="#system-message-13"><span class="rst-problematic" id="rst-problematic-13">:ref:`mysql_insert_on_duplicate_key_update`</span></a></p>
</li>
<li><p class="rst-first">SELECT pragma, use <code>_expression.Select.prefix_with</code> and
<code>_query.Query.prefix_with</code>:</p>
<pre class="rst-literal-block">
select(...).prefix_with(['HIGH_PRIORITY', 'SQL_SMALL_RESULT'])
</pre>
</li>
<li><p class="rst-first">UPDATE with LIMIT:</p>
<pre class="rst-literal-block">
update(..., mysql_limit=10, mariadb_limit=10)
</pre>
</li>
<li><p class="rst-first">optimizer hints, use <code>_expression.Select.prefix_with</code> and
<code>_query.Query.prefix_with</code>:</p>
<pre class="rst-literal-block">
select(...).prefix_with("/*+ NO_RANGE_OPTIMIZATION(t4 PRIMARY) */")
</pre>
</li>
<li><p class="rst-first">index hints, use <code>_expression.Select.with_hint</code> and
<code>_query.Query.with_hint</code>:</p>
<pre class="rst-literal-block">
select(...).with_hint(some_table, "USE INDEX xyz")
</pre>
</li>
<li><p class="rst-first">MATCH operator support:</p>
<pre class="rst-literal-block">
from sqlalchemy.dialects.mysql import match
select(...).where(match(col1, col2, against="some expr").in_boolean_mode())

.. seealso::

    `_mysql.match`
</pre>
</li>
</ul>
</div>
<div class="rst-section" id="rst-insert-on-duplicate-key-update-upsert">
<span id="rst-mysql-insert-on-duplicate-key-update"></span><h2 class="heading">INSERT...ON DUPLICATE KEY UPDATE (Upsert)</h2>
<p>MySQL / MariaDB allow "upserts" (update or insert)
of rows into a table via the <tt class="rst-docutils literal">ON DUPLICATE KEY UPDATE</tt> clause of the
<tt class="rst-docutils literal">INSERT</tt> statement.  A candidate row will only be inserted if that row does
not match an existing primary or unique key in the table; otherwise, an UPDATE
will be performed.   The statement allows for separate specification of the
values to INSERT versus the values for UPDATE.</p>
<p>SQLAlchemy provides <tt class="rst-docutils literal">ON DUPLICATE KEY UPDATE</tt> support via the MySQL-specific
<code>.mysql.insert()</code> function, which provides
the generative method <code>~.mysql.Insert.on_duplicate_key_update</code>:</p>
<pre class="rst-code rst-pycon+sql rst-literal-block">
&gt;&gt;&gt; from sqlalchemy.dialects.mysql import insert

&gt;&gt;&gt; insert_stmt = insert(my_table).values(
...     id='some_existing_id',
...     data='inserted value')

&gt;&gt;&gt; on_duplicate_key_stmt = insert_stmt.on_duplicate_key_update(
...     data=insert_stmt.inserted.data,
...     status='U'
... )
&gt;&gt;&gt; print(on_duplicate_key_stmt)
{opensql}INSERT INTO my_table (id, data) VALUES (%s, %s)
ON DUPLICATE KEY UPDATE data = VALUES(data), status = %s
</pre>
<p>Unlike PostgreSQL's "ON CONFLICT" phrase, the "ON DUPLICATE KEY UPDATE"
phrase will always match on any primary key or unique key, and will always
perform an UPDATE if there's a match; there are no options for it to raise
an error or to skip performing an UPDATE.</p>
<p><tt class="rst-docutils literal">ON DUPLICATE KEY UPDATE</tt> is used to perform an update of the already
existing row, using any combination of new values as well as values
from the proposed insertion.   These values are normally specified using
keyword arguments passed to the
<code>_mysql.Insert.on_duplicate_key_update</code>
given column key values (usually the name of the column, unless it
specifies <a href="#system-message-14"><span class="rst-problematic" id="rst-problematic-14">:paramref:`_schema.Column.key`</span></a>
) as keys and literal or SQL expressions
as values:</p>
<pre class="rst-code rst-pycon+sql rst-literal-block">
&gt;&gt;&gt; insert_stmt = insert(my_table).values(
...          id='some_existing_id',
...          data='inserted value')

&gt;&gt;&gt; on_duplicate_key_stmt = insert_stmt.on_duplicate_key_update(
...     data="some data",
...     updated_at=func.current_timestamp(),
... )

&gt;&gt;&gt; print(on_duplicate_key_stmt)
{opensql}INSERT INTO my_table (id, data) VALUES (%s, %s)
ON DUPLICATE KEY UPDATE data = %s, updated_at = CURRENT_TIMESTAMP
</pre>
<p>In a manner similar to that of <code>.UpdateBase.values</code>, other parameter
forms are accepted, including a single dictionary:</p>
<pre class="rst-code rst-pycon+sql rst-literal-block">
&gt;&gt;&gt; on_duplicate_key_stmt = insert_stmt.on_duplicate_key_update(
...     {"data": "some data", "updated_at": func.current_timestamp()},
... )
</pre>
<p>as well as a list of 2-tuples, which will automatically provide
a parameter-ordered UPDATE statement in a manner similar to that described
at <a href="#system-message-15"><span class="rst-problematic" id="rst-problematic-15">:ref:`updates_order_parameters`</span></a>.  Unlike the <code>_expression.Update</code>
object,
no special flag is needed to specify the intent since the argument form is
this context is unambiguous:</p>
<pre class="rst-code rst-pycon+sql rst-literal-block">
&gt;&gt;&gt; on_duplicate_key_stmt = insert_stmt.on_duplicate_key_update(
...     [
...         ("data", "some data"),
...         ("updated_at", func.current_timestamp()),
...     ]
... )

&gt;&gt;&gt; print(on_duplicate_key_stmt)
{opensql}INSERT INTO my_table (id, data) VALUES (%s, %s)
ON DUPLICATE KEY UPDATE data = %s, updated_at = CURRENT_TIMESTAMP
</pre>
<div class="rst-versionchanged">
<span class="rst-versionmodified rst-changed">Changed in version 1.3: </span><span>support for parameter-ordered UPDATE clause within
MySQL ON DUPLICATE KEY UPDATE</span></div>
<div class="rst-admonition warning">
<p class="rst-first rst-admonition-title">Warning</p>
<p class="rst-last">The <code>_mysql.Insert.on_duplicate_key_update</code>
method does <strong>not</strong> take into
account Python-side default UPDATE values or generation functions, e.g.
e.g. those specified using <a href="#system-message-16"><span class="rst-problematic" id="rst-problematic-16">:paramref:`_schema.Column.onupdate`</span></a>.
These values will not be exercised for an ON DUPLICATE KEY style of UPDATE,
unless they are manually specified explicitly in the parameters.</p>
</div>
<p>In order to refer to the proposed insertion row, the special alias
<code>_mysql.Insert.inserted</code> is available as an attribute on
the <code>_mysql.Insert</code> object; this object is a
<code>_expression.ColumnCollection</code> which contains all columns of the target
table:</p>
<pre class="rst-code rst-pycon+sql rst-literal-block">
&gt;&gt;&gt; stmt = insert(my_table).values(
...     id='some_id',
...     data='inserted value',
...     author='jlh')

&gt;&gt;&gt; do_update_stmt = stmt.on_duplicate_key_update(
...     data="updated value",
...     author=stmt.inserted.author
... )

&gt;&gt;&gt; print(do_update_stmt)
{opensql}INSERT INTO my_table (id, data, author) VALUES (%s, %s, %s)
ON DUPLICATE KEY UPDATE data = %s, author = VALUES(author)
</pre>
<p>When rendered, the "inserted" namespace will produce the expression
<tt class="rst-docutils literal"><span class="pre">VALUES(&lt;columnname&gt;)</span></tt>.</p>
<div class="rst-versionadded">
<span class="rst-versionmodified rst-added">New in version 1.2: </span><span>Added support for MySQL ON DUPLICATE KEY UPDATE clause</span></div>
</div>
<div class="rst-section" id="rst-rowcount-support">
<h2 class="heading">rowcount Support</h2>
<p>SQLAlchemy standardizes the DBAPI <tt class="rst-docutils literal">cursor.rowcount</tt> attribute to be the
usual definition of "number of rows matched by an UPDATE or DELETE" statement.
This is in contradiction to the default setting on most MySQL DBAPI drivers,
which is "number of rows actually modified/deleted".  For this reason, the
SQLAlchemy MySQL dialects always add the <tt class="rst-docutils literal">constants.CLIENT.FOUND_ROWS</tt>
flag, or whatever is equivalent for the target dialect, upon connection.
This setting is currently hardcoded.</p>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p class="rst-last"><code>_engine.CursorResult.rowcount</code></p>
</div>
</div>
<div class="rst-section" id="rst-mysql-mariadb-specific-index-options">
<span id="rst-mysql-indexes"></span><h2 class="heading">MySQL / MariaDB- Specific Index Options</h2>
<p>MySQL and MariaDB-specific extensions to the <code>.Index</code> construct are available.</p>
<div class="rst-section" id="rst-index-length">
<h3 class="heading">Index Length</h3>
<p>MySQL and MariaDB both provide an option to create index entries with a certain length, where
"length" refers to the number of characters or bytes in each value which will
become part of the index. SQLAlchemy provides this feature via the
<tt class="rst-docutils literal">mysql_length</tt> and/or <tt class="rst-docutils literal">mariadb_length</tt> parameters:</p>
<pre class="rst-literal-block">
Index('my_index', my_table.c.data, mysql_length=10, mariadb_length=10)

Index('a_b_idx', my_table.c.a, my_table.c.b, mysql_length={'a': 4,
                                                           'b': 9})

Index('a_b_idx', my_table.c.a, my_table.c.b, mariadb_length={'a': 4,
                                                           'b': 9})
</pre>
<p>Prefix lengths are given in characters for nonbinary string types and in bytes
for binary string types. The value passed to the keyword argument <em>must</em> be
either an integer (and, thus, specify the same prefix length value for all
columns of the index) or a dict in which keys are column names and values are
prefix length values for corresponding columns. MySQL and MariaDB only allow a
length for a column of an index if it is for a CHAR, VARCHAR, TEXT, BINARY,
VARBINARY and BLOB.</p>
</div>
<div class="rst-section" id="rst-index-prefixes">
<h3 class="heading">Index Prefixes</h3>
<p>MySQL storage engines permit you to specify an index prefix when creating
an index. SQLAlchemy provides this feature via the
<tt class="rst-docutils literal">mysql_prefix</tt> parameter on <code>.Index</code>:</p>
<pre class="rst-literal-block">
Index('my_index', my_table.c.data, mysql_prefix='FULLTEXT')
</pre>
<p>The value passed to the keyword argument will be simply passed through to the
underlying CREATE INDEX, so it <em>must</em> be a valid index prefix for your MySQL
storage engine.</p>
<div class="rst-versionadded">
<span class="rst-versionmodified rst-added">New in version 1.1.5.</span></div>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p class="rst-last"><a class="rst-reference external" href="https://dev.mysql.com/doc/refman/5.0/en/create-index.html" target="_top">CREATE INDEX</a> - MySQL documentation</p>
</div>
</div>
<div class="rst-section" id="rst-index-types">
<h3 class="heading">Index Types</h3>
<p>Some MySQL storage engines permit you to specify an index type when creating
an index or primary key constraint. SQLAlchemy provides this feature via the
<tt class="rst-docutils literal">mysql_using</tt> parameter on <code>.Index</code>:</p>
<pre class="rst-literal-block">
Index('my_index', my_table.c.data, mysql_using='hash', mariadb_using='hash')
</pre>
<p>As well as the <tt class="rst-docutils literal">mysql_using</tt> parameter on <code>.PrimaryKeyConstraint</code>:</p>
<pre class="rst-literal-block">
PrimaryKeyConstraint("data", mysql_using='hash', mariadb_using='hash')
</pre>
<p>The value passed to the keyword argument will be simply passed through to the
underlying CREATE INDEX or PRIMARY KEY clause, so it <em>must</em> be a valid index
type for your MySQL storage engine.</p>
<p>More information can be found at:</p>
<p><a class="rst-reference external" href="https://dev.mysql.com/doc/refman/5.0/en/create-index.html" target="_top">https://dev.mysql.com/doc/refman/5.0/en/create-index.html</a></p>
<p><a class="rst-reference external" href="https://dev.mysql.com/doc/refman/5.0/en/create-table.html" target="_top">https://dev.mysql.com/doc/refman/5.0/en/create-table.html</a></p>
</div>
<div class="rst-section" id="rst-index-parsers">
<h3 class="heading">Index Parsers</h3>
<p>CREATE FULLTEXT INDEX in MySQL also supports a "WITH PARSER" option.  This
is available using the keyword argument <tt class="rst-docutils literal">mysql_with_parser</tt>:</p>
<pre class="rst-literal-block">
Index(
    'my_index', my_table.c.data,
    mysql_prefix='FULLTEXT', mysql_with_parser="ngram",
    mariadb_prefix='FULLTEXT', mariadb_with_parser="ngram",
)
</pre>
<div class="rst-versionadded">
<span class="rst-versionmodified rst-added">New in version 1.3.</span></div>
</div>
</div>
<div class="rst-section" id="rst-mysql-mariadb-foreign-keys">
<span id="rst-mysql-foreign-keys"></span><h2 class="heading">MySQL / MariaDB Foreign Keys</h2>
<p>MySQL and MariaDB's behavior regarding foreign keys has some important caveats.</p>
<div class="rst-section" id="rst-foreign-key-arguments-to-avoid">
<h3 class="heading">Foreign Key Arguments to Avoid</h3>
<p>Neither MySQL nor MariaDB support the foreign key arguments "DEFERRABLE", "INITIALLY",
or "MATCH".  Using the <tt class="rst-docutils literal">deferrable</tt> or <tt class="rst-docutils literal">initially</tt> keyword argument with
<code>_schema.ForeignKeyConstraint</code> or <code>_schema.ForeignKey</code>
will have the effect of
these keywords being rendered in a DDL expression, which will then raise an
error on MySQL or MariaDB.  In order to use these keywords on a foreign key while having
them ignored on a MySQL / MariaDB backend, use a custom compile rule:</p>
<pre class="rst-literal-block">
from sqlalchemy.ext.compiler import compiles
from sqlalchemy.schema import ForeignKeyConstraint

@compiles(ForeignKeyConstraint, "mysql", "mariadb")
def process(element, compiler, **kw):
    element.deferrable = element.initially = None
    return compiler.visit_foreign_key_constraint(element, **kw)
</pre>
<p>The "MATCH" keyword is in fact more insidious, and is explicitly disallowed
by SQLAlchemy in conjunction with the MySQL or MariaDB backends.  This argument is
silently ignored by MySQL / MariaDB, but in addition has the effect of ON UPDATE and ON
DELETE options also being ignored by the backend.   Therefore MATCH should
never be used with the MySQL / MariaDB backends; as is the case with DEFERRABLE and
INITIALLY, custom compilation rules can be used to correct a
ForeignKeyConstraint at DDL definition time.</p>
</div>
<div class="rst-section" id="rst-reflection-of-foreign-key-constraints">
<h3 class="heading">Reflection of Foreign Key Constraints</h3>
<p>Not all MySQL / MariaDB storage engines support foreign keys.  When using the
very common <tt class="rst-docutils literal">MyISAM</tt> MySQL storage engine, the information loaded by table
reflection will not include foreign keys.  For these tables, you may supply a
<code>~sqlalchemy.ForeignKeyConstraint</code> at reflection time:</p>
<pre class="rst-literal-block">
Table('mytable', metadata,
      ForeignKeyConstraint(['other_id'], ['othertable.other_id']),
      autoload_with=engine
     )
</pre>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p class="rst-last"><a href="#system-message-17"><span class="rst-problematic" id="rst-problematic-17">:ref:`mysql_storage_engines`</span></a></p>
</div>
</div>
</div>
<div class="rst-section" id="rst-mysql-mariadb-unique-constraints-and-reflection">
<span id="rst-mysql-unique-constraints"></span><h2 class="heading">MySQL / MariaDB Unique Constraints and Reflection</h2>
<p>SQLAlchemy supports both the <code>.Index</code> construct with the
flag <tt class="rst-docutils literal">unique=True</tt>, indicating a UNIQUE index, as well as the
<code>.UniqueConstraint</code> construct, representing a UNIQUE constraint.
Both objects/syntaxes are supported by MySQL / MariaDB when emitting DDL to create
these constraints.  However, MySQL / MariaDB does not have a unique constraint
construct that is separate from a unique index; that is, the "UNIQUE"
constraint on MySQL / MariaDB is equivalent to creating a "UNIQUE INDEX".</p>
<p>When reflecting these constructs, the
<code>_reflection.Inspector.get_indexes</code>
and the <code>_reflection.Inspector.get_unique_constraints</code>
methods will <strong>both</strong>
return an entry for a UNIQUE index in MySQL / MariaDB.  However, when performing
full table reflection using <tt class="rst-docutils literal"><span class="pre">Table(...,</span> autoload_with=engine)</tt>,
the <code>.UniqueConstraint</code> construct is
<strong>not</strong> part of the fully reflected <code>_schema.Table</code> construct under any
circumstances; this construct is always represented by a <code>.Index</code>
with the <tt class="rst-docutils literal">unique=True</tt> setting present in the <code>_schema.Table.indexes</code>
collection.</p>
</div>
<div class="rst-section" id="rst-timestamp-datetime-issues">
<h2 class="heading">TIMESTAMP / DATETIME issues</h2>
<div class="rst-section" id="rst-rendering-on-update-current-timestamp-for-mysql-mariadb-s-explicit-defaults-for-timestamp">
<span id="rst-mysql-timestamp-onupdate"></span><h3 class="heading">Rendering ON UPDATE CURRENT TIMESTAMP for MySQL / MariaDB's explicit_defaults_for_timestamp</h3>
<p>MySQL / MariaDB have historically expanded the DDL for the <code>_types.TIMESTAMP</code>
datatype into the phrase "TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE
CURRENT_TIMESTAMP", which includes non-standard SQL that automatically updates
the column with the current timestamp when an UPDATE occurs, eliminating the
usual need to use a trigger in such a case where server-side update changes are
desired.</p>
<p>MySQL 5.6 introduced a new flag <a class="rst-reference external" href="https://dev.mysql.com/doc/refman/5.6/en/server-system-variables.html#sysvar_explicit_defaults_for_timestamp" target="_top">explicit_defaults_for_timestamp</a> which disables the above behavior,
and in MySQL 8 this flag defaults to true, meaning in order to get a MySQL
"on update timestamp" without changing this flag, the above DDL must be
rendered explicitly.   Additionally, the same DDL is valid for use of the
<tt class="rst-docutils literal">DATETIME</tt> datatype as well.</p>
<p>SQLAlchemy's MySQL dialect does not yet have an option to generate
MySQL's "ON UPDATE CURRENT_TIMESTAMP" clause, noting that this is not a general
purpose "ON UPDATE" as there is no such syntax in standard SQL.  SQLAlchemy's
<a href="#system-message-18"><span class="rst-problematic" id="rst-problematic-18">:paramref:`_schema.Column.server_onupdate`</span></a> parameter is currently not related
to this special MySQL behavior.</p>
<p>To generate this DDL, make use of the <a href="#system-message-19"><span class="rst-problematic" id="rst-problematic-19">:paramref:`_schema.Column.server_default`</span></a>
parameter and pass a textual clause that also includes the ON UPDATE clause:</p>
<pre class="rst-literal-block">
from sqlalchemy import Table, MetaData, Column, Integer, String, TIMESTAMP
from sqlalchemy import text

metadata = MetaData()

mytable = Table(
    "mytable",
    metadata,
    Column('id', Integer, primary_key=True),
    Column('data', String(50)),
    Column(
        'last_updated',
        TIMESTAMP,
        server_default=text("CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP")
    )
)
</pre>
<p>The same instructions apply to use of the <code>_types.DateTime</code> and
<code>_types.DATETIME</code> datatypes:</p>
<pre class="rst-literal-block">
from sqlalchemy import DateTime

mytable = Table(
    "mytable",
    metadata,
    Column('id', Integer, primary_key=True),
    Column('data', String(50)),
    Column(
        'last_updated',
        DateTime,
        server_default=text("CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP")
    )
)
</pre>
<p>Even though the <a href="#system-message-20"><span class="rst-problematic" id="rst-problematic-20">:paramref:`_schema.Column.server_onupdate`</span></a> feature does not
generate this DDL, it still may be desirable to signal to the ORM that this
updated value should be fetched.  This syntax looks like the following:</p>
<pre class="rst-literal-block">
from sqlalchemy.schema import FetchedValue

class MyClass(Base):
    __tablename__ = 'mytable'

    id = Column(Integer, primary_key=True)
    data = Column(String(50))
    last_updated = Column(
        TIMESTAMP,
        server_default=text("CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP"),
        server_onupdate=FetchedValue()
    )
</pre>
</div>
<div class="rst-section" id="rst-timestamp-columns-and-null">
<span id="rst-mysql-timestamp-null"></span><h3 class="heading">TIMESTAMP Columns and NULL</h3>
<p>MySQL historically enforces that a column which specifies the
TIMESTAMP datatype implicitly includes a default value of
CURRENT_TIMESTAMP, even though this is not stated, and additionally
sets the column as NOT NULL, the opposite behavior vs. that of all
other datatypes:</p>
<pre class="rst-literal-block">
mysql&gt; CREATE TABLE ts_test (
    -&gt; a INTEGER,
    -&gt; b INTEGER NOT NULL,
    -&gt; c TIMESTAMP,
    -&gt; d TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    -&gt; e TIMESTAMP NULL);
Query OK, 0 rows affected (0.03 sec)

mysql&gt; SHOW CREATE TABLE ts_test;
+---------+-----------------------------------------------------
| Table   | Create Table
+---------+-----------------------------------------------------
| ts_test | CREATE TABLE `ts_test` (
  `a` int(11) DEFAULT NULL,
  `b` int(11) NOT NULL,
  `c` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `d` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `e` timestamp NULL DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1
</pre>
<p>Above, we see that an INTEGER column defaults to NULL, unless it is specified
with NOT NULL.   But when the column is of type TIMESTAMP, an implicit
default of CURRENT_TIMESTAMP is generated which also coerces the column
to be a NOT NULL, even though we did not specify it as such.</p>
<p>This behavior of MySQL can be changed on the MySQL side using the
<a class="rst-reference external" href="https://dev.mysql.com/doc/refman/5.6/en/server-system-variables.html#sysvar_explicit_defaults_for_timestamp" target="_top">explicit_defaults_for_timestamp</a> configuration flag introduced in
MySQL 5.6.  With this server setting enabled, TIMESTAMP columns behave like
any other datatype on the MySQL side with regards to defaults and nullability.</p>
<p>However, to accommodate the vast majority of MySQL databases that do not
specify this new flag, SQLAlchemy emits the "NULL" specifier explicitly with
any TIMESTAMP column that does not specify <tt class="rst-docutils literal">nullable=False</tt>.   In order to
accommodate newer databases that specify <tt class="rst-docutils literal">explicit_defaults_for_timestamp</tt>,
SQLAlchemy also emits NOT NULL for TIMESTAMP columns that do specify
<tt class="rst-docutils literal">nullable=False</tt>.   The following example illustrates:</p>
<pre class="rst-literal-block">
from sqlalchemy import MetaData, Integer, Table, Column, text
from sqlalchemy.dialects.mysql import TIMESTAMP

m = MetaData()
t = Table('ts_test', m,
        Column('a', Integer),
        Column('b', Integer, nullable=False),
        Column('c', TIMESTAMP),
        Column('d', TIMESTAMP, nullable=False)
    )


from sqlalchemy import create_engine
e = create_engine("mysql://scott:tiger@localhost/test", echo=True)
m.create_all(e)
</pre>
<p>output:</p>
<pre class="rst-literal-block">
CREATE TABLE ts_test (
    a INTEGER,
    b INTEGER NOT NULL,
    c TIMESTAMP NULL,
    d TIMESTAMP NOT NULL
)
</pre>
<div class="rst-versionchanged">
<span class="rst-versionmodified rst-changed">Changed in version 1.0.0: </span><span>- SQLAlchemy now renders NULL or NOT NULL in all
cases for TIMESTAMP columns, to accommodate
<tt class="rst-docutils literal">explicit_defaults_for_timestamp</tt>.  Prior to this version, it will
not render "NOT NULL" for a TIMESTAMP column that is <tt class="rst-docutils literal">nullable=False</tt>.</span></div>
</div>
</div>
</div>
      </div>

      <div id="splitTables">
        <table class="children sortable" id="id14245">
  
  
  <tr class="class">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.databases.mysql.MariaDBIdentifierPreparer.html" class="internal-link" title="sqlalchemy.databases.mysql.MariaDBIdentifierPreparer">​Maria​DBIdentifier​Preparer</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.databases.mysql.MySQLCompiler.html" class="internal-link" title="sqlalchemy.databases.mysql.MySQLCompiler">​My​SQLCompiler</a></code></td>
    <td><span class="undocumented">No class docstring; 1/4 class variable, 5/34 methods documented</span></td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.databases.mysql.MySQLDDLCompiler.html" class="internal-link" title="sqlalchemy.databases.mysql.MySQLDDLCompiler">​My​SQLDDLCompiler</a></code></td>
    <td><span class="undocumented">No class docstring; 2/10 methods documented</span></td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.databases.mysql.MySQLDialect.html" class="internal-link" title="sqlalchemy.databases.mysql.MySQLDialect">​My​SQLDialect</a></code></td>
    <td>Details of the MySQL dialect. Not used directly in application code.</td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.databases.mysql.MySQLExecutionContext.html" class="internal-link" title="sqlalchemy.databases.mysql.MySQLExecutionContext">​My​SQLExecution​Context</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.databases.mysql.MySQLIdentifierPreparer.html" class="internal-link" title="sqlalchemy.databases.mysql.MySQLIdentifierPreparer">​My​SQLIdentifier​Preparer</a></code></td>
    <td><span class="undocumented">No class docstring; 1/2 method documented</span></td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.databases.mysql.MySQLTypeCompiler.html" class="internal-link" title="sqlalchemy.databases.mysql.MySQLTypeCompiler">​My​SQLType​Compiler</a></code></td>
    <td><span class="undocumented">No class docstring; 2/39 methods documented</span></td>
  </tr><tr class="constant">
    
    <td>Constant</td>
    <td><code><a href="#AUTOCOMMIT_RE" class="internal-link" title="sqlalchemy.databases.mysql.AUTOCOMMIT_RE">AUTOCOMMIT​_RE</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="constant">
    
    <td>Constant</td>
    <td><code><a href="#SET_RE" class="internal-link" title="sqlalchemy.databases.mysql.SET_RE">SET​_RE</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="variable">
    
    <td>Variable</td>
    <td><code><a href="#colspecs" class="internal-link" title="sqlalchemy.databases.mysql.colspecs">colspecs</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="variable">
    
    <td>Variable</td>
    <td><code><a href="#ischema_names" class="internal-link" title="sqlalchemy.databases.mysql.ischema_names">ischema​_names</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="class private">
    
    <td>Class</td>
    <td><code><a href="sqlalchemy.databases.mysql._DecodingRow.html" class="internal-link" title="sqlalchemy.databases.mysql._DecodingRow">_​Decoding​Row</a></code></td>
    <td>Return unicode-decoded values based on type inspection.</td>
  </tr>
</table>
        

          
      </div>

      <div id="childList">

        <div class="baseconstant">
  
  
  <a name="sqlalchemy.databases.mysql.AUTOCOMMIT_RE">
    
  </a>
  <a name="AUTOCOMMIT_RE">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">AUTOCOMMIT_RE</span> =
    
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code>re.compile(r<span class="rst-variable-quote">'</span>\s<span class="rst-re-op">*</span><span class="rst-re-group">(?:</span>UPDATE<span class="rst-re-op">|</span>INSERT<span class="rst-re-op">|</span>CREATE<span class="rst-re-op">|</span>DELETE<span class="rst-re-op">|</span>DROP<span class="rst-re-op">|</span>ALTER<span class="rst-re-op">|</span>LOAD <span class="rst-re-op">+</span>DATA<span class="rst-re-op">|</span>REPLACE<span class="rst-re-group">)</span><span class="rst-variable-quote">'</span>,
           re.I|re.UNICODE)</code></pre></td></tr></table>
  </div>
</div><div class="baseconstant">
  
  
  <a name="sqlalchemy.databases.mysql.SET_RE">
    
  </a>
  <a name="SET_RE">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">SET_RE</span> =
    
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code>re.compile(r<span class="rst-variable-quote">'</span>\s<span class="rst-re-op">*</span>SET\s<span class="rst-re-op">+</span><span class="rst-re-group">(?:</span><span class="rst-re-group">(?:</span>GLOBAL<span class="rst-re-op">|</span>SESSION<span class="rst-re-group">)</span>\s<span class="rst-re-op">+</span><span class="rst-re-group">)</span><span class="rst-re-op">?</span>\w<span class="rst-variable-quote">'</span>,
           re.I|re.UNICODE)</code></pre></td></tr></table>
  </div>
</div><div class="basevariable">
  
  
  <a name="sqlalchemy.databases.mysql.colspecs">
    
  </a>
  <a name="colspecs">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">colspecs</span> =
    
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div><div class="basevariable">
  
  
  <a name="sqlalchemy.databases.mysql.ischema_names">
    
  </a>
  <a name="ischema_names">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">ischema_names</span> =
    
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div>

      </div>
    </div>

    <footer class="navbar navbar-default">
  
  <div class="container">
    <a href="index.html">API Documentation</a> for sqlalchemy,
  generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a>
    22.2.0 at 2022-02-23 04:41:59.
  </div>
</footer>

    <script src="pydoctor.js" type="text/javascript"></script>

  </body>
</html>