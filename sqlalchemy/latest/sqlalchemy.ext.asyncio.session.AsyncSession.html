<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  

  <head>
    
    <title>sqlalchemy.ext.asyncio.session.AsyncSession</title>
    <meta name="generator" content="pydoctor 22.2.0"> 
        
    </meta>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=0.75" />
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="apidocs.css" />
    <link rel="stylesheet" type="text/css" href="extra.css" />
</head>

  <body>

    

    <nav class="navbar navbar-default">
  
  <div class="container">

    <div class="navbar-header">
      
      <div class="navlinks">
          <span class="navbar-brand">
            sqlalchemy <a href="index.html">API Documentation</a>
          </span>

          <a href="moduleIndex.html">
            Modules
          </a>

          <a href="classIndex.html">
            Classes
          </a>

          <a href="nameIndex.html">
            Names
          </a>
      </div>

    </div>
  </div>
</nav>

    

    <div class="container">

      <div class="page-header">
        <h1 class="class"><code><code><a href="index.html" class="internal-link">sqlalchemy</a></code><wbr></wbr>.<code><a href="sqlalchemy.ext.html" class="internal-link" title="sqlalchemy.ext">ext</a></code><wbr></wbr>.<code><a href="sqlalchemy.ext.asyncio.html" class="internal-link" title="sqlalchemy.ext.asyncio">asyncio</a></code><wbr></wbr>.<code><a href="sqlalchemy.ext.asyncio.session.html" class="internal-link" title="sqlalchemy.ext.asyncio.session">session</a></code><wbr></wbr>.<code><a href="sqlalchemy.ext.asyncio.session.AsyncSession.html" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession">AsyncSession</a></code></code></h1>
        <div id="showPrivate">
          <button class="btn btn-link" onclick="togglePrivate()">Toggle Private API</button>
        </div>
      </div>

      <div class="categoryHeader">
        class documentation
      </div>

      <div class="extrasDocstring">
        <p><code><span class="py-keyword">class</span> <span class="py-defname">AsyncSession</span>(<a href="sqlalchemy.ext.asyncio.base.ReversibleProxy.html" class="internal-link" title="sqlalchemy.ext.asyncio.base.ReversibleProxy">ReversibleProxy</a>):</code></p>
        <p><a href="classIndex.html#sqlalchemy.ext.asyncio.session.AsyncSession">View In Hierarchy</a></p>
      </div>

      <div class="moduleDocstring">
        <div><p>Asyncio version of <code>_orm.Session</code>.</p>
<p>The <code>_asyncio.AsyncSession</code> is a proxy for a traditional
<code>_orm.Session</code> instance.</p>
<div class="rst-versionadded">
<span class="rst-versionmodified rst-added">New in version 1.4.</span></div>
<p>To use an <code>_asyncio.AsyncSession</code> with custom <code>_orm.Session</code>
implementations, see the
<a href="#system-message-1"><span class="rst-problematic" id="rst-problematic-1">:paramref:`_asyncio.AsyncSession.sync_session_class`</span></a> parameter.</p>
</div>
      </div>

      <div id="splitTables">
        <table class="children sortable" id="id16555">
  
  
  <tr class="classmethod">
    
    <td>Async Class Method</td>
    <td><code><a href="#close_all" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession.close_all">close​_all</a></code></td>
    <td>Close all <code>_asyncio.AsyncSession</code> sessions.</td>
  </tr><tr class="method">
    
    <td>Async Method</td>
    <td><code><a href="#__aenter__" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession.__aenter__">__aenter__</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method">
    
    <td>Async Method</td>
    <td><code><a href="#__aexit__" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession.__aexit__">__aexit__</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#__init__" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession.__init__">__init__</a></code></td>
    <td>Construct a new <code>_asyncio.AsyncSession</code>.</td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#begin" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession.begin">begin</a></code></td>
    <td>Return an <code>_asyncio.AsyncSessionTransaction</code> object.</td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#begin_nested" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession.begin_nested">begin​_nested</a></code></td>
    <td>Return an <code>_asyncio.AsyncSessionTransaction</code> object which will begin a "nested" transaction, e.g. SAVEPOINT.</td>
  </tr><tr class="method">
    
    <td>Async Method</td>
    <td><code><a href="#close" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession.close">close</a></code></td>
    <td>Close out the transactional resources and ORM objects used by this <code>_asyncio.AsyncSession</code>.</td>
  </tr><tr class="method">
    
    <td>Async Method</td>
    <td><code><a href="#commit" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession.commit">commit</a></code></td>
    <td>Commit the current transaction in progress.</td>
  </tr><tr class="method">
    
    <td>Async Method</td>
    <td><code><a href="#connection" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession.connection">connection</a></code></td>
    <td>Return a <code>_asyncio.AsyncConnection</code> object corresponding to this <code>.Session</code> object's transactional state.</td>
  </tr><tr class="method">
    
    <td>Async Method</td>
    <td><code><a href="#delete" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession.delete">delete</a></code></td>
    <td>Mark an instance as deleted.</td>
  </tr><tr class="method">
    
    <td>Async Method</td>
    <td><code><a href="#execute" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession.execute">execute</a></code></td>
    <td>Execute a statement and return a buffered <code>_engine.Result</code> object.</td>
  </tr><tr class="method">
    
    <td>Async Method</td>
    <td><code><a href="#flush" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession.flush">flush</a></code></td>
    <td>Flush all the object changes to the database.</td>
  </tr><tr class="method">
    
    <td>Async Method</td>
    <td><code><a href="#get" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession.get">get</a></code></td>
    <td>Return an instance based on the given primary key identifier, or <tt class="rst-docutils literal">None</tt> if not found.</td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#get_bind" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession.get_bind">get​_bind</a></code></td>
    <td>Return a "bind" to which the synchronous proxied <code>_orm.Session</code> is bound.</td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#get_nested_transaction" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession.get_nested_transaction">get​_nested​_transaction</a></code></td>
    <td>Return the current nested transaction in progress, if any.</td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#get_transaction" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession.get_transaction">get​_transaction</a></code></td>
    <td>Return the current root transaction in progress, if any.</td>
  </tr><tr class="method">
    
    <td>Async Method</td>
    <td><code><a href="#invalidate" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession.invalidate">invalidate</a></code></td>
    <td>Close this Session, using connection invalidation.</td>
  </tr><tr class="method">
    
    <td>Async Method</td>
    <td><code><a href="#merge" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession.merge">merge</a></code></td>
    <td>Copy the state of a given instance into a corresponding instance within this <code>_asyncio.AsyncSession</code>.</td>
  </tr><tr class="method">
    
    <td>Async Method</td>
    <td><code><a href="#refresh" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession.refresh">refresh</a></code></td>
    <td>Expire and refresh the attributes on the given instance.</td>
  </tr><tr class="method">
    
    <td>Async Method</td>
    <td><code><a href="#rollback" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession.rollback">rollback</a></code></td>
    <td>Rollback the current transaction in progress.</td>
  </tr><tr class="method">
    
    <td>Async Method</td>
    <td><code><a href="#run_sync" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession.run_sync">run​_sync</a></code></td>
    <td>Invoke the given sync callable passing sync self as the first argument.</td>
  </tr><tr class="method">
    
    <td>Async Method</td>
    <td><code><a href="#scalar" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession.scalar">scalar</a></code></td>
    <td>Execute a statement and return a scalar result.</td>
  </tr><tr class="method">
    
    <td>Async Method</td>
    <td><code><a href="#scalars" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession.scalars">scalars</a></code></td>
    <td>Execute a statement and return scalar results.</td>
  </tr><tr class="method">
    
    <td>Async Method</td>
    <td><code><a href="#stream" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession.stream">stream</a></code></td>
    <td>Execute a statement and return a streaming <code>_asyncio.AsyncResult</code> object.</td>
  </tr><tr class="method">
    
    <td>Async Method</td>
    <td><code><a href="#stream_scalars" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession.stream_scalars">stream​_scalars</a></code></td>
    <td>Execute a statement and return a stream of scalar results.</td>
  </tr><tr class="classvariable">
    
    <td>Class Variable</td>
    <td><code><a href="#dispatch" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession.dispatch">dispatch</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="#bind" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession.bind">bind</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="#binds" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession.binds">binds</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="#sync_session" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession.sync_session">sync​_session</a></code></td>
    <td>Reference to the underlying <code>_orm.Session</code> this <code>_asyncio.AsyncSession</code> proxies requests towards.</td>
  </tr><tr class="instancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="#sync_session_class" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession.sync_session_class">sync​_session​_class</a></code></td>
    <td>The class or callable that provides the underlying <code>_orm.Session</code> instance for a particular <code>_asyncio.AsyncSession</code>.</td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><code><a href="#_maker_context_manager" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession._maker_context_manager">​_maker​_context​_manager</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="classvariable private">
    
    <td>Class Variable</td>
    <td><code><a href="#_is_asyncio" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession._is_asyncio">​_is​_asyncio</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_proxied" class="internal-link" title="sqlalchemy.ext.asyncio.session.AsyncSession._proxied">​_proxied</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr>
</table>
        
          <p class="inheritedFrom">
            Inherited from <code><a href="sqlalchemy.ext.asyncio.base.ReversibleProxy.html" class="internal-link" title="sqlalchemy.ext.asyncio.base.ReversibleProxy">ReversibleProxy</a></code>:
          </p>
          <table class="children sortable" id="id16556">
  
  
  <tr class="baseclassvariable">
    
    <td>Class Variable</td>
    <td><code><a href="sqlalchemy.ext.asyncio.base.ReversibleProxy.html#__slots__" class="internal-link" title="sqlalchemy.ext.asyncio.base.ReversibleProxy.__slots__">__slots__</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="baseclassmethod private">
    
    <td>Class Method</td>
    <td><code><a href="sqlalchemy.ext.asyncio.base.ReversibleProxy.html#_regenerate_proxy_for_target" class="internal-link" title="sqlalchemy.ext.asyncio.base.ReversibleProxy._regenerate_proxy_for_target">​_regenerate​_proxy​_for​_target</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="baseclassmethod private">
    
    <td>Class Method</td>
    <td><code><a href="sqlalchemy.ext.asyncio.base.ReversibleProxy.html#_retrieve_proxy_for_target" class="internal-link" title="sqlalchemy.ext.asyncio.base.ReversibleProxy._retrieve_proxy_for_target">​_retrieve​_proxy​_for​_target</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="baseclassmethod private">
    
    <td>Class Method</td>
    <td><code><a href="sqlalchemy.ext.asyncio.base.ReversibleProxy.html#_target_gced" class="internal-link" title="sqlalchemy.ext.asyncio.base.ReversibleProxy._target_gced">​_target​_gced</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="basemethod private">
    
    <td>Method</td>
    <td><code><a href="sqlalchemy.ext.asyncio.base.ReversibleProxy.html#_assign_proxied" class="internal-link" title="sqlalchemy.ext.asyncio.base.ReversibleProxy._assign_proxied">​_assign​_proxied</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="baseclassvariable private">
    
    <td>Class Variable</td>
    <td><code><a href="sqlalchemy.ext.asyncio.base.ReversibleProxy.html#_proxy_objects" class="internal-link" title="sqlalchemy.ext.asyncio.base.ReversibleProxy._proxy_objects">​_proxy​_objects</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr>
</table>
          

          
      </div>

      <div id="childList">

        <div class="baseclassmethod">
  
  
  <a name="sqlalchemy.ext.asyncio.session.AsyncSession.close_all">
    
  </a>
  <a name="close_all">
    
  </a>
  <div class="functionHeader">
    @classmethod<br />
    <span class="py-keyword">async def</span> <span class="py-defname">close_all</span>(self):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div>Close all <code>_asyncio.AsyncSession</code> sessions.</div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.ext.asyncio.session.AsyncSession.__aenter__">
    
  </a>
  <a name="__aenter__">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">async def</span> <span class="py-defname">__aenter__</span>(self):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.ext.asyncio.session.AsyncSession.__aexit__">
    
  </a>
  <a name="__aexit__">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">async def</span> <span class="py-defname">__aexit__</span>(self, type_, value, traceback):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.ext.asyncio.session.AsyncSession.__init__">
    
  </a>
  <a name="__init__">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">__init__</span>(self, bind=None, binds=None, sync_session_class=None, **kw):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Construct a new <code>_asyncio.AsyncSession</code>.</p>
<p>All parameters other than <tt class="rst-docutils literal">sync_session_class</tt> are passed to the
<tt class="rst-docutils literal">sync_session_class</tt> callable directly to instantiate a new
<code>_orm.Session</code>. Refer to <code>_orm.Session.__init__</code> for
parameter documentation.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">bind</span></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">binds</span></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">sync​_session​_class</span></td><td class="fieldArgDesc"><p>A <code>_orm.Session</code> subclass or other callable which will be used
to construct the <code>_orm.Session</code> which will be proxied. This
parameter may be used to provide custom <code>_orm.Session</code>
subclasses. Defaults to the
<code>_asyncio.AsyncSession.sync_session_class</code> class-level
attribute.</p>
<div class="rst-versionadded">
<span class="rst-versionmodified rst-added">New in version 1.4.24.</span></div>
</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">**kw</span></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.ext.asyncio.session.AsyncSession.begin">
    
  </a>
  <a name="begin">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">begin</span>(self, **kw):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Return an <code>_asyncio.AsyncSessionTransaction</code> object.</p>
<p>The underlying <code>_orm.Session</code> will perform the
"begin" action when the <code>_asyncio.AsyncSessionTransaction</code>
object is entered:</p>
<pre class="rst-literal-block">
async with async_session.begin():
    # .. ORM transaction is begun
</pre>
<p>Note that database IO will not normally occur when the session-level
transaction is begun, as database transactions begin on an
on-demand basis.  However, the begin block is async to accommodate
for a <code>_orm.SessionEvents.after_transaction_create</code>
event hook that may perform IO.</p>
<p>For a general description of ORM begin, see
<code>_orm.Session.begin</code>.</p>
</div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.ext.asyncio.session.AsyncSession.begin_nested">
    
  </a>
  <a name="begin_nested">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">begin_nested</span>(self, **kw):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Return an <code>_asyncio.AsyncSessionTransaction</code> object
which will begin a "nested" transaction, e.g. SAVEPOINT.</p>
<p>Behavior is the same as that of <code>_asyncio.AsyncSession.begin</code>.</p>
<p>For a general description of ORM begin nested, see
<code>_orm.Session.begin_nested</code>.</p>
</div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.ext.asyncio.session.AsyncSession.close">
    
  </a>
  <a name="close">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">async def</span> <span class="py-defname">close</span>(self):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Close out the transactional resources and ORM objects used by this
<code>_asyncio.AsyncSession</code>.</p>
<p>This expunges all ORM objects associated with this
<code>_asyncio.AsyncSession</code>, ends any transaction in progress and
<a href="#system-message-1"><span class="rst-problematic" id="rst-problematic-1">:term:`releases`</span></a> any <code>_asyncio.AsyncConnection</code> objects which
this <code>_asyncio.AsyncSession</code> itself has checked out from
associated <code>_asyncio.AsyncEngine</code> objects. The operation then
leaves the <code>_asyncio.AsyncSession</code> in a state which it may be
used again.</p>
<div class="rst-admonition tip">
<p class="rst-first rst-admonition-title">Tip</p>
<p class="rst-last">The <code>_asyncio.AsyncSession.close</code> method <strong>does not prevent
the Session from being used again</strong>. The
<code>_asyncio.AsyncSession</code> itself does not actually have a
distinct "closed" state; it merely means the
<code>_asyncio.AsyncSession</code> will release all database
connections and ORM objects.</p>
</div>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p class="rst-last"><a href="#system-message-2"><span class="rst-problematic" id="rst-problematic-2">:ref:`session_closing`</span></a> - detail on the semantics of
<code>_asyncio.AsyncSession.close</code></p>
</div>
</div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.ext.asyncio.session.AsyncSession.commit">
    
  </a>
  <a name="commit">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">async def</span> <span class="py-defname">commit</span>(self):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div>Commit the current transaction in progress.</div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.ext.asyncio.session.AsyncSession.connection">
    
  </a>
  <a name="connection">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">async def</span> <span class="py-defname">connection</span>(self, **kw):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Return a <code>_asyncio.AsyncConnection</code> object corresponding to
this <code>.Session</code> object's transactional state.</p>
<p>This method may also be used to establish execution options for the
database connection used by the current transaction.</p>
<div class="rst-versionadded">
<span class="rst-versionmodified rst-added">New in version 1.4.24: </span><span>Added <a href="#system-message-1"><span class="rst-problematic" id="rst-problematic-1">**</span></a>kw arguments which are passed through
to the underlying <code>_orm.Session.connection</code> method.</span></div>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p class="rst-last"><code>_orm.Session.connection</code> - main documentation for
"connection"</p>
</div>
</div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.ext.asyncio.session.AsyncSession.delete">
    
  </a>
  <a name="delete">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">async def</span> <span class="py-defname">delete</span>(self, instance):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Mark an instance as deleted.</p>
<p>The database delete operation occurs upon <tt class="rst-docutils literal">flush()</tt>.</p>
<p>As this operation may need to cascade along unloaded relationships,
it is awaitable to allow for those queries to take place.</p>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p class="rst-last"><code>_orm.Session.delete</code> - main documentation for delete</p>
</div>
</div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.ext.asyncio.session.AsyncSession.execute">
    
  </a>
  <a name="execute">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">async def</span> <span class="py-defname">execute</span>(self, statement, params=None, execution_options=<a href="sqlalchemy.util._collections.html#EMPTY_DICT" class="internal-link" title="sqlalchemy.util._collections.EMPTY_DICT">util.EMPTY_DICT</a>, bind_arguments=None, **kw):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Execute a statement and return a buffered
<code>_engine.Result</code> object.</p>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p class="rst-last"><code>_orm.Session.execute</code> - main documentation for execute</p>
</div>
</div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.ext.asyncio.session.AsyncSession.flush">
    
  </a>
  <a name="flush">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">async def</span> <span class="py-defname">flush</span>(self, objects=None):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Flush all the object changes to the database.</p>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p class="rst-last"><code>_orm.Session.flush</code> - main documentation for flush</p>
</div>
</div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.ext.asyncio.session.AsyncSession.get">
    
  </a>
  <a name="get">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">async def</span> <span class="py-defname">get</span>(self, entity, ident, options=None, populate_existing=False, with_for_update=None, identity_token=None):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Return an instance based on the given primary key identifier,
or <tt class="rst-docutils literal">None</tt> if not found.</p>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p class="rst-last"><code>_orm.Session.get</code> - main documentation for get</p>
</div>
</div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.ext.asyncio.session.AsyncSession.get_bind">
    
  </a>
  <a name="get_bind">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">get_bind</span>(self, mapper=None, clause=None, bind=None, **kw):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Return a "bind" to which the synchronous proxied <code>_orm.Session</code>
is bound.</p>
<p>Unlike the <code>_orm.Session.get_bind</code> method, this method is
currently <strong>not</strong> used by this <code>.AsyncSession</code> in any way
in order to resolve engines for requests.</p>
<div class="rst-admonition note">
<p class="rst-first rst-admonition-title">Note</p>
<p class="rst-last">This method proxies directly to the <code>_orm.Session.get_bind</code>
method, however is currently <strong>not</strong> useful as an override target,
in contrast to that of the <code>_orm.Session.get_bind</code> method.
The example below illustrates how to implement custom
<code>_orm.Session.get_bind</code> schemes that work with
<code>.AsyncSession</code> and <code>.AsyncEngine</code>.</p>
</div>
<p>The pattern introduced at <a href="#system-message-1"><span class="rst-problematic" id="rst-problematic-1">:ref:`session_custom_partitioning`</span></a>
illustrates how to apply a custom bind-lookup scheme to a
<code>_orm.Session</code> given a set of <code>_engine.Engine</code> objects.
To apply a corresponding <code>_orm.Session.get_bind</code> implementation
for use with a <code>.AsyncSession</code> and <code>.AsyncEngine</code>
objects, continue to subclass <code>_orm.Session</code> and apply it to
<code>.AsyncSession</code> using
<a href="#system-message-2"><span class="rst-problematic" id="rst-problematic-2">:paramref:`.AsyncSession.sync_session_class`</span></a>. The inner method must
continue to return <code>_engine.Engine</code> instances, which can be
acquired from a <code>_asyncio.AsyncEngine</code> using the
<code>_asyncio.AsyncEngine.sync_engine</code> attribute:</p>
<pre class="rst-literal-block">
# using example from "Custom Vertical Partitioning"


import random

from sqlalchemy.ext.asyncio import AsyncSession
from sqlalchemy.ext.asyncio import create_async_engine
from sqlalchemy.orm import Session, sessionmaker

# construct async engines w/ async drivers
engines = {
    'leader':create_async_engine("sqlite+aiosqlite:///leader.db"),
    'other':create_async_engine("sqlite+aiosqlite:///other.db"),
    'follower1':create_async_engine("sqlite+aiosqlite:///follower1.db"),
    'follower2':create_async_engine("sqlite+aiosqlite:///follower2.db"),
}

class RoutingSession(Session):
    def get_bind(self, mapper=None, clause=None, **kw):
        # within get_bind(), return sync engines
        if mapper and issubclass(mapper.class_, MyOtherClass):
            return engines['other'].sync_engine
        elif self._flushing or isinstance(clause, (Update, Delete)):
            return engines['leader'].sync_engine
        else:
            return engines[
                random.choice(['follower1','follower2'])
            ].sync_engine

# apply to AsyncSession using sync_session_class
AsyncSessionMaker = sessionmaker(
    class_=AsyncSession,
    sync_session_class=RoutingSession
)
</pre>
<p>The <code>_orm.Session.get_bind</code> method is called in a non-asyncio,
implicitly non-blocking context in the same manner as ORM event hooks
and functions that are invoked via <code>.AsyncSession.run_sync</code>, so
routines that wish to run SQL commands inside of
<code>_orm.Session.get_bind</code> can continue to do so using
blocking-style code, which will be translated to implicitly async calls
at the point of invoking IO on the database drivers.</p>
</div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.ext.asyncio.session.AsyncSession.get_nested_transaction">
    
  </a>
  <a name="get_nested_transaction">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">get_nested_transaction</span>(self):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Return the current nested transaction in progress, if any.</p>
<div class="rst-versionadded">
<span class="rst-versionmodified rst-added">New in version 1.4.18.</span></div>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td colspan="2">an <code>_asyncio.AsyncSessionTransaction</code> object, or
<tt class="rst-docutils literal">None</tt>.</td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.ext.asyncio.session.AsyncSession.get_transaction">
    
  </a>
  <a name="get_transaction">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">get_transaction</span>(self):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Return the current root transaction in progress, if any.</p>
<div class="rst-versionadded">
<span class="rst-versionmodified rst-added">New in version 1.4.18.</span></div>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td colspan="2">an <code>_asyncio.AsyncSessionTransaction</code> object, or
<tt class="rst-docutils literal">None</tt>.</td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.ext.asyncio.session.AsyncSession.invalidate">
    
  </a>
  <a name="invalidate">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">async def</span> <span class="py-defname">invalidate</span>(self):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Close this Session, using connection invalidation.</p>
<p>For a complete description, see <code>_orm.Session.invalidate</code>.</p>
</div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.ext.asyncio.session.AsyncSession.merge">
    
  </a>
  <a name="merge">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">async def</span> <span class="py-defname">merge</span>(self, instance, load=True, options=None):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Copy the state of a given instance into a corresponding instance
within this <code>_asyncio.AsyncSession</code>.</p>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p class="rst-last"><code>_orm.Session.merge</code> - main documentation for merge</p>
</div>
</div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.ext.asyncio.session.AsyncSession.refresh">
    
  </a>
  <a name="refresh">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">async def</span> <span class="py-defname">refresh</span>(self, instance, attribute_names=None, with_for_update=None):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Expire and refresh the attributes on the given instance.</p>
<p>A query will be issued to the database and all attributes will be
refreshed with their current database value.</p>
<p>This is the async version of the <code>_orm.Session.refresh</code> method.
See that method for a complete description of all options.</p>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p class="rst-last"><code>_orm.Session.refresh</code> - main documentation for refresh</p>
</div>
</div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.ext.asyncio.session.AsyncSession.rollback">
    
  </a>
  <a name="rollback">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">async def</span> <span class="py-defname">rollback</span>(self):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div>Rollback the current transaction in progress.</div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.ext.asyncio.session.AsyncSession.run_sync">
    
  </a>
  <a name="run_sync">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">async def</span> <span class="py-defname">run_sync</span>(self, fn, *arg, **kw):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Invoke the given sync callable passing sync self as the first
argument.</p>
<p>This method maintains the asyncio event loop all the way through
to the database connection by running the given callable in a
specially instrumented greenlet.</p>
<p>E.g.:</p>
<pre class="rst-literal-block">
with AsyncSession(async_engine) as session:
    await session.run_sync(some_business_method)
</pre>
<div class="rst-admonition note">
<p class="rst-first rst-admonition-title">Note</p>
<p class="rst-last">The provided callable is invoked inline within the asyncio event
loop, and will block on traditional IO calls.  IO within this
callable should only call into SQLAlchemy's asyncio database
APIs which will be properly adapted to the greenlet context.</p>
</div>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p class="rst-last"><a href="#system-message-1"><span class="rst-problematic" id="rst-problematic-1">:ref:`session_run_sync`</span></a></p>
</div>
</div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.ext.asyncio.session.AsyncSession.scalar">
    
  </a>
  <a name="scalar">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">async def</span> <span class="py-defname">scalar</span>(self, statement, params=None, execution_options=<a href="sqlalchemy.util._collections.html#EMPTY_DICT" class="internal-link" title="sqlalchemy.util._collections.EMPTY_DICT">util.EMPTY_DICT</a>, bind_arguments=None, **kw):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Execute a statement and return a scalar result.</p>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p class="rst-last"><code>_orm.Session.scalar</code> - main documentation for scalar</p>
</div>
</div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.ext.asyncio.session.AsyncSession.scalars">
    
  </a>
  <a name="scalars">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">async def</span> <span class="py-defname">scalars</span>(self, statement, params=None, execution_options=<a href="sqlalchemy.util._collections.html#EMPTY_DICT" class="internal-link" title="sqlalchemy.util._collections.EMPTY_DICT">util.EMPTY_DICT</a>, bind_arguments=None, **kw):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Execute a statement and return scalar results.</p>
<div class="rst-versionadded">
<span class="rst-versionmodified rst-added">New in version 1.4.24.</span></div>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p><code>_orm.Session.scalars</code> - main documentation for scalars</p>
<p class="rst-last"><code>_asyncio.AsyncSession.stream_scalars</code> - streaming version</p>
</div>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td colspan="2">a <code>_result.ScalarResult</code> object</td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.ext.asyncio.session.AsyncSession.stream">
    
  </a>
  <a name="stream">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">async def</span> <span class="py-defname">stream</span>(self, statement, params=None, execution_options=<a href="sqlalchemy.util._collections.html#EMPTY_DICT" class="internal-link" title="sqlalchemy.util._collections.EMPTY_DICT">util.EMPTY_DICT</a>, bind_arguments=None, **kw):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div>Execute a statement and return a streaming
<code>_asyncio.AsyncResult</code> object.</div>
  </div>
</div><div class="basemethod">
  
  
  <a name="sqlalchemy.ext.asyncio.session.AsyncSession.stream_scalars">
    
  </a>
  <a name="stream_scalars">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">async def</span> <span class="py-defname">stream_scalars</span>(self, statement, params=None, execution_options=<a href="sqlalchemy.util._collections.html#EMPTY_DICT" class="internal-link" title="sqlalchemy.util._collections.EMPTY_DICT">util.EMPTY_DICT</a>, bind_arguments=None, **kw):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Execute a statement and return a stream of scalar results.</p>
<div class="rst-versionadded">
<span class="rst-versionmodified rst-added">New in version 1.4.24.</span></div>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p><code>_orm.Session.scalars</code> - main documentation for scalars</p>
<p class="rst-last"><code>_asyncio.AsyncSession.scalars</code> - non streaming version</p>
</div>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td colspan="2">an <code>_asyncio.AsyncScalarResult</code> object</td></tr></table></div>
  </div>
</div><div class="baseclassvariable">
  
  
  <a name="sqlalchemy.ext.asyncio.session.AsyncSession.dispatch">
    
  </a>
  <a name="dispatch">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">dispatch</span> =
    
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div><div class="baseinstancevariable">
  
  
  <a name="sqlalchemy.ext.asyncio.session.AsyncSession.bind">
    
  </a>
  <a name="bind">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">bind</span> =
    
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div><div class="baseinstancevariable">
  
  
  <a name="sqlalchemy.ext.asyncio.session.AsyncSession.binds">
    
  </a>
  <a name="binds">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">binds</span> =
    
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div><div class="baseinstancevariable">
  
  
  <a name="sqlalchemy.ext.asyncio.session.AsyncSession.sync_session">
    
  </a>
  <a name="sync_session">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">sync_session</span>: <code>Session</code> =
    
  </div>
  <div class="functionBody">
    
    
    <div><p>Reference to the underlying <code>_orm.Session</code> this
<code>_asyncio.AsyncSession</code> proxies requests towards.</p>
<p>This instance can be used as an event target.</p>
<div class="rst-admonition seealso">
<p class="rst-first rst-admonition-title">See Also</p>
<p class="rst-last"><a href="#system-message-1"><span class="rst-problematic" id="rst-problematic-1">:ref:`asyncio_events`</span></a></p>
</div>
</div>
    
  </div>
</div><div class="baseinstancevariable">
  
  
  <a name="sqlalchemy.ext.asyncio.session.AsyncSession.sync_session_class">
    
  </a>
  <a name="sync_session_class">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">sync_session_class</span> =
    
  </div>
  <div class="functionBody">
    
    
    <div><p>The class or callable that provides the
underlying <code>_orm.Session</code> instance for a particular
<code>_asyncio.AsyncSession</code>.</p>
<p>At the class level, this attribute is the default value for the
<a href="#system-message-1"><span class="rst-problematic" id="rst-problematic-1">:paramref:`_asyncio.AsyncSession.sync_session_class`</span></a> parameter. Custom
subclasses of <code>_asyncio.AsyncSession</code> can override this.</p>
<p>At the instance level, this attribute indicates the current class or
callable that was used to provide the <code>_orm.Session</code> instance for
this <code>_asyncio.AsyncSession</code> instance.</p>
<div class="rst-versionadded">
<span class="rst-versionmodified rst-added">New in version 1.4.24.</span></div>
</div>
    
  </div>
</div><div class="basemethod private">
  
  
  <a name="sqlalchemy.ext.asyncio.session.AsyncSession._maker_context_manager">
    
  </a>
  <a name="_maker_context_manager">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_maker_context_manager</span>(self):
    
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="baseclassvariable private">
  
  
  <a name="sqlalchemy.ext.asyncio.session.AsyncSession._is_asyncio">
    
  </a>
  <a name="_is_asyncio">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_is_asyncio</span>: <code>bool</code> =
    
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="sqlalchemy.ext.asyncio.session.AsyncSession._proxied">
    
  </a>
  <a name="_proxied">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_proxied</span> =
    
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div>

      </div>
    </div>

    <footer class="navbar navbar-default">
  
  <div class="container">
    <a href="index.html">API Documentation</a> for sqlalchemy,
  generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a>
    22.2.0 at 2022-02-23 04:41:59.
  </div>
</footer>

    <script src="pydoctor.js" type="text/javascript"></script>

  </body>
</html>